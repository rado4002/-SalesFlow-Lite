```mermaid
graph TD
    %% ==================== COUCHE API FASTAPI ====================
    subgraph FastAPI[Python FastAPI - Analytics & ML Engine]
        A1[Analytics Engine<br/>- GET /analytics/dashboard<br/>- GET /analytics/stock-alerts<br/>- GET /analytics/top-products]
        A2[ML Forecasting<br/>- POST /ml/forecast<br/>- GET /ml/anomalies<br/>- POST /ml/segment-customers]
        A3[Excel Import/Export<br/>- POST /data/import-excel<br/>- GET /data/export-csv<br/>- POST /data/validate-data]
        A4[Reports Generation<br/>- GET /reports/daily<br/>- POST /reports/generate-custom<br/>- GET /reports/export-pdf]
        A5[Alert System<br/>- GET /alerts/check<br/>- POST /alerts/configure]
    end

    %% ==================== CONNECTIONS INTERNES ====================
    A3 -->|imported data| A1
    A3 -->|training data| A2
    A1 -->|analytics data| A4
    A2 -->|predictions| A4
    A1 -->|historical data| A2
    A1 -->|anomaly triggers| A5
    A2 -->|ML alerts| A5

    %% ==================== CONNECTIONS EXTERNES ====================
    subgraph JavaSystem[Java Spring Boot System]
        J[Java API<br/>Core Business Logic]
        DB[(PostgreSQL<br/>Products, Sales, Stock, Users)]
    end
    
    J --> DB
    
    A1 -->|read data| J
    A2 -->|read historical data| J
    A3 -->|send validated data| J
    A4 -->|read report data| J
    A5 -->|read real-time data| J

    %% ==================== STYLES ====================
    style FastAPI fill:#4caf50,color:black
    style JavaSystem fill:#2196f3,color:white
    style A1 fill:#ff9800,color:black
    style A2 fill:#e91e63,color:white
    style A3 fill:#009688,color:white
    style A4 fill:#673ab7,color:white
    style A5 fill:#f44336,color:white
``` 
# relationships:

* **Excel Import/Export** ‚Üí provides data to other modules
* **Analytics Engine** ‚Üí feeds reports and machine learning
* **ML Forecasting** ‚Üí enhances reports with predictions
* **Reports Generation** ‚Üí aggregates all data to create reports
# üéØ SC√âNARIOS CORRIG√âS - Architecture R√©elle

## **üèóÔ∏è ARCHITECTURE OFFICIELLE**
```mermaid
graph TB
    F[Frontend React] --> P[Python FastAPI]
    F --> J[Java Spring Boot]
    P --> J
    J --> DB[(PostgreSQL)]
    
    style P fill:#4caf50
    style J fill:#2196f3
    style DB fill:#9c27b0
```

## **üìä SC√âNARIO 1: DASHBOARD TEMPS R√âEL**

### **üéØ Concept**
Dashboard qui montre les performances business en temps r√©el avec calculs analytics

### **üîÑ Flux R√©el**
```mermaid
sequenceDiagram
    participant F as Frontend
    participant P as Python FastAPI
    participant J as Java Spring Boot
    participant DB as PostgreSQL
    
    F->>P: GET /analytics/dashboard
    P->>J: GET /api/sales (ventes brutes)
    P->>J: GET /api/products (produits bruts)
    J->>DB: SELECT * FROM sales, products
    DB-->>J: Donn√©es brutes
    J-->>P: JSON des donn√©es
    P->>P: üß† CALCULS ANALYTICS
    Note over P: Total ventes, tendances, alertes stock
    P-->>F: DashboardDTO avec analytics
```

### **üì¶ Composants Python**
- **Package**: `src.services`
- **Module**: `analytics_service.py`
- **Classe**: `DashboardService`
- **Fonction**: `get_dashboard_data()`



---

## **ü§ñ SC√âNARIO 2: FORECASTING VENTES 7 JOURS**

### **üéØ Concept**
Pr√©dire les ventes futures avec machine learning

### **üîÑ Flux R√©el**
```mermaid
sequenceDiagram
    participant F as Frontend
    participant P as Python FastAPI
    participant J as Java Spring Boot
    
    F->>P: POST /ml/forecast
    P->>J: GET /api/sales/history
    J-->>P: Historique ventes 90 jours
    P->>P: üß† ENTRA√éNEMENT MOD√àLE ML
    P->>P: üß† PR√âDICTIONS 7 jours
    P-->>F: ForecastResultDTO
```

### **üì¶ Composants Python**
- **Package**: `src.services`
- **Module**: `ml_service.py`
- **Classe**: `ForecastingService`
- **Fonction**: `predict_sales()`



---

## **üìÅ SC√âNARIO 3: IMPORT/EXPORT EXCEL**

### **üéØ Concept**
Importer des donn√©es Excel, les valider et les envoyer √† Java

### **üîÑ Flux R√©el**
```mermaid
sequenceDiagram
    participant F as Frontend
    participant P as Python FastAPI
    participant J as Java Spring Boot
    
    F->>P: POST /data/import (fichier Excel)
    P->>P: üìä LECTURE FICHIER Excel
    P->>P: üõ°Ô∏è VALIDATION DONN√âES
    P->>P: üîß TRANSFORMATION
    P->>J: POST /api/products/bulk
    J-->>P: Confirmation cr√©ation
    P-->>F: ImportResultDTO
```

### **üì¶ Composants Python**
- **Package**: `src.data`
- **Module**: `file_processor.py`
- **Classe**: `ExcelProcessor`
- **Fonction**: `process_import()`



---

## **üìÑ SC√âNARIO 4: RAPPORTS AUTOMATIS√âS**

### **üéØ Concept**
G√©n√©rer des rapports PDF/Excel avec analytics

### **üîÑ Flux R√©el**
```mermaid
sequenceDiagram
    participant S as Scheduler
    participant P as Python FastAPI
    participant J as Java Spring Boot
    
    S->>P: G√©n√©rer rapport quotidien
    P->>J: GET /api/sales/daily
    P->>J: GET /api/products
    J-->>P: Donn√©es brutes
    P->>P: üìà ANALYTICS AVANC√âES
    P->>P: üìä CR√âATION PDF/Excel
    P->>P: üìß ENVOI EMAIL
```

### **üì¶ Composants Python**
- **Package**: `src.services`
- **Module**: `report_service.py`
- **Classe**: `ReportGenerator`
- **Fonction**: `generate_daily_report()`



---

## **üö® SC√âNARIO 5: SYST√àME D'ALERTES INTELLIGENTES**

### **üéØ Concept**
D√©tecter automatiquement les anomalies business

### **üîÑ Flux R√©el**
```mermaid
sequenceDiagram
    participant S as Scheduler
    participant P as Python FastAPI
    participant J as Java Spring Boot
    
    S->>P: V√©rifier alertes
    P->>J: GET /api/sales/recent
    P->>J: GET /api/stock/levels
    J-->>P: Donn√©es r√©centes
    P->>P: üîç D√âTECTION ANOMALIES
    P->>P: üì¢ CR√âATION ALERTES
    P->>P: üìß NOTIFICATIONS
```

### **üì¶ Composants Python**
- **Package**: `src.services`
- **Module**: `alert_service.py`
- **Classe**: `AlertSystem`
- **Fonction**: `check_business_alerts()`



---

## **‚úÖ SUMMARY**

| Sc√©nario | Java Spring Boot | Python FastAPI |
|----------|------------------|----------------|
| **Dashboard** | Donn√©es brutes | **Calculs analytics** |
| **Forecasting** | Historique ventes | **Machine Learning** |
| **Excel Import** | Sauvegarde donn√©es | **Validation + Transformation** |
| **Rapports** | Donn√©es brutes | **Analytics + G√©n√©ration** |
| **Alertes** | Donn√©es r√©centes | **D√©tection anomalies** |

**Java = Source de v√©rit√© des donn√©es**  
**Python = Cerveau analytics/intelligence** üß†



