From bfe9f3c23a3d92787ad7a45a52ad18537a955cbf Mon Sep 17 00:00:00 2001
From: Duracuir96 <voldibokanga@gmail.com>
Date: Thu, 18 Dec 2025 00:30:42 +0800
Subject: [PATCH] connexion java api and python api, import excel, reports
 automatic

---
 .gitignore                                    |   3 +-
 ...ics_combined_daily_2025-12-17_03-13-00.pdf | 147 ++++
 ...ics_combined_daily_2025-12-17_03-48-00.pdf | 147 ++++
 ...ics_combined_daily_2025-12-17_03-53-00.pdf | 147 ++++
 ...lytics_sales_daily_2025-12-17_02-10-00.pdf | 124 ++++
 backend-python/src/api/dependencies.py        |  80 +-
 backend-python/src/api/main.py                |  56 +-
 backend-python/src/api/routes/analytics.py    |  53 +-
 backend-python/src/api/routes/excel.py        | 126 +++-
 backend-python/src/api/routes/ml.py           | 148 +++-
 backend-python/src/api/routes/reports.py      | 217 +++++-
 .../src/clients/java_inventory_client.py      | 117 ++-
 .../src/clients/java_products_client.py       | 140 ++--
 .../src/clients/java_sales_client.py          | 233 +++---
 .../src/clients/test_java_client.py           | 107 +++
 backend-python/src/data/file_processor.py     | 230 ++++--
 backend-python/src/data/ml_preprocessor.py    |  53 +-
 backend-python/src/mock/mock_inventory.py     |  12 -
 .../src/mock/mock_inventory_stock.py          |  23 +
 backend-python/src/mock/mock_ml_sales.py      |  56 ++
 backend-python/src/mock/mock_products.py      |  25 +-
 backend-python/src/mock/mock_sales.py         | 137 ++--
 backend-python/src/mock/sales_mock.py         |  78 --
 backend-python/src/models/dto/__init__.py     |   0
 backend-python/src/models/dto/forecast_dto.py | 175 +++++
 backend-python/src/models/dto/java_raw_dto.py |  79 +-
 backend-python/src/models/excel_schemas.py    | 111 +--
 backend-python/src/models/ml_schemas.py       |  68 --
 backend-python/src/models/schemas.py          |  78 --
 backend-python/src/scheduler/tasks.py         |  60 +-
 .../src/services/analytics_service.py         | 307 ++++----
 .../src/services/enrichment_service.py        |  62 +-
 .../src/services/ml_enrichment_service.py     |  48 +-
 backend-python/src/services/ml_service.py     | 334 ++++-----
 backend-python/src/services/report_service.py | 110 ++-
 .../src/services/scheduled_reports_service.py |  32 +
 backend-python/tests/test2.py                 | 125 +++-
 salesflow-frontend/.env.development           |   1 +
 salesflow-frontend/.env.production            |   1 +
 salesflow-frontend/package-lock.json          |  28 +-
 salesflow-frontend/package.json               |   1 +
 .../components/analytics/ReportsExport.tsx    | 139 +++-
 salesflow-frontend/src/pages/Analytics.tsx    | 486 ++++++++----
 salesflow-frontend/src/pages/Inventory.tsx    | 702 +++++++++++-------
 salesflow-frontend/src/pages/Login.tsx        | 138 ++--
 salesflow-frontend/src/pages/ML.tsx           | 533 +++++++++----
 salesflow-frontend/src/pages/Products.tsx     | 575 +++++++-------
 salesflow-frontend/src/pages/Register.tsx     | 242 +++---
 salesflow-frontend/src/pages/Sales.tsx        | 625 ++++++++++------
 .../src/services/api/javaApi.ts               |   2 +-
 .../src/services/importExcelAPI.ts            |   2 +-
 .../src/services/inventoryAPI.ts              |  39 +-
 salesflow-frontend/src/services/mlAPI.ts      |  48 +-
 salesflow-frontend/src/services/productAPI.ts |  29 +-
 salesflow-frontend/src/services/reportsAPI.ts |  70 +-
 salesflow-frontend/src/services/salesAPI.ts   |  88 ++-
 salesflow-frontend/src/types/analytics.ts     |  37 +-
 salesflow-frontend/src/types/inventory.ts     |  10 +-
 salesflow-frontend/src/types/ml.ts            |  92 ++-
 salesflow-frontend/src/types/product.ts       |  10 +-
 salesflow-frontend/src/types/reports.ts       |  18 +-
 salesflow-frontend/src/types/sales.ts         |  64 +-
 salesflow-frontend/vite.config.ts             |   2 +-
 63 files changed, 5300 insertions(+), 2730 deletions(-)
 create mode 100644 backend-python/reports/generated/analytics_combined_daily_2025-12-17_03-13-00.pdf
 create mode 100644 backend-python/reports/generated/analytics_combined_daily_2025-12-17_03-48-00.pdf
 create mode 100644 backend-python/reports/generated/analytics_combined_daily_2025-12-17_03-53-00.pdf
 create mode 100644 backend-python/reports/generated/analytics_sales_daily_2025-12-17_02-10-00.pdf
 create mode 100644 backend-python/src/clients/test_java_client.py
 delete mode 100644 backend-python/src/mock/mock_inventory.py
 create mode 100644 backend-python/src/mock/mock_inventory_stock.py
 create mode 100644 backend-python/src/mock/mock_ml_sales.py
 delete mode 100644 backend-python/src/mock/sales_mock.py
 create mode 100644 backend-python/src/models/dto/__init__.py
 create mode 100644 backend-python/src/models/dto/forecast_dto.py
 delete mode 100644 backend-python/src/models/ml_schemas.py
 delete mode 100644 backend-python/src/models/schemas.py
 create mode 100644 backend-python/src/services/scheduled_reports_service.py
 create mode 100644 salesflow-frontend/.env.development
 create mode 100644 salesflow-frontend/.env.production

diff --git a/.gitignore b/.gitignore
index 14e3403..582fbcd 100644
--- a/.gitignore
+++ b/.gitignore
@@ -22,7 +22,8 @@ env/
 venv/
 ENV/
 .Python
-
+exports/reports/
+reports/generated
 # Node/React
 node_modules/
 npm-debug.log*
diff --git a/backend-python/reports/generated/analytics_combined_daily_2025-12-17_03-13-00.pdf b/backend-python/reports/generated/analytics_combined_daily_2025-12-17_03-13-00.pdf
new file mode 100644
index 0000000..2836219
--- /dev/null
+++ b/backend-python/reports/generated/analytics_combined_daily_2025-12-17_03-13-00.pdf
@@ -0,0 +1,147 @@
+%PDF-1.4
+%“Œ‹ž ReportLab Generated PDF document http://www.reportlab.com
+1 0 obj
+<<
+/F1 2 0 R /F2 3 0 R /F3 5 0 R /F4 6 0 R
+>>
+endobj
+2 0 obj
+<<
+/BaseFont /Helvetica /Encoding /WinAnsiEncoding /Name /F1 /Subtype /Type1 /Type /Font
+>>
+endobj
+3 0 obj
+<<
+/BaseFont /Helvetica-Bold /Encoding /WinAnsiEncoding /Name /F2 /Subtype /Type1 /Type /Font
+>>
+endobj
+4 0 obj
+<<
+/Contents 13 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 12 0 R /Resources <<
+/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
+>> /Rotate 0 /Trans <<
+
+>> 
+  /Type /Page
+>>
+endobj
+5 0 obj
+<<
+/BaseFont /Helvetica-BoldOblique /Encoding /WinAnsiEncoding /Name /F3 /Subtype /Type1 /Type /Font
+>>
+endobj
+6 0 obj
+<<
+/BaseFont /Times-Roman /Encoding /WinAnsiEncoding /Name /F4 /Subtype /Type1 /Type /Font
+>>
+endobj
+7 0 obj
+<<
+/Contents 14 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 12 0 R /Resources <<
+/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
+>> /Rotate 0 /Trans <<
+
+>> 
+  /Type /Page
+>>
+endobj
+8 0 obj
+<<
+/Contents 15 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 12 0 R /Resources <<
+/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
+>> /Rotate 0 /Trans <<
+
+>> 
+  /Type /Page
+>>
+endobj
+9 0 obj
+<<
+/Contents 16 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 12 0 R /Resources <<
+/ExtGState <<
+/gRLs0 <<
+/CA 0
+>>
+>> /Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
+>> /Rotate 0 /Trans <<
+
+>> 
+  /Type /Page
+>>
+endobj
+10 0 obj
+<<
+/PageMode /UseNone /Pages 12 0 R /Type /Catalog
+>>
+endobj
+11 0 obj
+<<
+/Author (\(anonymous\)) /CreationDate (D:20251217031300+08'00') /Creator (\(unspecified\)) /Keywords () /ModDate (D:20251217031300+08'00') /Producer (ReportLab PDF Library - www.reportlab.com) 
+  /Subject (\(unspecified\)) /Title (\(anonymous\)) /Trapped /False
+>>
+endobj
+12 0 obj
+<<
+/Count 4 /Kids [ 4 0 R 7 0 R 8 0 R 9 0 R ] /Type /Pages
+>>
+endobj
+13 0 obj
+<<
+/Filter [ /ASCII85Decode /FlateDecode ] /Length 729
+>>
+stream
+GasId9lldX&A@sBm&?1l@R[=njBL@a^#Y7cNkI+h4%c^k"%eu3hZ[N\0kLbKLln9PhqNR;_!/hs>AaIjjD]:!J-,:!TOJ9!/%EY:]*43c,FEJfd>tY.).i$gioVXShuq[a(b3d9##&WsO;aK"W/ZFAZ_4*RnXtiqpDclQ!1d^s$:j9)"XeL_mG#fFrIM#rq6,lE5lM4Y+&TuQAqh/3N)hs^>['>lG":a&\rS&Yp5,U/.@sfP&6VesEC5e`eL<maN*=RM.34ho(V&d/q$>kf;87:JCuNr0V5B`HHqZ5t6u0u9VR3[%W!<P-og"IpjR>jVptPrpV^BKY$!FIY0UGA!M6R@'Isq.JKbk9=,bl5f5ac)Nl;/4$L`>&qnaY;)_R=,9+h!'-+@OrM;Y(7i^8SYjG0mAqj&5(qagl?--Me)#WI`3YTa`G'\&G+\g=%3990r7pf-(p7oMGFZU>m]^;EMlqs1b#F3i8^kfkN"=-bq*:T^GI-R3Q&H[EjN$0bE-u$\clFWkMAsCBmOSg=Z;^g,C0Tqb"<2>/<J<pXF0TUae_03pr!dp.""7$dK8Gq;nAiMN6teiX,f)HAQ*f(:[VCHlEbe6MZ2pHpIngMf\2r$R4(>JF$hYXeF-#P(q`<RMfOpf^%Iu@9eog<?f%2F>>p=iU@egKqESP(N<+J>*HE.>W:o`QecnPi]:'"W)2"4r7K$KWP)*r#4"XF;)p3,!UYIrIf~>endstream
+endobj
+14 0 obj
+<<
+/Filter [ /ASCII85Decode /FlateDecode ] /Length 1895
+>>
+stream
+Gatm<968iG&AII3m%lL1-:We=akY<&c(o2;8Zh^7oDk)Z`IoFHK!_<PqC_Pn,_r`DO0#T8@\<GhJV>NUpn@*4A-;>]$=<]uJML>5!u45>l?@KZ>21`Dc`%aY0oIK61*e\W1!1Z-":BWF+@.P,NIXjIn/G=c$e.b])-"+3'+Bs-9eb]</Dkh48Q08G#'?R1?(E8Wau`PXA`it0X?OPe\b"f*I`=J^MSqigSr>IEi>HNorSc$Dg3V^9*]p9U^jQBr#9grL`^"'b$Z7W%r*ZP+9OC*OQ.neZYtT;+n+sFub7["d0SHp40U8e8$=s5h@.JoT$Q;@I?W#[b>\:rLDSVQ4Po(pQTrsi1%A/qeD[b^g9pU=<OD;DA.Wq#*H8Yj=`eb$:T>X.:H\V@Tj$%jrc&h-Tph[:ik\>=q58A1TV0KpC'mk\1QpnfICni>3W6p.&mLVjaMA/7NL][j7dnkn*%:"h`WiU=QQ+8\>A)Or"TO&Si[P>a4SZFP@5.#sr,n#*6r>Omq.]j`MVBa<-V$j>f3\(S2AtYnc'(^&\*6AH^fs#a]oqlX9@.AY"2.U3$)[#('A4;q5]#H:=iN.6-I*LVB>GoPSs)h/Mm:2#!NNLB`WFk*3)3Hb)":-&oL9i&n;c?\nW%ht_8AVIPq_9XZ&sD&6$EVX``3ohR?.Yr'7`(3_F:FluM:69`DCf%\[D'hglK9;+Z.fIV9Ht.fT&B\_1jh%mmg:V2\u^(Z2EJ%nY=='#=NNddC`48Gj_oWOd$;E]_*3$lJWWaB!7o#HGldXW2S"+pPLX:*n3S-,@O'Z2V`cK@PTA+Tl=-i@a,2f53ZYjff*2>JQrs_5KLA7L1()HPeW,*uVR:Ou$;5'm8o.^sBp7%VOa*M[?Ud+W;Dps\gF=0D4:"J3&\t)?@f5LK[Y1e`c2^JVN%buA=0@J`dXITp^sX8@DAPT3roQ1Lh0J(omO"7n4Bejma2p&?>/2g\XFomm96%b_ZmfgZB5)]@]*ZAl[&_7hArYL%g=hYck3KI_:$&79FMQc]?+MQY`XOK:EFMX[&uW>H$XW#lcm-`6X,!M+C`CE9?'Um[C-VJq2to9:)EY<*2[FY\INWToEpKT\XR/6$5^3=,5_#?3gMCJ;bjSj']l)9"elQ"Ge[sCBCgebNj)qeIl#+u$\N)%WN+.J(oGK:@4i:5)pB.*KQmaA6b;LQZI<]C#HQk/3Qt2D@E96>Fc8pXm@f\9R:4s5e0(9%^Fo?\RE$Pi:!=tfT<%op>Yu!su&"gO7oFt6h.@.nN/<(m*`<O4jkU5;+KZ49<"BQ`rTaU>[]rA%`3Jc\r(DS)"3TH_,Dk/iLJG1a9r,b)>0BtA6NHlnQp*'ol?nfm+5TQl<D0/WbopjC`b=#8i7Bc;j0Kc&6Q_77q=[t]Jj%efK1NkuBMSmdID&qd]04,gj\SD$WIm5T@CXg8bT5PNjcb0"k\(N."Hd1NT,omSXQ\,C["-s6^Y#Gp'_4D>];5-3>*>-em+H?_::H73e2bsVEY]=:S1:['uWki\+LEYd.iu_pX1JG41rikJ_HJc0bTAA&J+7s]a0mQfedlj$r8sg1=#<:glL-<*E:IFRoL7Vl8"3ci,1ZY0XE@lT8n7"B3%k<$=oc"97>'S8n![LM\/oEdf^C1^$Z6"BKq3[UZTjo'sb1W/@V83>lW8PNIDMHP`+6F5SI/io=49J8Dma7UL,=B=7(@k5K^Wi(*"H`aMS\0HA/PiW*+r[^]hS7=%k:quD6/9WoD_oh;"6r!_Jk7.UF6(E48,(4sj^Uc.8Bt]ZH$ZO`dCoBIT&&b.]CcJLDR4.kob/fc&EB;)UPNmrDPWUK5"oBGRDOkTYBo1JTi;TCeb&>PF`d?U[g5I7bB%l;RrOJpYrO9KpGX!mr"$@49U,~>endstream
+endobj
+15 0 obj
+<<
+/Filter [ /ASCII85Decode /FlateDecode ] /Length 422
+>>
+stream
+Gas2F9i&Y\%#46H'ttf-P6eUdUra>XO:Xs!lZ!^t>%$\a9H/e;O.1U"9J).UaEaC:G%;8Z/;jJh#2hOpX'5X7a9j&b%:fugPGq>H2<e5T^k!UcM5K3_pdE]OA0oU`0_GWl)0uPb=1&cMikVe#pe11^c_6`IS`LJ0VI^#f/(ZfCYY>HUQ#'k#[,8P:Q\R;+/''&M'VcAdQ5b'pp_a&PBd-=^36T)-m4n'b'B:q&e2Hgom9-IH(%R+CK#Qq_1%'9@)OjgUJ$3n_`lIiHa$??<8>1cQcjs)HUg4UL9egD$!AZY%;BKY::s]\TG55IYQ-pGE<s7^`lqZdJ^71^3:0j,u%J(uUpDj2Qj,*(5rR],XF9IFMJV():>l*0Ios(o)DbIVM=ue<>FgI=eTU)Kqp!#P@%/;gI;[)G&PP)&#~>endstream
+endobj
+16 0 obj
+<<
+/Filter [ /ASCII85Decode /FlateDecode ] /Length 1770
+>>
+stream
+Gau0D968iG&AII3m%k^K'>XeW^,!A]EKWoR2NFoHLUm^oKI+PN+d8-Rm]Z)2KHO/97E)%SQ3gtAhdUf7=HJ,e^U3i%>6;I*_T@-3Pelu--mp"3kO<@M\fXeekqh<h/><]#!MPVtTcB4mOBPp<[04LVm)aSY1t:68j5Wpcc\PMi,1L*^Jp\'gO4f0,8sMWWY>CHuFpGQ/mU!^$)baURr%Ij"AHVZu`-Go]2hT:*_iBk^2Net'.7BG\**;3oD4Cik(BO%GS>^;;&@kc^CT+>_bGli-8M&=<1M=(RiL0rOHk;^ej&..q111U`-Bq5<!06rF\i%ZrbiYmT6ETjI!-JZ\^+L4@4YG`jJ5jeT%,q>O\6.Ob3)?\a*8hLm'&W68?D%#?QJm;R<9/G`&]#r?]ZPn(]4pUEfLG/T`Q)H?)F(#CEe@\.d(p[trMVqL7[Y#"0kur9OA_H"1g7]^b7VRH"X/ZWk=3P]'FJ!Y4USgIN=^RL&pk+Oo*hF45O8X?G/Jd!DD1@sl#Zu-'VHepm+/01*i;[Wo6cKuTQ>&LLF@4(CF!#7M`Fn-R)^cL?ZEXm%Gk\pgMPVra(lDg<Q;!e4qBa?3h_P'+-FA'k!eC5B)9.mp$SujYB#o0B4We#?t<uTEi3M/=-#SEfbr-VmOH43-5DiC?WmW39=GLU?/kR(`<>Q@4cX853.WFhk6$U$d%;\`I;2JA:*6_*c3;FV)-g[2IOYORkCWa]+CF_#Q9`Z1Pp[bGobQdN#a.KDTs3,/1D)"Bo*<dqlqLjQ.f2;V^5Y%kfC&8$_[''37pArZG0B/h.9ol;k'VO,C%,t"]!^bugS"<N$?&ddK>Le+et=uSMR0.dQI3Kd_)K_Fi!o#gZpgih=M%d9m?c'Y^\"(G4E?5o@6s9Brj^9+6f2%jlEf-N?!2:c^Wg==B=;=sZG:d3Zdp(1pf-As,LrI5/f&7@[cG"m1hL20;9U0gF3VO+qr_=V96Md<`t7X(hN$:X&.Y,4<h.AecO1!?7@-.TFr9/s+03itc_IN]Y?6e:Id!O88AI>o21JpL1;0''/&pZ.PQX2$&&e!c;R_Yjm*3]\laa#5)cXMWN1RHM]5NbZE$GM9+ROC,@=%Fb4JQLZL:TiF%h=n7e4Ai?iDS&m.f'/pj-A=]<behqC\=0$aMBs5X!14=Jp48Pk1$NPVr$f9K-PtW7<CoC_Oc8V],-fZa2E*+$b!R;^J9,q?2'_r/dWK_4aVC![KCp4SVBr**FYjSOg,l!!#^jL1AEt6-4"B)Hlah+*EER4_;S;92c;Up>fnj_(i\\NU3>40dKVL^J(KgjnS<%b.8(Q3+qh<p';P4V0_mn+*UKC!lL+nq>ko81iEf@LkSZcMlHT'GBA9_;+UL97s'6J:^1HNo2-n[IdZ(5KZe9fn!t.+rV"cCtE?VP"GuXU1biUU;=&RqMAH=5<V'5r.iTP9e<"GG#E_,Q1jqYg;@MBM#IulI5jW<`sIp.a7Jn-I+<*G?rdh-i*Q8^SJ9$;o:"9Kn%%ASa`4N_[F7@]5:*X(1?b9pE3GPG1(YYmn5Dc3^bU9/I8F>s/j^p\!CMG+eD-*HtWIa,f9PqjtG;7g/:;CV1rQ!R-6n(0>B`(Xa+Q,mlD^=5'_;Ci22gkX@7'.4(_?]X.T__PU9g&$*$*CYGk`,HY_59c-2_@Xi<"NFNs5OZ!Ucd>k)B"2R3?Cec^Md1ZDZa,$EH+GWYA8^:7``\fqiN8m%IStFt\(V-*;09lGY,["E9U.rb_(L5cL,Rn=dJr1$rs\~>endstream
+endobj
+xref
+0 17
+0000000000 65535 f 
+0000000073 00000 n 
+0000000134 00000 n 
+0000000241 00000 n 
+0000000353 00000 n 
+0000000558 00000 n 
+0000000677 00000 n 
+0000000786 00000 n 
+0000000991 00000 n 
+0000001196 00000 n 
+0000001437 00000 n 
+0000001507 00000 n 
+0000001791 00000 n 
+0000001869 00000 n 
+0000002689 00000 n 
+0000004676 00000 n 
+0000005189 00000 n 
+trailer
+<<
+/ID 
+[<7e5a7be03dd2927fce1e6217f7fdd2ba><7e5a7be03dd2927fce1e6217f7fdd2ba>]
+% ReportLab generated PDF document -- digest (http://www.reportlab.com)
+
+/Info 11 0 R
+/Root 10 0 R
+/Size 17
+>>
+startxref
+7051
+%%EOF
diff --git a/backend-python/reports/generated/analytics_combined_daily_2025-12-17_03-48-00.pdf b/backend-python/reports/generated/analytics_combined_daily_2025-12-17_03-48-00.pdf
new file mode 100644
index 0000000..97831ef
--- /dev/null
+++ b/backend-python/reports/generated/analytics_combined_daily_2025-12-17_03-48-00.pdf
@@ -0,0 +1,147 @@
+%PDF-1.4
+%“Œ‹ž ReportLab Generated PDF document http://www.reportlab.com
+1 0 obj
+<<
+/F1 2 0 R /F2 3 0 R /F3 5 0 R /F4 6 0 R
+>>
+endobj
+2 0 obj
+<<
+/BaseFont /Helvetica /Encoding /WinAnsiEncoding /Name /F1 /Subtype /Type1 /Type /Font
+>>
+endobj
+3 0 obj
+<<
+/BaseFont /Helvetica-Bold /Encoding /WinAnsiEncoding /Name /F2 /Subtype /Type1 /Type /Font
+>>
+endobj
+4 0 obj
+<<
+/Contents 13 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 12 0 R /Resources <<
+/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
+>> /Rotate 0 /Trans <<
+
+>> 
+  /Type /Page
+>>
+endobj
+5 0 obj
+<<
+/BaseFont /Helvetica-BoldOblique /Encoding /WinAnsiEncoding /Name /F3 /Subtype /Type1 /Type /Font
+>>
+endobj
+6 0 obj
+<<
+/BaseFont /Times-Roman /Encoding /WinAnsiEncoding /Name /F4 /Subtype /Type1 /Type /Font
+>>
+endobj
+7 0 obj
+<<
+/Contents 14 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 12 0 R /Resources <<
+/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
+>> /Rotate 0 /Trans <<
+
+>> 
+  /Type /Page
+>>
+endobj
+8 0 obj
+<<
+/Contents 15 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 12 0 R /Resources <<
+/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
+>> /Rotate 0 /Trans <<
+
+>> 
+  /Type /Page
+>>
+endobj
+9 0 obj
+<<
+/Contents 16 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 12 0 R /Resources <<
+/ExtGState <<
+/gRLs0 <<
+/CA 0
+>>
+>> /Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
+>> /Rotate 0 /Trans <<
+
+>> 
+  /Type /Page
+>>
+endobj
+10 0 obj
+<<
+/PageMode /UseNone /Pages 12 0 R /Type /Catalog
+>>
+endobj
+11 0 obj
+<<
+/Author (\(anonymous\)) /CreationDate (D:20251217034800+08'00') /Creator (\(unspecified\)) /Keywords () /ModDate (D:20251217034800+08'00') /Producer (ReportLab PDF Library - www.reportlab.com) 
+  /Subject (\(unspecified\)) /Title (\(anonymous\)) /Trapped /False
+>>
+endobj
+12 0 obj
+<<
+/Count 4 /Kids [ 4 0 R 7 0 R 8 0 R 9 0 R ] /Type /Pages
+>>
+endobj
+13 0 obj
+<<
+/Filter [ /ASCII85Decode /FlateDecode ] /Length 729
+>>
+stream
+GasId9lldX&A@sBm&?1l@R[=N,i@<&kp;+4E9r8Zfhm?t(eEBYq^r_LO"jS#6&bHCqqgaF"AUT[hf9+o,DWTu";Hs$!>SOp?bo1FfI_&1)Sq@GNdbNYPYm2'/T-RM"AXL'Jt^WJ=^]Z]+Z1r$:`BYaAjK".i^"Hkml?c,!BSJq'TUK1$;U#Hg:*Dkq?'fmo3WYjJG^?;5GEu,bmZ=u0j<ZiF.MP%YWG0Id!ZVZmLr1>;`qZ++DaiAEC3MkX&FhM(q$#$;E?Rg06#O>ne&UVU42Jrftsk@8kh5nq3YPrM:NPcRaTJ2TcP0Re,qE\P/B*Kic>W`S=1RU-J2Xu@EqJZ`Roj%^V5*`_Ma1YP0j[nTM2UbFf:0M`!pRtq"X2O@9YRX&6m"Q&0bt7WHj2E?e!mp4)!5tE@LOIjP74Q'7C&Me3N-=d"W7$gZ$U>mHG1XV',YslO\tVHDl6hdI@ojW?(#ts'JKc3MrUjfkN"=-bq*:T^GI-erd.ig1S:M(^P$KKgKE3<F;_aCBmOSg=Z;^g,C0Tqb"<2>/<J<pXF0TUae_03pr!dp.""7$dK8Gq;nAiMN6teiX,f)HAQ*f)0!,ap2*V7$0;D\o*#_:0?u@4>7dLb!+[a8Ql-fZ,AFXsXk&<pLqO;d)TDr+?R<!>6RV9K$&@E*Aao<ZquX%C?Yf45K'OaHpp(jb;I#!7*#4A-SKHTg4LOqJh-bY%1Fe1!5PAA?LB~>endstream
+endobj
+14 0 obj
+<<
+/Filter [ /ASCII85Decode /FlateDecode ] /Length 1895
+>>
+stream
+Gatm<968iG&AII3m%lL1-:We=akY<&c(o2;8Zh^7oDk)Z`IoFHK!_<PqC_Pn,_r`DO0#T8@\<GhJV>NUpn@*4A-;>]$=<]uJML>5!u45>l?@KZ>21`Dc`%aY0oIK61*e\W1!1Z-":BWF+@.P,NIXjIn/G=c$e.b])-"+3'+Bs-9eb]</Dkh48Q08G#'?R1?(E8Wau`PXA`it0X?OPe\b"f*I`=J^MSqigSr>IEi>HNorSc$Dg3V^9*]p9U^jQBr#9grL`^"'b$Z7W%r*ZP+9OC*OQ.neZYtT;+n+sFub7["d0SHp40U8e8$=s5h@.JoT$Q;@I?\t^k\]fr#gjguG.PXb+6X;SB)EoaThAF>WRk+SW+k:aa<U)(4oP=^YN"ZpS5)G,RpC-Z2a*m_nRj$13nC_E[dFIZlIk'H29C[gf.eX9@0oLPqfg\[E;54/+h'%_L'e+N&&I/^MVkF`3)n6[J<E\W-.W]6[`kZ_"6+o1\D.AIH3a#s_HtWbm9,@<LqDHVk<E_K$9h1T:8f(MUF]K9DbWn[P,j+&B30FgEZXNGDlV67R^uG6#C<4E'2?q)-aGMfIFH'GY_HH?9pmT*c[SDt0rp-5#gW("")I&OI;pE0F1*UH1#S9,h$threVl$If;.IsHOb-l*pL@;>,p^%K'j.5JM/<X/\unb-N.`:HkSc]t&uXFJgfV'ACOMOXe^$O5A%)o7Qpr9U4i7@IB_Z*dhA'-BF]n*>D00*f?]>'%Z''SRfebUmbMW<)TIYXDJpm"b![F=b!N^too)e>9Ci]-i-`bM3iIs<8`(%8C:4#l^.6F33eAYP_NYQJIF?4YVXpkRr0s_KJ#`4H"A/(j*WZD%s9l'&u'UI+cQ.WMpdjD'7,4Rk?^Pm?9UhkqB[T,9gGS#sE,(N%]`;%kuC^FCJS,nk5).>"bY$;hJV#<'jJ>GC_gb+2Er696"](=!gh+]HfH*gbeNg!t][")SB=9mSdQK!FGBiEY>cdMM`Fq]VbBNL<ZbSmh([C%1Pc.?fHS'"GQl%$NE\o_$;N>kuSj2@DA,YiOo(;.raTgtDK<t@m5ff"lR\gfY@e:-nlDXMKS1j3Q3D@l:ArBT9hjjm-B=keH(JFEV6Jc7]E\(T!VR,>O,HekK#Xfo#mX*:\dfYUO&`p7HqdbUe&F)t*8)8um/kqcS_H\SL2mKZ'u0MtXJQYf->qs_n&p-`:D1!(a_iQBUkSTP8e`WBO-SHpMU>i6!Elh^F/i(+\S!ZjN1WF/s\@\Jkt*^4qMkUECY;_3d'=;j[2M[bE_cqhI5#`TEW#d-Kn65SM?HW+!KEY-7n/h01#ElL96h`>]"!UjIRq!!+[?IW[K)Y6^+m6qlc^gN[4JN?bWgZYBOl8bQIQ\hS]MI,J^@!G"J00uKmZAsAra.:T!B'atc'Si@qg,dMD?G8V]F4L%9rdJ/^f;OJN5Mn*_SpBd_DmN5#pR9!290+7:0*_`@#:pOG>cAd-JitPDU-s?[3[1Lc5o^KTSoD=SDk7<i@HGT0AT7+u<.j34%n"L;a$7k:B:*GArF*hHotG:N5J*ts5NqELA+H]TVgC%oPV=8X%rf\c%"!$hT8)2i$pDSN#FHY8B#m4:i`c2Oi5KZD+&r0Zl8KKM[.'Ge"\>.C>hjSVIMj@'A3K]unhE#>6H;%oQ*W1_97mVb;8Irrg^KtJ50PD0q#9YXGm9XhgnR#"7YZSM/EE@tJ"&#3#pKP%3dL``>Fo;46o8AD]RQD(cXRqhK".-hhI`QT#Ln%I"Hu64k/`ZFO7&Eqb/]J;OIX?>o(5uIUO2Zr4M09:GO#q#gh,6`l6fQP+N?F07hObogdj(uI$hcm15-O2?M25s6E))dX6JS+lKIU3D\7qMQfmeV2WGhj@WPKumVaqdp`F,\9Uu~>endstream
+endobj
+15 0 obj
+<<
+/Filter [ /ASCII85Decode /FlateDecode ] /Length 422
+>>
+stream
+Gas2F9i&Y\%#46H'ttf-P6eUdUra>XO:Xs!lZ!^t>%$\a9H/e;O.1U"9J).UaEaC:G%;8Z/;jJh#2hOpX'5X7a9j&b%:fugPGq>H2<e5T^k!UcM5K3_pdE]OA0oU`0_GWl)0uPb=1&cMikVe#pe11^c_6`IS`LJ0VI^#f/(ZfCYY>HUQ#'k#[,8P:Q\R;+/''&M'VcAdQ5b'pp_a&PBd-=^36T)-m4n'b'B:q&e2Hgom9-IH(%R+CK#Qq_1%'9@)OjgUJ$3n_`lIiHa$??<8>1cQcjs)HUg4UL9egD$!AZY%;BKY::s]\TG55IYQ-pGE<s7^`lqZdJ^71^3:0j,u%J(uUpDj2Qj,*(5rR],XF9IFMJV():>l*0Ios(o)DbIVM=ue<>FgI=eTU)Kqp!#P@%/;gI;[)G&PP)&#~>endstream
+endobj
+16 0 obj
+<<
+/Filter [ /ASCII85Decode /FlateDecode ] /Length 1770
+>>
+stream
+Gau0D968iG&AII3m%k^K'>XeW^,!A]EKWoR2NFoHLUm^oKI+PN+d8-Rm]Z)2KHO/97E)%SQ3gtAhdUf7=HJ,e^U3i%>6;I*_T@-3Pelu--mp"3kO<@M\fXeekqh<h/><]#!MPVtTcB4mOBPp<[04LVm)aSY1t:68j5Wpcc\PMi,1L*^Jp\'gO4f0,8sMWWY>CHuFpGQ/mU!^$)baURr%Ij"AHVZu`-Go]2hT:*_iBk^2Net'.7BG\**;3oD4Cik(BO%GS>^;;&@kc^CT+>_bGli-8M&=<1M=(RiL0rOHk;^ej&..q111U`-Bq5<!06rFLGd8?biYmT6ETjI!-JZ\^+L4@4YG`jJ5jeT%,q>O\6.Ob3)?\a*8hLm'&W68?D%#?QJm;R<9/G`&]#r?]ZPn(]4pUEfLG/T`Q)H?)F(#CEe@\.d(p[trMVqL7[Y#"0kur9OA_H"1g7]^b7VRH"X/ZWk=3P]'FJ!Y4USgIN=^RL&pk+Oo*hF45O8X?G/Jd!DD1@sl#Zu-'VHepm+/01*i;[Wo6cKuTQ>&LLF@4(CF!#7M`Fn-R)^cL?ZEXm%Gk\pgMPVra(lDg<Q;!e4qBa?3h_P'+-FA'k!eC5B)9.mp$SujYB#o0B4We#?t<uTEi3M/=-#SEfbr-VmOH43-5DiC?WmW39=GLU?/kR(`<>Q@4cX853.WFhk6$U$d%;\`I;2JA:*6_*c3;FV)-g[2IOYORkCWa]+CF_#Q9`Z1Pp[bGobQdN#a.KDTs3,/1D)"Bo*<dqlqLjQ.f2;V^5Y%kfC&8$_[''37pArZG0B/h.9ol;k'VO,C%,t"]!^bugS"<N$?&ddK>Le+et=uSMR0.dQI3Kd_)K_Fi!o#gZpgih=M%d9m?c'Y^\"(G4E?5o@6s9Brj^9+6f2%jlEf-N?!2:c^Wg==B=;=sZG:d3Zdp(1pf-As,LrI5/f&7@[cG"m1hL20;9U0gF3VO+qr_=V96Md<`t7X(hN$:X&.Y,4<h.AecO1!?7@-.TFr9/s+03itc_IN]Y?6e:Id!O88AI>o21JpL1;0''/&pZ.PQX2$&&e!c;R_Yjm*3]\laa#5)cXMWN1RHM]5NbZE$GM9+ROC,@=%Fb4JQLZL:TiF%h=n7e4Ai?iDS&m.f'/pj-A=]<behqC\=0$aMBs5X!14=Jp48Pk1$NPVr$f9K-PtW7<CoC_Oc8V],-fZa2E*+$b!R;^J9,q?2'_r/dWK_4aVC![KCp4SVBr**FYjSOg,l!!#^jL1AEt6-4"B)Hlah+*EER4_;S;92c;Up>fnj_(i\\NU3>40dKVL^J(KgjnS<%b.8(Q3+qh<p';P4V0_mn+*UKC!lL+nq>ko81iEf@LkSZcMlHT'GBA9_;+UL97s'6J:^1HNo2-n[IdZ(5KZe9fn!t.+rV"cCtE?VP"GuXU1biUU;=&RqMAH=5<V'5r.iTP9e<"GG#E_,Q1jqYg;@MBM#IulI5jW<`sIp.a7Jn-I+<*G?rdh-i*Q8^SJ9$;o:"9Kn%%ASa`4N_[F7@]5:*X(1?b9pE3GPG1(YYmn5Dc3^bU9/I8F>s/j^p\!CMG+eD-*HtWIa,f9PqjtG;7g/:;CV1rQ!R-6n(0>B`(Xa+Q,mlD^=5'_;Ci22gkX@7'.4(_?]X.T__PU9g&$*$*CYGk`,HY_59c-2_@Xi<"NFNs5OZ!Ucd>k)B"2R3?Cec^Md1ZDZa,$EH+GWYA8^:7``\fqiN8m%IStFt\(V-*;09lGY,["E9U.rb_(L5cL,Rn=dJo'SrtP~>endstream
+endobj
+xref
+0 17
+0000000000 65535 f 
+0000000073 00000 n 
+0000000134 00000 n 
+0000000241 00000 n 
+0000000353 00000 n 
+0000000558 00000 n 
+0000000677 00000 n 
+0000000786 00000 n 
+0000000991 00000 n 
+0000001196 00000 n 
+0000001437 00000 n 
+0000001507 00000 n 
+0000001791 00000 n 
+0000001869 00000 n 
+0000002689 00000 n 
+0000004676 00000 n 
+0000005189 00000 n 
+trailer
+<<
+/ID 
+[<fb87cb77ab83e71206180a8cf3c004f2><fb87cb77ab83e71206180a8cf3c004f2>]
+% ReportLab generated PDF document -- digest (http://www.reportlab.com)
+
+/Info 11 0 R
+/Root 10 0 R
+/Size 17
+>>
+startxref
+7051
+%%EOF
diff --git a/backend-python/reports/generated/analytics_combined_daily_2025-12-17_03-53-00.pdf b/backend-python/reports/generated/analytics_combined_daily_2025-12-17_03-53-00.pdf
new file mode 100644
index 0000000..1cdd09b
--- /dev/null
+++ b/backend-python/reports/generated/analytics_combined_daily_2025-12-17_03-53-00.pdf
@@ -0,0 +1,147 @@
+%PDF-1.4
+%“Œ‹ž ReportLab Generated PDF document http://www.reportlab.com
+1 0 obj
+<<
+/F1 2 0 R /F2 3 0 R /F3 5 0 R /F4 6 0 R
+>>
+endobj
+2 0 obj
+<<
+/BaseFont /Helvetica /Encoding /WinAnsiEncoding /Name /F1 /Subtype /Type1 /Type /Font
+>>
+endobj
+3 0 obj
+<<
+/BaseFont /Helvetica-Bold /Encoding /WinAnsiEncoding /Name /F2 /Subtype /Type1 /Type /Font
+>>
+endobj
+4 0 obj
+<<
+/Contents 13 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 12 0 R /Resources <<
+/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
+>> /Rotate 0 /Trans <<
+
+>> 
+  /Type /Page
+>>
+endobj
+5 0 obj
+<<
+/BaseFont /Helvetica-BoldOblique /Encoding /WinAnsiEncoding /Name /F3 /Subtype /Type1 /Type /Font
+>>
+endobj
+6 0 obj
+<<
+/BaseFont /Times-Roman /Encoding /WinAnsiEncoding /Name /F4 /Subtype /Type1 /Type /Font
+>>
+endobj
+7 0 obj
+<<
+/Contents 14 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 12 0 R /Resources <<
+/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
+>> /Rotate 0 /Trans <<
+
+>> 
+  /Type /Page
+>>
+endobj
+8 0 obj
+<<
+/Contents 15 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 12 0 R /Resources <<
+/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
+>> /Rotate 0 /Trans <<
+
+>> 
+  /Type /Page
+>>
+endobj
+9 0 obj
+<<
+/Contents 16 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 12 0 R /Resources <<
+/ExtGState <<
+/gRLs0 <<
+/CA 0
+>>
+>> /Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
+>> /Rotate 0 /Trans <<
+
+>> 
+  /Type /Page
+>>
+endobj
+10 0 obj
+<<
+/PageMode /UseNone /Pages 12 0 R /Type /Catalog
+>>
+endobj
+11 0 obj
+<<
+/Author (\(anonymous\)) /CreationDate (D:20251217035300+08'00') /Creator (\(unspecified\)) /Keywords () /ModDate (D:20251217035300+08'00') /Producer (ReportLab PDF Library - www.reportlab.com) 
+  /Subject (\(unspecified\)) /Title (\(anonymous\)) /Trapped /False
+>>
+endobj
+12 0 obj
+<<
+/Count 4 /Kids [ 4 0 R 7 0 R 8 0 R 9 0 R ] /Type /Pages
+>>
+endobj
+13 0 obj
+<<
+/Filter [ /ASCII85Decode /FlateDecode ] /Length 729
+>>
+stream
+GasId9lldX&A@sBm&?1l@R[=njBL@a^#Y7cNkI+h4%c^k"%eu3hZ[N\0kLbKLln9PhqNR;_!/hs>AaIjjD]:!J-,:!TOJ9!/%EY:]*43c,FEJfd>tY.).i$gioVXShuq[a(b3d9##&WsO;aK"W/ZFAZ_4*RnXtiqpDclQ!1d^s$:j9)"XeL_mG#fFrIM#rq6,lE5lM4Y+&TuQAqh/3N)hs^>['>lG":a&\rS&Yp5,U/.@sfP&6VesEC5e`eL<maN*=RM.34ho(V&d/q$>kf;87:JCuNr0V5B`HHqZ5t6u0u9VR3[%W!<P-og"IpjR>jVptPrpV^BKY$!FIY0UGA!M6R@'Isq.JKbk9=,bl5f5ac)Nl;/4$L`>&qnaY;)_R=,9+h!'-+@OrM;Y(7i^8SYjG0mAqj&5(qagl?--Me)#WI`3YTa`G'\&G+\g=%3990r7pf-(p7oMGFZU>m]^;EMlqs1b#F3i8^kfkN"=-bq*:T^GI-R3Q&H[EjN$0bE-u$\clFWkMAsCBmOSg=Z;^g,C0Tqb"<2>/<J<pXF0TUae_03pr!dp.""7$dK8Gq;nAiMN6teiX,f)HAQ*f(:[U`q)0XUK^o5iq18mX(['Ao(.>)[!85O<>!o'%,Rq5V2)E)jZ.Hft_mgiXX$h,Dk[\jY_VmFW$U=+*0Ar;s[3ff<\8K`I0>$a*`HA-#;5'rGq6>pu;gY.n%G$:kUN0K7"7bq>K)~>endstream
+endobj
+14 0 obj
+<<
+/Filter [ /ASCII85Decode /FlateDecode ] /Length 1895
+>>
+stream
+Gatm<968iG&AII3m%lL1-:We=akY<&c(o2;8Zh^7oDk)Z`IoFHK!_<PqC_Pn,_r`DO0#T8@\<GhJV>NUpn@*4A-;>]$=<]uJML>5!u45>l?@KZ>21`Dc`%aY0oIK61*e\W1!1Z-":BWF+@.P,NIXjIn/G=c$e.b])-"+3'+Bs-9eb]</Dkh48Q08G#'?R1?(E8Wau`PXA`it0X?OPe\b"f*I`=J^MSqigSr>IEi>HNorSc$Dg3V^9*]p9U^jQBr#9grL`^"'b$Z7W%r*ZP+9OC*OQ.neZYtT;+n+sFub7["d0SHp40U8e8$=s5h@.JoT$Q;@I?V0+Z>\:rLDSVQ4Po(pQTrsi1%A/qeD[b^g9pU=<OD;DA.Wq#*H8Yj=`eb$:T>X.:H\V@Tj$%jrc&h-Tph[:ik\>=q58A1TV0KpC'mk\1QpnfICni>3W6p.&mLVjaMA/7NL][j7dnkn*%:"h`WiU=QQ+8\>A)Or"TO&Si[P>a4SZFP@5.#sr,n#*6r>Omq.]j`MVBa<-V$j>f3\(S2AtYnc'(^&\*6AH^fs#a]oqlX9@.AY"2.U3$)[#('A4;q5]#H:=iN.6-I*LVB>GoPSs)h/Mm:2#!NNLB`WFk*3)3Hb)":-&oL9i&n;c?\nW%ht_8AVIPq_9XZ&sD&6$EVX``3ohR?.Yr'7`(3_F:FluM:69`DCf%\[D'hglK9;+Z.fIV9Ht.fT&B\_1jh%mmg:V2\u^(Z2EJ%nY=='#=NNddC`48Gj_oWOd$;E]_*3$lJWWaB!7o#HGldXW2S"+pPLX:*n3S-,@O'Z2V`cK@PTA+Tl=-i@a,2f53ZYjff*2>JQrs_5KLA7L1()HPeW,*uVR:Ou$;5'm8o.^sBp7%VOa*M[?Ud+W;Dps\gF=0D4:"J3&\t)?@f5LK[Y1e`c2^JVN%buA=0@J`dXITp^sX8@DAPT3roQ1Lh0J(omO"7n4Bejma2p&?>/2g\XFomm96%b_ZmfgZB5)]@]*ZAl[&_7hArYL%g=hYck3KI_:$&79FMQc]?+MQY`XOK:EFMX[&uW>H$XW#lcm-`6X,!M+C`CE9?'Um[C-VJq2to9:)EY<*2[FY\INWToEpKT\XR/6$5^3=,5_#?3gMCJ;bjSj']l)9"elQ"Ge[sCBCgebNj)qeIl#+u$\N)%WN+.J(oGK:@4i:5)pB.*KQmaA6b;LQZI<]C#HQk/3Qt2D@E96>Fc8pXm@f\9R:4s5e0(9%^Fo?\RE$Pi:!=tfT<%op>Yu!su&"gO7oFt6h.@.nN/<(m*`<O4jkU5;+KZ49<"BQ`rTaU>[]rA%`3Jc\r(DS)"3TH_,Dk/iLJG1a9r,b)>0BtA6NHlnQp*'ol?nfm+5TQl<D0/WbopjC`b=#8i7Bc;j0Kc&6Q_77q=[t]Jj%efK1NkuBMSmdID&qd]04,gj\SD$WIm5T@CXg8bT5PNjcb0"k\(N."Hd1NT,omSXQ\,C["-s6^Y#Gp'_4D>];5-3>*>-em+H?_::H73e2bsVEY]=:S1:['uWki\+LEYd.iu_pX1JG41rikJ_HJc0bTAA&J+7s]a0mQfedlj$r8sg1=#<:glL-<*E:IFRoL7Vl8"3ci,1ZY0XE@lT8n7"B3%k<$=oc"97>'S8n![LM\/oEdf^C1^$Z6"BKq3[UZTjo'sb1W/@V83>lW8PNIDMHP`+6F5SI/io=49J8Dma7UL,=B=7(@k5K^Wi(*"H`aMS\0HA/PiW*+r[^]hS7=%k:quD6/9WoD_oh;"6r!_Jk7.UF6(E48,(4sj^Uc.8Bt]ZH$ZO`dCoBIT&&b.]CcJLDR4.kob/fc&EB;)UPNmrDPWUK5"oBGRDOkTYBo1JTi;TCeb&>PF`d?U[g5I7bB%l;RrOJpYrO9KpGX!mr!s@!9UP~>endstream
+endobj
+15 0 obj
+<<
+/Filter [ /ASCII85Decode /FlateDecode ] /Length 422
+>>
+stream
+Gas2F9i&Y\%#46H'ttf-P6eUdUra>XO:Xs!lZ!^t>%$\a9H/e;O.1U"9J).UaEaC:G%;8Z/;jJh#2hOpX'5X7a9j&b%:fugPGq>H2<e5T^k!UcM5K3_pdE]OA0oU`0_GWl)0uPb=1&cMikVe#pe11^c_6`IS`LJ0VI^#f/(ZfCYY>HUQ#'k#[,8P:Q\R;+/''&M'VcAdQ5b'pp_a&PBd-=^36T)-m4n'b'B:q&e2Hgom9-IH(%R+CK#Qq_1%'9@)OjgUJ$3n_`lIiHa$??<8>1cQcjs)HUg4UL9egD$!AZY%;BKY::s]\TG55IYQ-pGE<s7^`lqZdJ^71^3:0j,u%J(uUpDj2Qj,*(5rR],XF9IFMJV():>l*0Ios(o)DbIVM=ue<>FgI=eTU)Kqp!#P@%/;gI;[)G&PP)&#~>endstream
+endobj
+16 0 obj
+<<
+/Filter [ /ASCII85Decode /FlateDecode ] /Length 1771
+>>
+stream
+Gau0D968iG&AII3m%k^K'>XeW^,!A]EKWoR2NFoHLUm^oKI+PN+d8-Rm]Z)2KHO/97E)%SQ3gtAhdUf7=HJ,e^U3i%>6;I*_T@-3Pelu--mp"3kO<@M\fXeekqh<h/><]#!MPVtTcB4mOBPp<[04LVm)aSY1t:68j5Wpcc\PMi,1L*^Jp\'gO4f0,8sMWWY>CHuFpGQ/mU!^$)baURr%Ij"AHVZu`-Go]2hT:*_iBk^2Net'.7BG\**;3oD4Cik(BO%GS>^;;&@kc^CT+>_bGli-8M&=<1M=(RiL0rOHk;^ej&..q111U`-Bq5<!06s1F).'lRE\Y2Kj*Xq!U:HCHsJA_H<eB]!NDO2)8l\(EO!#NELpFM35?oc-,/EO]ftt]/]7P.WQ=nJ,D&q^Ga/T/G15(iY`7/1MiYi]21A(fj9E<;TS#2qqb_j#N%ut#@aleP+f-l$BXE<EQQq(o$UP?8c]+%D.29(<HPCXq)^52#,k`3'k8?hHIb51\m=tR!h-S`pe*.":-pULifr\3A4\VD9k4ojt5j.#!%oMJ0ek!"L(NZf90ooK"^Z'>e)SF=j[bJ(mO4PkYWf0kTHldI\F[@$-59b[-c&9_Ic1H9elJ5`]?f`b?ccT]&^rXr1j\F'>Xr`'hZSS77gf9;E9I_Sd^U+>EQYn&5]#="/M@%u_H5tIIDurfZc3G%&Tg)=Jqp_'bS3C?2SI:f61UtFCrDX2/c3FAD5ecB%/:j2A.SiHml7LG&&0ulf6Xd+=B-L)ck7=Mlfpf_,<VCY7HlHp_YMJC'LCp-EO1(u>m?Z;[;Ri_Tc2%(7e)8u$FDK:s[mBO''],SR#)0H5X?gi0'PC'Q/YdmSJo@<k^`1oXBT#QZY]dLQg+Sq<Id&rmGiTDh_LgKcr,J?5L;(!]eRu.&]<^]QI[eMYc>:TpA:aFEB!"#An>XVp7]JbH>qFV`CrpgdB["C?U6n:Xk*gq5p<UK5Qg@[XNZm+.]cFH:+WN7GXZ2_USehm\M_9?3lnH5o5?=ZsSjujD?EkERrQn%POFVVhCAtk"A9p!-<fG/:.1(C'+,JtQUi%1^fUJ3BeoOhI2Q1q7)*Md$GMaI>iC4*Q6/(e7_t;lNGt-&?%!@Pk*ZQ`MW0,M\_kj)e<:g8j`[eHDXOLRkfBP<(OFqaH=%/JZ"RfA)c)Fp*:VGMR#"Jg8MWfedKg#J6G:tT?Nf!'5(2RtTJ"?;m]'_:m>nT'HHhQn"C^9aF3t7h342Ob1,%ERu!AY_"AajuL9G#c1pcMZ53ij+FK>XOQDkq>k\<LVG1#UF'7.%;?U^^oEs/mS^j4E-O;O0)D73l[k-:[<6@.J`53nQY!eDCXk\ahOA_nD`"d5-T%e=5pmcF.<U65"NLs19sSIEU!hCV$CrU`37uB!_He#8V?o8F]Wqj$I-$nu2+@RE].UYGAm$b5tRX8jre:_pRLTW?*m%jcJ,Abq"UV`$d$%rZGkIb!"<os0NON"Nah4WO*^nV^(\3/T50sQ'MeT#R!c()b(JKGa.:kMDu=S4:&;]Q;=`Dn*mA/@ASiJhP=>M79ekOl#->^JSipe'q$Tg93gp9r0iJQ.V2ilUNX=SV,HBn/%q<LhQLLbM4)L5/!8_hI&UtGV-"LD\.>JL-Vb6H^E193L1S.QZM4$&4,X"aLuC7HIRG0BKcuVW$&l'pJ)4t5StiQ0c#D.E]fLKF(V0AhAnCpinoS0;akXVNN3bKl_HTO(rM8usDRC-3U?I\m>ZCfiQn!fMK3eJP%;i`YU]1?Pa8Z_~>endstream
+endobj
+xref
+0 17
+0000000000 65535 f 
+0000000073 00000 n 
+0000000134 00000 n 
+0000000241 00000 n 
+0000000353 00000 n 
+0000000558 00000 n 
+0000000677 00000 n 
+0000000786 00000 n 
+0000000991 00000 n 
+0000001196 00000 n 
+0000001437 00000 n 
+0000001507 00000 n 
+0000001791 00000 n 
+0000001869 00000 n 
+0000002689 00000 n 
+0000004676 00000 n 
+0000005189 00000 n 
+trailer
+<<
+/ID 
+[<77119280bb2df4caecd198cd19373700><77119280bb2df4caecd198cd19373700>]
+% ReportLab generated PDF document -- digest (http://www.reportlab.com)
+
+/Info 11 0 R
+/Root 10 0 R
+/Size 17
+>>
+startxref
+7052
+%%EOF
diff --git a/backend-python/reports/generated/analytics_sales_daily_2025-12-17_02-10-00.pdf b/backend-python/reports/generated/analytics_sales_daily_2025-12-17_02-10-00.pdf
new file mode 100644
index 0000000..a5e047a
--- /dev/null
+++ b/backend-python/reports/generated/analytics_sales_daily_2025-12-17_02-10-00.pdf
@@ -0,0 +1,124 @@
+%PDF-1.4
+%“Œ‹ž ReportLab Generated PDF document http://www.reportlab.com
+1 0 obj
+<<
+/F1 2 0 R /F2 3 0 R /F3 5 0 R /F4 6 0 R
+>>
+endobj
+2 0 obj
+<<
+/BaseFont /Helvetica /Encoding /WinAnsiEncoding /Name /F1 /Subtype /Type1 /Type /Font
+>>
+endobj
+3 0 obj
+<<
+/BaseFont /Helvetica-Bold /Encoding /WinAnsiEncoding /Name /F2 /Subtype /Type1 /Type /Font
+>>
+endobj
+4 0 obj
+<<
+/Contents 12 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 11 0 R /Resources <<
+/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
+>> /Rotate 0 /Trans <<
+
+>> 
+  /Type /Page
+>>
+endobj
+5 0 obj
+<<
+/BaseFont /Helvetica-BoldOblique /Encoding /WinAnsiEncoding /Name /F3 /Subtype /Type1 /Type /Font
+>>
+endobj
+6 0 obj
+<<
+/BaseFont /Times-Roman /Encoding /WinAnsiEncoding /Name /F4 /Subtype /Type1 /Type /Font
+>>
+endobj
+7 0 obj
+<<
+/Contents 13 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 11 0 R /Resources <<
+/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
+>> /Rotate 0 /Trans <<
+
+>> 
+  /Type /Page
+>>
+endobj
+8 0 obj
+<<
+/Contents 14 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 11 0 R /Resources <<
+/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
+>> /Rotate 0 /Trans <<
+
+>> 
+  /Type /Page
+>>
+endobj
+9 0 obj
+<<
+/PageMode /UseNone /Pages 11 0 R /Type /Catalog
+>>
+endobj
+10 0 obj
+<<
+/Author (\(anonymous\)) /CreationDate (D:20251217021000+08'00') /Creator (\(unspecified\)) /Keywords () /ModDate (D:20251217021000+08'00') /Producer (ReportLab PDF Library - www.reportlab.com) 
+  /Subject (\(unspecified\)) /Title (\(anonymous\)) /Trapped /False
+>>
+endobj
+11 0 obj
+<<
+/Count 3 /Kids [ 4 0 R 7 0 R 8 0 R ] /Type /Pages
+>>
+endobj
+12 0 obj
+<<
+/Filter [ /ASCII85Decode /FlateDecode ] /Length 717
+>>
+stream
+GasId9iIQI&A@P9kbC_[PNeYL(iN!q>Wc]\k_4WAFUU@,J0t9m1rut?8h*X@eBF]b]f3,,,i:RFWu]!b!kqn`+@375e3ZNB"W,/CBn[5KP-BrdJ#H%SX"F@\](ln&3!5aQ!k".C#GL^YPQB_KNHNTc=54L&*o(c0SqA%#TJOG6EkGc/E,o/@^:S40Dn$.frrg:C'VAf^N+1?s$cHR&poP="S'9(VAhGZB)$oI`+tGoGr3aJ5JF\9%U4ITm"Hgt#pWVT3/=Y6T<#to/O/_MZ"ioh<"ib)i)=Fi0JA'hB=92.?eTf>On?2mkZh\>m59D.QiGtc8RNu/9n^V\&?9FIYN-:Ed<Jk's6=':.DL(cka(Kl/]<^7IfJ1*p&:(NVm46uhZK^hs?Fq@('q)&C\aRBnqAM8kL"]V%$Rr6&jY,M7VdkjLMnG>1KNQ7:6fZ@Y\*&Waj+KhlIlDN4KN8Erh:0HgJ>Zo#cjZ4KmPrOgh`B_@nq2p>E)C:j<jMU+B@8aN7e4EX+#ph)D+O>hPF\o'?mIsiB`.P!/jo4kX\InHBdABU.JIKG_aiUM4o:N()3?,M7Ts:+P0QlF#/mfD\YluS#][MQbhSp9U^mHcQUT+LO0hnLe<]"&V<ihZmF*r<#Kjk/65&M3d<s0%%<n1NnGW(Y!j4Oj)pVK9lS^p$Wh8u_gk;+0(!>ZE*kPN<G5(5T=N>8*jfnRh_TXeB~>endstream
+endobj
+13 0 obj
+<<
+/Filter [ /ASCII85Decode /FlateDecode ] /Length 2002
+>>
+stream
+Gatm<968iG&AII3lm4G[-:[JOR9SCBR6K%j@SJLu%l=Go9INdc.6HgumfFaXarr(b,AV*5gi":e#BiB;'L0h?:"B;//`=mW$lFc=%5:@!/H1=sMqQpF[7JQ!Nd/Jb:]Y!eNfXdnKPLDkJC$hB('7p%j*sn^c;5kZC/Eh,<H(23Wo2Y^R(rZ=P&6cH)i4)FgXU"96#ghcqp[a@KZ."p]WtRc`m9_m;NjXDB?;hm8.W3lZq"5FR'XYI4L.EgM>O$W#:TbT+s;d&"1oA:IkkS=/Dl&cb3m/eba3=<mFl3TPW<!R+FjtL2e?6`,nr@Yb1-[U(G#R/h_NnN0%9_V1Jeh@1,2V\5[A9n'jT"aG\nQRDUSaJ$C5\>\h;u_H1c30:UhO9C,+ue*UNmV_^Bj,Pfo0X;>@0YH6&?ae+W$&&>A.sqfLm"#;HTP&ETW5];RGVS2l6YV*g7"8k,$I&M29aE.N)%?5.OP6##a]^,9k.PYeOlCg9[(ELa*a:-Q%UfK#in[/Lr]8Qf$C!1F@IlS?bd32t@NYK-k8k^Z&F(jCuQ*W9fgH&)&.h\s;iqdsS6LUK,%Lt@aNb;>&kb[Tb\HFL_%#1mj+"]af:NN;I?0h%7B<>TFL:@a%s7'Ys3,=L_rBCj'fgTiY]NBoAr&unt%0]\/)J0Zpj$'g@J!fnqc`-#q>Hm&@NMWOme9k#DMEFp]12QQU:`N#Qi$%]!+j`9,i=R[?hN:jK]eUc+PgZWOt@_#4u[fbL^QtG4[M^0a[H!Rr`(ap+k$%4PDLPK8=V.krmL"Y*XknI3=7WbTK4b[X(eDgQ$M$Mh\W$D=]&G"s/Zpm!fd[c&LQ-JtQ.it4qYb!?1[JP'&XUPoErZY"%XrZ0OB(t!>6L3_m:Q-kRgj37j4##PN7C=^a?X.dBmlW:2mdbU>>@i#?<@0MYQ/29DhIThkSOH[IN.R4%^"HT59j+P<f=p?I[c:Nn[T-DQ[KUr1^(jdCZ*A^/Fd_]&dq^Wtg2"7dB%*b<H*VMBa4k0/a4G$keiRM!(=*VSJQ9:$FM$e[RQ2P08hhLmB's=<q&V4*_Ykl,HbG@M\9&>Yj3qqs"A<DrYZ6\W0bNgS8,I+?q)AP<SPa.$i;sf4Ya\]MK&]B58pL9iERA3tO9\Z<Gl6B<L!NVmT;+tA8(4[iYhYn@9)S>3N,KQ.??e>R-*REAIl);9-G;tD:eV'=&6sJLhf6(^4`!?(r+%af05MmRN#3qL[O`C/5roG)T_i3e[W,V`rLAu(nq:L.ALk)GPamifEj.9T]V-Fm&1;#Z$+oX7`C>5A>(cb=c+>%BQK.H/qfUJLn;k?!I$ik5kJ7tlHCo;&RDG^E*=r]&diP^u)%gCP[83ND;KtG5pB5n0d!L@,+NQ_)E$J[PPH=;>-2U,DhWM-g:'B2Z"W\]%"AWYO@-k+7gSOC@96]%f@]rM?e(<j<A8,pVT=R?e4B1#/1rT#-YU;B=gt"e#4i>?>bRfXLo$>)GD#($fA_5ab'gM3[#7]"*E6PC')\!&l2\EQL\qiLR%XrJA9MG2R!HqE'A=j:,_$*U*E++<"Wq9/U:RL\Em4i_f2bCFOp&lEO&0C=+1n9"PR6Qp(8c1FCIPmOc0h+JFnqQ&*VXo]O7hZfKr7u*SRP^$c:RY[SaMAiV;!5N=Au4d[;BM(n-q-h1Po\\]O6#!E*o3qoJ9.dQ'<@`ZM%_emaW_/(:cK`S.r3X1@5aRkZV)rtUlR2YLfS!_.`g6`n?dNF-dD%h\[,#?8MJ:X'HVTGVC]DBM[=/]6!-34[s.XkHkn[QE7MUo]g.dQ4?i?`:nJ6dS;/Lf,sa,q"+MA]9Y"a<Y</ffIQ9;-j4,*P7=ja>QRdE$mCa+AR_Lh,"o<lq>rPi:mUa@uL.[;W9%F&6->7t\W(!Lce<(&<7%3<^N*<$(hsob.<O;iX`cSnT.^&VhW.4ek4S?3*@TX&98WSD&G&3,S-H^4BlkZ1R/(MSh%@u=lPO5=2U?RE!DUFW:_M$VB,$0Z?~>endstream
+endobj
+14 0 obj
+<<
+/Filter [ /ASCII85Decode /FlateDecode ] /Length 287
+>>
+stream
+Garo<5u.P:&;BTO(%3OtPYUIdgS60e3(W7qb@\6AP%>#<ebJU8BLkfR0:>Mr]ubX>Jgd@/D,7sa@C@AAK\M+n=)_q+*P4$%8SZATQ'P75Nf5Q*D"FPh\%En?rs*(W$X=NMA@4,L9%BZAi0>\m69MIR75msNGIfPuDo=:oD7Q$,@uBY7ghiOsVpu@8Z0ns=:.gMdmF)]o0cYV2Z(nnM_eTb2K-,MXZL?/!c1$km2Bhp<L`-($1&.X;0tm5BicjV,2kP,HM,3&iE;,b!5$^@[.0BALh"F\_~>endstream
+endobj
+xref
+0 15
+0000000000 65535 f 
+0000000073 00000 n 
+0000000134 00000 n 
+0000000241 00000 n 
+0000000353 00000 n 
+0000000558 00000 n 
+0000000677 00000 n 
+0000000786 00000 n 
+0000000991 00000 n 
+0000001196 00000 n 
+0000001265 00000 n 
+0000001549 00000 n 
+0000001621 00000 n 
+0000002429 00000 n 
+0000004523 00000 n 
+trailer
+<<
+/ID 
+[<b33649e0c8ab47fa321eb31a67c52e3a><b33649e0c8ab47fa321eb31a67c52e3a>]
+% ReportLab generated PDF document -- digest (http://www.reportlab.com)
+
+/Info 10 0 R
+/Root 9 0 R
+/Size 15
+>>
+startxref
+4901
+%%EOF
diff --git a/backend-python/src/api/dependencies.py b/backend-python/src/api/dependencies.py
index d15a95e..9220171 100644
--- a/backend-python/src/api/dependencies.py
+++ b/backend-python/src/api/dependencies.py
@@ -1,33 +1,61 @@
 # src/api/dependencies.py
 
-from fastapi import Header, HTTPException
+from __future__ import annotations
+
+from fastapi import Header, HTTPException, Depends
+from fastapi.security import HTTPBearer, HTTPAuthorizationCredentials
 from typing import Dict, Any, List, Optional
+
 from src.api.settings import DEV_MODE
 
-# Only import validator in PROD
+# Import du validateur Java JWT uniquement en PROD
 if not DEV_MODE:
     from src.integration.jwt_validator import jwt_validator
 
 
+# =========================================================
+# ðŸ” DÃ‰PENDANCE SWAGGER (VISUELLE UNIQUEMENT)
+# =========================================================
+# Sert Ã  afficher le cadenas ðŸ”’ et le bouton "Authorize"
+# NE FAIT AUCUNE VALIDATION
+swagger_bearer = HTTPBearer(auto_error=False)
+
+
+async def swagger_auth(
+    credentials: HTTPAuthorizationCredentials = Depends(swagger_bearer),
+):
+    """
+    DÃ©pendance utilisÃ©e UNIQUEMENT par Swagger / OpenAPI.
+
+    - Permet l'affichage du ðŸ”’
+    - Active le bouton Authorize
+    - N'effectue aucune validation
+    """
+    return credentials
+
+
+# =========================================================
+# ðŸ” AUTH RÃ‰ELLE â€” JWT JAVA UNIFIÃ‰
+# =========================================================
 def get_current_user(
-    authorization: str = Header(None),
-    required_roles: Optional[List[str]] = None
+    authorization: Optional[str] = Header(None),
+    required_roles: Optional[List[str]] = None,
 ) -> Dict[str, Any]:
     """
     DEV_MODE = True:
-        - No token required
-        - Always returns a fake user
-        - Used for frontend development without Java backend
-    
+        - Aucun token requis
+        - Retourne toujours un utilisateur factice
+        - Permet le dev frontend sans backend Java
+
     DEV_MODE = False:
-        - Require Authorization: Bearer <token>
-        - Validate Java JWT
-        - Forward token to Java API
-        - Check permissions
+        - Header Authorization requis (Bearer <token>)
+        - Validation du JWT Java
+        - Forward du token vers les clients Java
+        - VÃ©rification des rÃ´les
     """
 
     # ---------------------------------------------------------
-    # DEV MODE â†’ BYPASS JWT and RETURN FAKE USER
+    # DEV MODE â†’ BYPASS JWT
     # ---------------------------------------------------------
     if DEV_MODE:
         return {
@@ -35,37 +63,43 @@ def get_current_user(
             "username": "dev",
             "roles": ["admin"],
             "token": "dev-token",
-            "mode": "DEV"
+            "mode": "DEV",
         }
 
     # ---------------------------------------------------------
-    # PROD MODE â†’ JWT REQUIRED
+    # PROD MODE â†’ JWT REQUIS
     # ---------------------------------------------------------
     if not authorization:
-        raise HTTPException(401, "Missing Authorization header")
+        raise HTTPException(status_code=401, detail="Missing Authorization header")
 
     if not authorization.startswith("Bearer "):
-        raise HTTPException(401, "Invalid Authorization header format")
+        raise HTTPException(
+            status_code=401,
+            detail="Invalid Authorization header format (expected Bearer token)",
+        )
 
-    # Extract raw token
+    # Extraction du token brut
     token = authorization.replace("Bearer ", "").strip()
 
-    # Validate token via JavaJWTValidator
+    # Validation via Java JWT Validator
     payload = jwt_validator.validate(token)
 
-    user = {
+    user: Dict[str, Any] = {
         "user_id": payload.get("sub"),
         "username": payload.get("username"),
         "roles": payload.get("roles", []),
         "token": token,
-        "mode": "PROD"
+        "mode": "PROD",
     }
 
     # ---------------------------------------------------------
-    # Role checking
+    # VÃ©rification des rÃ´les (si requis)
     # ---------------------------------------------------------
     if required_roles:
         if not any(role in user["roles"] for role in required_roles):
-            raise HTTPException(403, "Insufficient permissions")
+            raise HTTPException(
+                status_code=403,
+                detail="Insufficient permissions",
+            )
 
     return user
diff --git a/backend-python/src/api/main.py b/backend-python/src/api/main.py
index 80f4277..b64bf31 100644
--- a/backend-python/src/api/main.py
+++ b/backend-python/src/api/main.py
@@ -13,15 +13,15 @@ from src.api.routes.health import router as health_router
 from src.api.routes.analytics import router as analytics_router
 from src.api.routes.excel import router as excel_router
 from src.api.routes.ml import router as ml_router
-from src.api.routes.reports import router as reports_router   # <-- NEW
+from src.api.routes.reports import router as reports_router
 
 # Scheduler
-from src.scheduler.tasks import start_scheduler               # <-- NEW
+from src.scheduler.tasks import get_scheduler
 
 # Exception handlers
 from src.utils.exceptions import (
     http_exception_handler,
-    generic_exception_handler
+    generic_exception_handler,
 )
 
 # Load .env
@@ -34,7 +34,10 @@ load_dotenv()
 app = FastAPI(
     title="SalesFlow API",
     version="0.2.0",
-    description="Analytics / ML / Reports microservice for SalesFlow with unified Java JWT validation."
+    description=(
+        "Analytics / ML / Reports microservice for SalesFlow "
+        "with unified Java JWT validation."
+    ),
 )
 
 
@@ -44,10 +47,12 @@ app = FastAPI(
 app.add_middleware(
     CORSMiddleware,
     allow_origins=[
-        "http://127.0.0.1:5174",  # React Vite Dev
-        "http://127.0.0.1:4173",  # React Vite Preview
-        "http://localhost:8080",  # Spring Boot
-        "http://localhost:8081",  # FastAPI
+        "http://127.0.0.1:5174",   # React Vite Dev
+        "http://127.0.0.1:4173",   # React Vite Preview
+        "http://localhost:8080",   # Spring Boot
+        "http://localhost:8081",   # FastAPI
+        "http://10.131.221.179:8080/api/v1" # Spring boot network url 
+
     ],
     allow_credentials=True,
     allow_methods=["*"],
@@ -63,12 +68,15 @@ async def startup_event():
     logging.basicConfig(level=logging.INFO)
 
     logging.info("ðŸš€ FastAPI (Analytics / ML / Reports) started")
-    logging.info(f"JAVA_JWT_SECRET loaded: {bool(os.getenv('JAVA_JWT_SECRET'))}")
+    logging.info(
+        "JAVA_JWT_SECRET loaded: %s",
+        bool(os.getenv("JAVA_JWT_SECRET")),
+    )
 
-    # Start scheduler (if enabled)
+    # Start scheduler (optional)
     if os.getenv("ENABLE_SCHEDULER", "true").lower() == "true":
         logging.info("â° Scheduler enabled: starting background jobsâ€¦")
-        start_scheduler()
+        get_scheduler()
     else:
         logging.info("â¹ Scheduler disabled")
 
@@ -80,7 +88,7 @@ app.include_router(health_router)
 app.include_router(analytics_router)
 app.include_router(excel_router)
 app.include_router(ml_router)
-app.include_router(reports_router)      # <-- NEW
+app.include_router(reports_router)
 
 
 # ---------------------------------------------------------
@@ -109,23 +117,25 @@ def custom_openapi():
         routes=app.routes,
     )
 
-    # ðŸ” Add BearerAuth
-    openapi_schema["components"]["securitySchemes"] = {
-        "BearerAuth": {
-            "type": "http",
-            "scheme": "bearer",
-            "bearerFormat": "JWT"
-        }
+    # ðŸ” BearerAuth
+    openapi_schema.setdefault("components", {}).setdefault(
+        "securitySchemes",
+        {}
+    )["BearerAuth"] = {
+        "type": "http",
+        "scheme": "bearer",
+        "bearerFormat": "JWT",
     }
 
     # ðŸ” Apply security to all endpoints except /health
     for path, methods in openapi_schema.get("paths", {}).items():
-        for method, details in methods.items():
-            if "/health" not in path:
-                details.setdefault("security", [{"BearerAuth": []}])
+        if "/health" in path:
+            continue
+        for _, details in methods.items():
+            details.setdefault("security", [{"BearerAuth": []}])
 
     app.openapi_schema = openapi_schema
     return app.openapi_schema
 
 
-
+app.openapi = custom_openapi
diff --git a/backend-python/src/api/routes/analytics.py b/backend-python/src/api/routes/analytics.py
index 86b1c97..1cf78d4 100644
--- a/backend-python/src/api/routes/analytics.py
+++ b/backend-python/src/api/routes/analytics.py
@@ -1,25 +1,31 @@
-# src/api/routes/analytics.py
-
 from __future__ import annotations
 
-from fastapi import APIRouter, Depends, HTTPException
 from typing import Any, Optional
+from datetime import date
+
+from fastapi import APIRouter, Depends, HTTPException
 
-from src.api.dependencies import get_current_user
-from src.models.dto.analytics_dto import AnalyticsPeriod
+from src.api.dependencies import get_current_user, swagger_auth
+from src.models.dto.analytics_dto import (
+    AnalyticsPeriod,
+    StockAnalyticsResponse,
+    SalesAnalyticsResponse,
+)
 from src.services.analytics_service import (
     compute_stock_analytics,
     compute_sales_analytics,
 )
 
+
 router = APIRouter(
     prefix="/api/v1/analytics",
     tags=["Analytics"],
+    dependencies=[Depends(swagger_auth)],  # ðŸ”’ Swagger lock
 )
 
 
 # -----------------------------------------------------------
-# TOKEN EXTRACTOR â€” version stable et unifiÃ©e
+# TOKEN EXTRACTOR â€” version unifiÃ©e
 # -----------------------------------------------------------
 def _extract_token(current_user: Any) -> Optional[str]:
     """
@@ -28,7 +34,7 @@ def _extract_token(current_user: Any) -> Optional[str]:
         "token": "...",
         "access_token": "...",
         "raw_token": "...",
-        ...
+        "jwt": "..."
     }
     """
     if isinstance(current_user, dict):
@@ -41,10 +47,25 @@ def _extract_token(current_user: Any) -> Optional[str]:
     return None
 
 
+def _parse_date(value: Optional[str]) -> Optional[date]:
+    if not value:
+        return None
+    try:
+        return date.fromisoformat(value)
+    except ValueError:
+        raise HTTPException(
+            status_code=400,
+            detail=f"Invalid date format (expected YYYY-MM-DD): {value}",
+        )
+
+
 # -----------------------------------------------------------
-# STOCK ANALYTICS
+# STOCK ANALYTICS (GLOBAL)
 # -----------------------------------------------------------
-@router.get("/stock")
+@router.get(
+    "/stock",
+    response_model=StockAnalyticsResponse,
+)
 async def stock_analytics(
     period: AnalyticsPeriod = AnalyticsPeriod.daily,
     current_user=Depends(get_current_user),
@@ -60,18 +81,28 @@ async def stock_analytics(
 
 
 # -----------------------------------------------------------
-# SALES ANALYTICS
+# SALES ANALYTICS (GLOBAL)
 # -----------------------------------------------------------
-@router.get("/sales")
+@router.get(
+    "/sales",
+    response_model=SalesAnalyticsResponse,
+)
 async def sales_analytics(
     period: AnalyticsPeriod = AnalyticsPeriod.daily,
+    start_date: Optional[str] = None,
+    end_date: Optional[str] = None,
     current_user=Depends(get_current_user),
 ):
     token = _extract_token(current_user)
     if not token:
         raise HTTPException(status_code=401, detail="Missing authentication token")
 
+    start = _parse_date(start_date)
+    end = _parse_date(end_date)
+
     return await compute_sales_analytics(
         period=period,
+        start_date=start,
+        end_date=end,
         token=token,
     )
diff --git a/backend-python/src/api/routes/excel.py b/backend-python/src/api/routes/excel.py
index c16d78d..7d37463 100644
--- a/backend-python/src/api/routes/excel.py
+++ b/backend-python/src/api/routes/excel.py
@@ -1,50 +1,102 @@
-# src/api/routes/excel.py
+from __future__ import annotations
+
+from typing import Any, Optional
+
+from fastapi import APIRouter, UploadFile, Depends, HTTPException
+
+from src.api.dependencies import get_current_user, swagger_auth
+from src.data.file_processor import process_sales_upload_to_canonical
+from src.clients.java_sales_client import JavaSalesClient
 
-from fastapi import APIRouter, UploadFile, File, Depends, HTTPException
-from src.data.file_processor import process_file
-from src.api.dependencies import get_current_user
 
 router = APIRouter(
     prefix="/api/v1/excel",
-    tags=["Excel Import"]
+    tags=["Excel Import"],
+    dependencies=[Depends(swagger_auth)],
 )
 
 
-@router.post("/upload")
-async def upload_excel_file(
-    upload_file: UploadFile = File(...),
-    user: dict = Depends(get_current_user)
+# -----------------------------------------------------------
+# TOKEN EXTRACTOR â€” EXACTEMENT COMME ml.py
+# -----------------------------------------------------------
+def _extract_token(current_user: Any) -> Optional[str]:
+    if isinstance(current_user, dict):
+        return (
+            current_user.get("token")
+            or current_user.get("access_token")
+            or current_user.get("raw_token")
+            or current_user.get("jwt")
+        )
+    return None
+
+
+# -----------------------------------------------------------
+# IMPORT SALES â€” EXCEL / CSV â†’ CANONICAL â†’ JAVA
+# -----------------------------------------------------------
+@router.post("/import-sales")
+async def import_sales(
+    file: UploadFile,
+    current_user=Depends(get_current_user),
 ):
     """
-    Upload and process an Excel/CSV file.
-    Protected by unified JWT authentication.
-    Returns preview, column types, and validation details.
+    Import sales from Excel / CSV.
+
+    Pipeline:
+    Excel â†’ validate + canonicalize â†’ Java /sales/bulk
     """
 
-    try:
-        # File type validation
-        if not (
-            upload_file.filename.lower().endswith(".csv")
-            or upload_file.filename.lower().endswith(".xlsx")
-            or upload_file.filename.lower().endswith(".xls")
-        ):
-            raise HTTPException(
-                status_code=400,
-                detail="Unsupported file format. Only .csv and .xlsx/.xls are allowed."
-            )
-
-        # Call processor
-        from src.models.excel_schemas import REQUIRED_SALES_SCHEMA
-        result = process_file(upload_file, REQUIRED_SALES_SCHEMA)
-        return result
-
-    except HTTPException as e:
-        # Relay explicit validation / file errors
-        raise e
-
-    except Exception as e:
-        # Safety net: prevent router from crashing
+    # --------------------------------------------------
+    # 1. Extract token (AUTH)
+    # --------------------------------------------------
+    token = _extract_token(current_user)
+    if not token:
+        raise HTTPException(
+            status_code=401,
+            detail="Missing authentication token",
+        )
+
+    # --------------------------------------------------
+    # 2. Parse + validate + canonicalize Excel
+    # --------------------------------------------------
+    result = await process_sales_upload_to_canonical(
+        file=file,
+        token=token,
+    )
+
+    if result["errors"]:
+        return {
+            "status": "failed",
+            "errors": result["errors"],
+            "total_rows": result["total_rows"],
+            "valid_rows": result["valid_rows"],
+        }
+
+    if not result["items"]:
         raise HTTPException(
-            status_code=500,
-            detail=f"Unexpected error during file processing: {str(e)}"
+            status_code=400,
+            detail="No valid sales found in uploaded file",
         )
+
+    # --------------------------------------------------
+    # 3. Send canonical payload to Java (/sales/bulk)
+    # --------------------------------------------------
+    sales_client = JavaSalesClient(token)
+
+    try:
+        # âœ… FIX ICI : appel POSITIONNEL (pas items=)
+        java_response = await sales_client.create_bulk_sales(
+            result["items"]
+        )
+    finally:
+        await sales_client.close()
+
+    # --------------------------------------------------
+    # 4. Final response
+    # --------------------------------------------------
+    return {
+        "status": "success",
+        "total_rows": result["total_rows"],
+        "valid_rows": result["valid_rows"],
+        "imported": len(result["items"]),
+        "java_response": java_response,
+    }
diff --git a/backend-python/src/api/routes/ml.py b/backend-python/src/api/routes/ml.py
index 6ec810a..9908deb 100644
--- a/backend-python/src/api/routes/ml.py
+++ b/backend-python/src/api/routes/ml.py
@@ -1,21 +1,35 @@
+# src/api/routes/ml.py
 from __future__ import annotations
 
-from fastapi import APIRouter, Depends, HTTPException
 from typing import Any, Optional
 
-from src.api.dependencies import get_current_user
+from fastapi import APIRouter, Depends, HTTPException
+
+from src.api.dependencies import get_current_user, swagger_auth
+from src.clients.java_products_client import JavaProductsClient
+
 from src.services.ml_service import forecast_sales, detect_anomalies
+from src.services.ml_enrichment_service import enrich_ml_result
 
-from src.models.ml_schemas import (
+from src.models.dto.forecast_dto import (
     ForecastRequest,
     ForecastResult,
+    ForecastScope,
     AnomalyRequest,
     AnomalyResponse,
 )
 
-router = APIRouter(prefix="/api/v1/ml", tags=["Machine Learning"])
+
+router = APIRouter(
+    prefix="/api/v1/ml",
+    tags=["Machine Learning"],
+    dependencies=[Depends(swagger_auth)],
+)
 
 
+# -----------------------------------------------------------
+# TOKEN EXTRACTOR â€” unifiÃ©
+# -----------------------------------------------------------
 def _extract_token(current_user: Any) -> Optional[str]:
     if isinstance(current_user, dict):
         return (
@@ -28,7 +42,7 @@ def _extract_token(current_user: Any) -> Optional[str]:
 
 
 # -----------------------------------------------------------
-# FORECAST ENDPOINT
+# FORECAST ENDPOINT â€” Support SKU ou NAME
 # -----------------------------------------------------------
 @router.post("/forecast", response_model=ForecastResult)
 async def forecast_endpoint(
@@ -36,27 +50,62 @@ async def forecast_endpoint(
     current_user=Depends(get_current_user),
 ):
     token = _extract_token(current_user)
-    print("=== RAW PAYLOAD RECEIVED BY BACKEND ===")
-    print(payload)
-    print("=======================================")
-    try:
-        data = await forecast_sales(
-            product_id=payload.product_id,      # NOW SUPPORTS GLOBAL
-            history_days=payload.history_days,
-            forecast_days=payload.forecast_days,
-            period=payload.period,
-            token=token,
-        )
-        return data
+    if not token:
+        raise HTTPException(status_code=401, detail="Missing authentication token")
+
+    product = None
+    resolved_sku: Optional[str] = None
+
+    if payload.scope == ForecastScope.PRODUCT:
+        # Cas 1 : SKU fourni directement
+        if payload.sku:
+            resolved_sku = payload.sku.strip()
+
+        # Cas 2 : NAME fourni â†’ rÃ©solution via API Products
+        elif payload.name:
+            prod_client = JavaProductsClient(token)
+            try:
+                product = await prod_client.get_product_by_name(payload.name.strip())
+                resolved_sku = product.sku
+            finally:
+                await prod_client.close()
 
-    except HTTPException:
-        raise
-    except Exception as e:
-        raise HTTPException(500, f"Forecasting failed: {str(e)}")
+        # Si ni l'un ni l'autre â†’ dÃ©jÃ  bloquÃ© par DTO validator
+
+        # Enrichissement UI avec le produit rÃ©cupÃ©rÃ© (si via name)
+        if product is None and payload.product_id:
+            # Optionnel : fallback sur ID si fourni
+            prod_client = JavaProductsClient(token)
+            try:
+                product = await prod_client.get_product_by_id(payload.product_id)
+                resolved_sku = product.sku
+            except Exception:
+                pass  # On garde le SKU dÃ©jÃ  rÃ©solu
+            finally:
+                await prod_client.close()
+
+    # Appel au service ML avec le SKU rÃ©solu
+    ml_result = await forecast_sales(
+        scope=payload.scope,
+        product_sku=resolved_sku,
+        product_name=payload.name if not payload.sku else None,  # pour cache si besoin
+        forecast_days=payload.forecast_days,
+        period=payload.period,
+        token=token,
+    )
+
+    # Conservation de l'ID si fourni
+    ml_result["product_id"] = payload.product_id
+
+    # Enrichissement final pour le frontend (nom, sku, etc.)
+    return enrich_ml_result(
+        result=ml_result,
+        product=product,
+    )
 
 
 # -----------------------------------------------------------
-# ANOMALIES ENDPOINT
+# ANOMALIES ENDPOINT â€” Support SKU ou NAME
 # -----------------------------------------------------------
 @router.post("/anomalies", response_model=AnomalyResponse)
 async def anomalies_endpoint(
@@ -64,17 +113,48 @@ async def anomalies_endpoint(
     current_user=Depends(get_current_user),
 ):
     token = _extract_token(current_user)
+    if not token:
+        raise HTTPException(status_code=401, detail="Missing authentication token")
 
-    try:
-        data = await detect_anomalies(
-            product_id=payload.product_id,      # GLOBAL OR PRODUCT
-            history_days=payload.history_days,
-            period=payload.period,
-            token=token,
-        )
-        return data
+    product = None
+    resolved_sku: Optional[str] = None
+
+    if payload.scope == ForecastScope.PRODUCT:
+        if payload.sku:
+            resolved_sku = payload.sku.strip()
+
+        elif payload.name:
+            prod_client = JavaProductsClient(token)
+            try:
+                product = await prod_client.get_product_by_name(payload.name.strip())
+                resolved_sku = product.sku
+            finally:
+                await prod_client.close()
+
+        if payload.product_id and product is None:
+            prod_client = JavaProductsClient(token)
+            try:
+                product = await prod_client.get_product_by_id(payload.product_id)
+                resolved_sku = product.sku
+            except Exception:
+                pass
+            finally:
+                await prod_client.close()
+
+    result = await detect_anomalies(
+        scope=payload.scope,
+        product_sku=resolved_sku,
+        product_name=payload.name if not payload.sku else None,
+        period=payload.period,
+        token=token,
+    )
+
+    result["product_id"] = payload.product_id
+
+    # Enrichissement UI
+    enriched = enrich_ml_result(
+        result=result,
+        product=product,
+    )
 
-    except HTTPException:
-        raise
-    except Exception as e:
-        raise HTTPException(500, f"Anomaly detection failed: {str(e)}")
+    return enriched
\ No newline at end of file
diff --git a/backend-python/src/api/routes/reports.py b/backend-python/src/api/routes/reports.py
index 6a29077..865b3b4 100644
--- a/backend-python/src/api/routes/reports.py
+++ b/backend-python/src/api/routes/reports.py
@@ -2,22 +2,34 @@
 from __future__ import annotations
 
 import io
+import os
+import asyncio
+import logging
 from typing import Literal, Optional
 
 from fastapi import APIRouter, Depends, HTTPException
 from fastapi.responses import StreamingResponse
 from pydantic import BaseModel
 
-from src.api.dependencies import get_current_user
+from src.api.dependencies import get_current_user, swagger_auth
 from src.models.dto.analytics_dto import AnalyticsPeriod
-from src.services.report_service import generate_report
+from src.services.report_service import generate_report,get_latest_report, find_last_report_on_disk
+from src.scheduler.tasks import get_scheduler
 
+logger = logging.getLogger(__name__)
+
+# -----------------------------------------------------------
+# ROUTER CONFIG
+# -----------------------------------------------------------
 router = APIRouter(
     prefix="/api/v1/reports",
     tags=["Reports"],
+    dependencies=[Depends(swagger_auth)],
 )
 
-
+# -----------------------------------------------------------
+# TYPES & PAYLOADS
+# -----------------------------------------------------------
 ReportFormat = Literal["pdf", "excel"]
 ReportType = Literal["sales", "stock", "combined"]
 
@@ -28,16 +40,34 @@ class ReportRequestPayload(BaseModel):
     period: AnalyticsPeriod = AnalyticsPeriod.monthly
 
 
+class ScheduleReportPayload(BaseModel):
+    mode: Literal["schedule", "download"]
+
+    # requis pour schedule
+    report_type: Optional[ReportType] = None
+    format: Optional[ReportFormat] = None
+    hour: Optional[int] = None
+    minute: Optional[int] = None
+
+
+# -----------------------------------------------------------
+# TOKEN EXTRACTOR
+# -----------------------------------------------------------
 def _extract_token(current_user: dict) -> Optional[str]:
-    if not current_user:
+    if not isinstance(current_user, dict):
         return None
+
     return (
         current_user.get("token")
         or current_user.get("access_token")
         or current_user.get("raw_token")
+        or current_user.get("jwt")
     )
 
 
+# -----------------------------------------------------------
+# GENERATE REPORT (MANUAL â€” inchangÃ©)
+# -----------------------------------------------------------
 @router.post("/generate")
 async def generate_report_endpoint(
     payload: ReportRequestPayload,
@@ -45,19 +75,180 @@ async def generate_report_endpoint(
 ):
     token = _extract_token(current_user)
     if not token:
-        raise HTTPException(401, "Missing JWT token for report generation")
+        raise HTTPException(
+            status_code=401,
+            detail="Missing authentication token for report generation",
+        )
+
+    try:
+        content, filename, media_type = await generate_report(
+            report_type=payload.report_type,
+            fmt=payload.format,
+            period=payload.period,
+            token=token,
+        )
+
+        return StreamingResponse(
+            io.BytesIO(content),
+            media_type=media_type,
+            headers={
+                "Content-Disposition": f'attachment; filename="{filename}"'
+            },
+        )
+
+    except Exception as e:
+        logger.exception("Report generation failed")
+        raise HTTPException(
+            status_code=500,
+            detail=f"Report generation failed: {str(e)}",
+        )
+
+
+# -----------------------------------------------------------
+# SCHEDULE REPORT (AUTOMATIC + SAVE TO DISK)
+# -----------------------------------------------------------
+@router.post("/schedule")
+async def schedule_report(
+    payload: ScheduleReportPayload,
+    current_user=Depends(get_current_user),
+):
+    # ðŸ” Auth unifiÃ©e
+    user_token = _extract_token(current_user)
+    if not user_token:
+        raise HTTPException(status_code=401, detail="Unauthorized")
+
+    # ======================================================
+    # MODE 1 â€” DOWNLOAD LATEST REPORT
+    # ======================================================
+    if payload.mode == "download":
+        if not payload.report_type or not payload.format:
+            raise HTTPException(
+                status_code=400,
+                detail="report_type and format required for download",
+            )
+
+        try:
+            file_path = get_latest_report(
+                report_type=payload.report_type,
+                fmt=payload.format,
+            )
+        except FileNotFoundError:
+            raise HTTPException(
+                status_code=404,
+                detail="No scheduled report available",
+            )
+
+        media_type = (
+            "application/pdf"
+            if payload.format == "pdf"
+            else "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
+        )
+
+        return StreamingResponse(
+            file_path.open("rb"),
+            media_type=media_type,
+            headers={
+                "Content-Disposition": f'attachment; filename="{file_path.name}"'
+            },
+        )
+
+    # ======================================================
+    # MODE 2 â€” SCHEDULE REPORT
+    # ======================================================
+    if payload.mode == "schedule":
+        if (
+            not payload.report_type
+            or not payload.format
+            or payload.hour is None
+            or payload.minute is None
+        ):
+            raise HTTPException(
+                status_code=400,
+                detail="Missing scheduling fields",
+            )
 
-    content, filename, media_type = await generate_report(
-        report_type=payload.report_type,
-        fmt=payload.format,
-        period=payload.period,
-        token=token,
+        scheduler = get_scheduler()
+
+        system_token = os.getenv("SYSTEM_JWT_TOKEN")
+        if not system_token:
+            raise HTTPException(
+                status_code=500,
+                detail="SYSTEM_JWT_TOKEN not configured",
+            )
+
+        job_id = f"scheduled-{payload.report_type}-{payload.format}"
+
+        async def run_job():
+            logger.warning(
+                "ðŸ•’ SCHEDULED REPORT EXECUTING | %s %s",
+                payload.report_type,
+                payload.format,
+            )
+
+            await generate_report(
+                report_type=payload.report_type,
+                fmt=payload.format,
+                period=AnalyticsPeriod.daily,
+                token=system_token,
+                save_to_disk=True,
+            )
+
+        def job_wrapper():
+            asyncio.run(run_job())
+
+        scheduler.add_job(
+            job_wrapper,
+            trigger="cron",
+            hour=payload.hour,
+            minute=payload.minute,
+            id=job_id,
+            replace_existing=True,
+        )
+
+        return {
+            "status": "scheduled",
+            "job_id": job_id,
+            "hour": payload.hour,
+            "minute": payload.minute,
+            "storage": "disk",
+        }
+
+    # ======================================================
+    # UNKNOWN MODE
+    # ======================================================
+    raise HTTPException(status_code=400, detail="Invalid mode")
+@router.get("/scheduled/latest")
+async def download_last_scheduled_report(
+    report_type: ReportType,
+    format: ReportFormat,
+    current_user=Depends(get_current_user),
+):
+    # ðŸ” Auth unifiÃ©e
+    token = _extract_token(current_user)
+    if not token:
+        raise HTTPException(status_code=401, detail="Unauthorized")
+
+    file_path = find_last_report_on_disk(
+        report_type=report_type,
+        fmt=format,
+    )
+
+    if not file_path:
+        raise HTTPException(
+            status_code=404,
+            detail="No scheduled report available yet",
+        )
+
+    media_type = (
+        "application/pdf"
+        if format == "pdf"
+        else "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
     )
 
     return StreamingResponse(
-        io.BytesIO(content),
+        open(file_path, "rb"),
         media_type=media_type,
         headers={
-            "Content-Disposition": f'attachment; filename="{filename}"'
+            "Content-Disposition": f'attachment; filename="{file_path.name}"'
         },
-    )
+    )
\ No newline at end of file
diff --git a/backend-python/src/clients/java_inventory_client.py b/backend-python/src/clients/java_inventory_client.py
index 1fadb5a..b75d445 100644
--- a/backend-python/src/clients/java_inventory_client.py
+++ b/backend-python/src/clients/java_inventory_client.py
@@ -1,18 +1,21 @@
-# src/clients/java_inventory_client.py
 from __future__ import annotations
 
 import os
 import logging
-from typing import Any, Dict, List, Optional
+from typing import Any, List, Optional
 
 import httpx
 from fastapi import HTTPException
 
 from src.api.settings import DEV_MODE
-from src.mock.mock_inventory import MOCK_INVENTORY
 from src.models.dto.java_raw_dto import JavaInventoryItemDto
+from src.mock.mock_inventory_stock import MOCK_INVENTORY
+
+JAVA_API_URL = os.getenv(
+    "JAVA_API_URL",
+    "http://10.131.221.179:8080/api/v1"
+).rstrip("/")
 
-JAVA_API_URL = os.getenv("JAVA_API_URL", "http://localhost:8080/api/v1").rstrip("/")
 logger = logging.getLogger(__name__)
 
 
@@ -20,85 +23,79 @@ class JavaInventoryClient:
     """
     Client alignÃ© sur InventoryController Java.
 
-    Endpoints :
-      - GET /inventory
-      - GET /inventory/{id}
+    Endpoints exposÃ©s :
+    - GET /inventory
+    - GET /inventory/by-sku/{sku}
+    - GET /inventory/by-name/{name}
     """
 
     def __init__(self, token: Optional[str] = None):
         self.token = token
         self.client = httpx.AsyncClient(timeout=10.0)
 
-    # ------------------------------------------------------
-    # Helpers internes
-    # ------------------------------------------------------
-    def _headers(self) -> Dict[str, str]:
+    # --------------------------------------------------
+    # Helpers
+    # --------------------------------------------------
+    def _headers(self) -> dict:
         return {"Authorization": f"Bearer {self.token}"} if self.token else {}
 
-    async def _get(self, endpoint: str) -> Any:
+    def _normalize(self, raw: Any) -> List[dict]:
+        if isinstance(raw, list):
+            return raw
+        if isinstance(raw, dict):
+            for key in ("data", "content", "items", "result"):
+                if key in raw and isinstance(raw[key], list):
+                    return raw[key]
+            return [raw]
+        return []
+
+    async def _get(self, endpoint: str):
         url = f"{JAVA_API_URL}{endpoint}"
         logger.info(f"[JavaInventoryClient] GET {url} (DEV_MODE={DEV_MODE})")
 
         if DEV_MODE:
-            return self._mock(endpoint)
+            return MOCK_INVENTORY
 
         try:
             resp = await self.client.get(url, headers=self._headers())
+            resp.raise_for_status()
+            return resp.json()
         except Exception as e:
-            raise HTTPException(502, f"Cannot reach Java Inventory API: {str(e)}")
-
-        if resp.status_code != 200:
+            logger.exception("Java Inventory API error")
             raise HTTPException(
-                502,
-                f"Java Inventory API error {resp.status_code}: {resp.text}"
+                status_code=502,
+                detail=f"Java Inventory API error: {str(e)}",
             )
 
-        return resp.json()
-
-    # ------------------------------------------------------
-    # Mocks DEV_MODE
-    # ------------------------------------------------------
-    def _mock(self, endpoint: str) -> Any:
-        if endpoint == "/inventory":
-            return MOCK_INVENTORY
-
-        if endpoint.startswith("/inventory/"):
-            try:
-                wanted = int(endpoint.split("/")[-1])
-                for item in MOCK_INVENTORY:
-                    if item["id"] == wanted:
-                        return item
-            except Exception:
-                pass
-            raise HTTPException(404, f"Inventory item {wanted} not found (DEV MODE)")
-
-        return MOCK_INVENTORY
-
-    # ------------------------------------------------------
+    # --------------------------------------------------
     # Public API
-    # ------------------------------------------------------
+    # --------------------------------------------------
     async def get_inventory(self) -> List[JavaInventoryItemDto]:
-        """
-        GET /inventory
-        """
         raw = await self._get("/inventory")
-        return [JavaInventoryItemDto(**item) for item in raw]
+        return [
+            JavaInventoryItemDto.model_validate(i)
+            for i in self._normalize(raw)
+        ]
 
-    async def get_inventory_item(self, item_id: int) -> JavaInventoryItemDto:
-        """
-        GET /inventory/{id}
-        """
-        raw = await self._get(f"/inventory/{item_id}")
-        return JavaInventoryItemDto(**raw)
+    async def get_inventory_by_sku(self, sku: str) -> JavaInventoryItemDto:
+        if DEV_MODE:
+            for i in MOCK_INVENTORY:
+                if i["sku"] == sku:
+                    return JavaInventoryItemDto.model_validate(i)
+            raise HTTPException(404, f"Inventory with sku={sku} not found")
 
-    async def close(self):
-        await self.client.aclose()
+        raw = await self._get(f"/inventory/by-sku/{sku}")
+        return JavaInventoryItemDto.model_validate(raw)
 
+    async def get_inventory_by_name(self, name: str) -> JavaInventoryItemDto:
+        if DEV_MODE:
+            for i in MOCK_INVENTORY:
+                if i["name"].lower() == name.lower():
+                    return JavaInventoryItemDto.model_validate(i)
+            raise HTTPException(404, f"Inventory with name={name} not found")
 
-# Convenience wrapper
-async def get_inventory(token: Optional[str] = None) -> List[JavaInventoryItemDto]:
-    c = JavaInventoryClient(token)
-    try:
-        return await c.get_inventory()
-    finally:
-        await c.close()
+        raw = await self._get(f"/inventory/by-name/{name}")
+        return JavaInventoryItemDto.model_validate(raw)
+
+    async def close(self):
+        await self.client.aclose()
diff --git a/backend-python/src/clients/java_products_client.py b/backend-python/src/clients/java_products_client.py
index 352b6c6..b5abb8e 100644
--- a/backend-python/src/clients/java_products_client.py
+++ b/backend-python/src/clients/java_products_client.py
@@ -1,115 +1,129 @@
-# src/clients/java_products_client.py
 from __future__ import annotations
 
 import os
 import logging
-from typing import Any, Dict, List, Optional
+from typing import Any, List, Optional
 
 import httpx
 from fastapi import HTTPException
 
 from src.api.settings import DEV_MODE
-from src.mock.mock_products import MOCK_PRODUCTS
 from src.models.dto.java_raw_dto import JavaProductDto
+from src.mock.mock_products import MOCK_PRODUCTS
+
+JAVA_API_URL = os.getenv(
+    "JAVA_API_URL",
+    "http://10.131.221.179:8080/api/v1"
+).rstrip("/")
 
-JAVA_API_URL = os.getenv("JAVA_API_URL", "http://localhost:8080/api/v1").rstrip("/")
 logger = logging.getLogger(__name__)
 
 
 class JavaProductsClient:
     """
-    Client alignÃ© sur ProductController Java.
+    Client STRICTEMENT alignÃ© sur ProductController Java.
+
+    Endpoints exposÃ©s :
+    - GET /products
+    - GET /products/{id}
+    - GET /products/by-sku/{sku}
+    - GET /products/by-name/{name}
+    - GET /products/low-stock
 
-    Endpoints :
-      - GET /products
-      - GET /products/{id}
-      - GET /products/low-stock
+    âš ï¸ Aucune logique mÃ©tier ici.
     """
 
     def __init__(self, token: Optional[str] = None):
         self.token = token
         self.client = httpx.AsyncClient(timeout=10.0)
 
-    # ------------------------------------------------------
-    # Helpers internes
-    # ------------------------------------------------------
-    def _headers(self) -> Dict[str, str]:
+    # --------------------------------------------------
+    # Helpers
+    # --------------------------------------------------
+    def _headers(self) -> dict:
         return {"Authorization": f"Bearer {self.token}"} if self.token else {}
 
-    async def _get(self, endpoint: str) -> Any:
+    def _normalize(self, raw: Any) -> List[dict]:
+        if isinstance(raw, list):
+            return raw
+        if isinstance(raw, dict):
+            for key in ("data", "content", "items", "result"):
+                if key in raw and isinstance(raw[key], list):
+                    return raw[key]
+            return [raw]
+        return []
+
+    async def _get(self, endpoint: str):
         url = f"{JAVA_API_URL}{endpoint}"
         logger.info(f"[JavaProductsClient] GET {url} (DEV_MODE={DEV_MODE})")
 
         if DEV_MODE:
-            return self._mock(endpoint)
+            return MOCK_PRODUCTS
 
         try:
             resp = await self.client.get(url, headers=self._headers())
+            resp.raise_for_status()
+            return resp.json()
         except Exception as e:
-            raise HTTPException(502, f"Cannot reach Java Product API: {str(e)}")
-
-        if resp.status_code != 200:
+            logger.exception("Java Product API error")
             raise HTTPException(
-                502,
-                f"Java Product API error {resp.status_code}: {resp.text}"
+                status_code=502,
+                detail=f"Java Product API error: {str(e)}",
             )
 
-        return resp.json()
-
-    # ------------------------------------------------------
-    # Mocks DEV_MODE
-    # ------------------------------------------------------
-    def _mock(self, endpoint: str) -> Any:
-        # Always return full mock list ; filtering is done in Python
-        return MOCK_PRODUCTS
-
-    # ------------------------------------------------------
+    # --------------------------------------------------
     # Public API
-    # ------------------------------------------------------
+    # --------------------------------------------------
     async def get_all_products(self) -> List[JavaProductDto]:
-        """
-        GET /products
-        """
         raw = await self._get("/products")
-        return [JavaProductDto(**p) for p in raw]
+        return [
+            JavaProductDto.model_validate(p)
+            for p in self._normalize(raw)
+        ]
 
-    async def get_product(self, product_id: int) -> JavaProductDto:
-        """
-        GET /products/{id}
-        """
-        raw = await self._get("/products")
+    async def get_product_by_id(self, product_id: int) -> JavaProductDto:
+        if DEV_MODE:
+            for p in MOCK_PRODUCTS:
+                if p["id"] == product_id:
+                    return JavaProductDto.model_validate(p)
+            raise HTTPException(404, f"Product with id={product_id} not found")
+
+        raw = await self._get(f"/products/by-id/{id}")
+        return JavaProductDto.model_validate(raw)
+
+    async def get_product_by_sku(self, sku: str) -> JavaProductDto:
+        if DEV_MODE:
+            for p in MOCK_PRODUCTS:
+                if p["sku"] == sku:
+                    return JavaProductDto.model_validate(p)
+            raise HTTPException(404, f"Product with sku={sku} not found")
 
-        for p in raw:
-            if p.get("id") == product_id:
-                return JavaProductDto(**p)
+        raw = await self._get(f"/products/by-sku/{sku}")
+        return JavaProductDto.model_validate(raw)
 
-        raise HTTPException(404, f"Product {product_id} not found (DEV MODE)")
+    async def get_product_by_name(self, name: str) -> JavaProductDto:
+        if DEV_MODE:
+            for p in MOCK_PRODUCTS:
+                if p["name"].lower() == name.lower():
+                    return JavaProductDto.model_validate(p)
+            raise HTTPException(404, f"Product with name={name} not found")
+
+        raw = await self._get(f"/products/by-name/{name}")
+        return JavaProductDto.model_validate(raw)
 
     async def get_low_stock_products(self) -> List[JavaProductDto]:
-        """
-        GET /products/low-stock
-        DEV_MODE: simulate threshold logic
-        """
         if DEV_MODE:
-            raw = await self._get("/products")
-            low_stock = [
-                p
-                for p in raw
+            return [
+                JavaProductDto.model_validate(p)
+                for p in MOCK_PRODUCTS
                 if p.get("stockQuantity", 0) <= p.get("lowStockThreshold", 0)
             ]
-            return [JavaProductDto(**p) for p in low_stock]
 
         raw = await self._get("/products/low-stock")
-        return [JavaProductDto(**p) for p in raw]
+        return [
+            JavaProductDto.model_validate(p)
+            for p in self._normalize(raw)
+        ]
 
     async def close(self):
         await self.client.aclose()
-
-
-# Convenience wrapper
-async def get_all_products(token: Optional[str] = None) -> List[JavaProductDto]:
-    c = JavaProductsClient(token)
-    try:
-        return await c.get_all_products()
-    finally:
-        await c.close()
diff --git a/backend-python/src/clients/java_sales_client.py b/backend-python/src/clients/java_sales_client.py
index 0ecdab5..23002b3 100644
--- a/backend-python/src/clients/java_sales_client.py
+++ b/backend-python/src/clients/java_sales_client.py
@@ -1,157 +1,162 @@
-# src/clients/java_sales_client.py
 from __future__ import annotations
 
 import os
 import logging
-from typing import Any, Dict, List, Optional
+from typing import Any, List, Optional
 
 import httpx
 from fastapi import HTTPException
 
-from src.api.settings import DEV_MODE
+from src.models.dto.java_raw_dto import (
+    JavaSaleDto,
+    JavaSalesHistoryFlatDto,
+    JavaCreateSaleRequestDto,
+    JavaSaleItemCreateDto,
+)
+
 from src.mock.mock_sales import (
-    MOCK_TODAY_SALES,
-    MOCK_SALES_PERIOD,
-    MOCK_SALES_HISTORY,
     MOCK_RECENT_SALES,
+    MOCK_SALES_HISTORY,
 )
-from src.models.dto.java_raw_dto import JavaSaleDto, JavaSalesHistoryDto
+from src.api.settings import DEV_MODE
+
+JAVA_API_URL = os.getenv(
+    "JAVA_API_URL",
+    "http://10.131.221.179:8080/api/v1"
+).rstrip("/")
 
-JAVA_API_URL = os.getenv("JAVA_API_URL", "http://localhost:8080/api/v1").rstrip("/")
 logger = logging.getLogger(__name__)
 
 
 class JavaSalesClient:
+    """
+    Client STRICTEMENT alignÃ© sur les endpoints Java Sales.
+    Aucune logique mÃ©tier ici.
+    """
+
     def __init__(self, token: Optional[str] = None):
         self.token = token
-        self.client = httpx.AsyncClient(timeout=20.0)
+        self.client = httpx.AsyncClient(timeout=15.0)
 
-    # ------------------------------------------------------------------
+    # --------------------------------------------------
     # Helpers
-    # ------------------------------------------------------------------
+    # --------------------------------------------------
     def _headers(self) -> dict:
         return {"Authorization": f"Bearer {self.token}"} if self.token else {}
 
-    def _normalize_response(self, raw: Any) -> List[dict] | dict:
-        """
-        Java peut renvoyer :
-        - un dict (ex: une seule vente)
-        - une liste de dicts (liste de ventes)
-        - {"data": [...]}, {"sales": [...]}, etc.
-        On normalise tout Ã§a proprement.
-        """
+    def _normalize(self, raw: Any) -> List[dict]:
         if isinstance(raw, list):
             return raw
         if isinstance(raw, dict):
-            # Cherche une clÃ© qui contient une liste
-            for key in ["data", "sales", "content", "items", "result", "value"]:
+            for key in ("data", "sales", "content", "items", "result"):
                 if key in raw and isinstance(raw[key], list):
                     return raw[key]
-            # Sinon c'est probablement l'objet seul
-            return raw
-        return raw  # fallback
-
-    # ------------------------------------------------------------------
-    # Mocks (DEV_MODE)
-    # ------------------------------------------------------------------
-    def _mock(self, endpoint: str) -> Any:
-        if endpoint.startswith("/sales/today"):
-            return MOCK_TODAY_SALES
-        if "start_date" in endpoint or "end_date" in endpoint:
-            return MOCK_SALES_PERIOD
-        if endpoint.startswith("/sales/recent"):
-            return MOCK_RECENT_SALES
-        if endpoint.startswith("/sales/history"):
-            return MOCK_SALES_HISTORY
-        return {"error": "mock not found"}
-
-    # ------------------------------------------------------------------
-    # RequÃªtes rÃ©elles
-    # ------------------------------------------------------------------
+            return [raw]
+        return []
+
     async def _get(self, endpoint: str) -> Any:
         url = f"{JAVA_API_URL}{endpoint}"
-        logger.info(f"[SalesClient] GET {url} (DEV_MODE={DEV_MODE})")
+        logger.info(f"[JavaSalesClient] GET {url} (DEV_MODE={DEV_MODE})")
 
         if DEV_MODE:
-            return self._mock(endpoint)
+            if endpoint == "/sales/recent":
+                return MOCK_RECENT_SALES
+            if endpoint == "/sales/history":
+                return MOCK_SALES_HISTORY
+            return []
 
         try:
             resp = await self.client.get(url, headers=self._headers())
             resp.raise_for_status()
             return resp.json()
-        except httpx.HTTPStatusError as e:
-            logger.error(f"Java Sales API error {e.response.status_code}: {e.response.text}")
-            raise HTTPException(status_code=502, detail=f"Java Sales API error: {e.response.status_code}")
         except Exception as e:
-            logger.exception("Cannot reach Java Sales API")
-            raise HTTPException(status_code=502, detail=f"Cannot reach Java Sales API: {str(e)}")
+            logger.exception("Java Sales API error")
+            raise HTTPException(
+                status_code=502,
+                detail=f"Java Sales API error: {str(e)}",
+            )
+
+    # --------------------------------------------------
+    # SALES â€” READ
+    # --------------------------------------------------
+    async def get_recent_sales(self) -> List[JavaSaleDto]:
+        raw = await self._get("/sales/recent")
+        return [JavaSaleDto.model_validate(s) for s in self._normalize(raw)]
+
+    async def get_sales_history(self) -> List[JavaSaleDto]:
+        raw = await self._get("/sales/history")
+        return [JavaSaleDto.model_validate(s) for s in self._normalize(raw)]
+
+    async def get_sales_history_by_sku(
+        self,
+        sku: str,
+    ) -> List[JavaSalesHistoryFlatDto]:
+        raw = await self._get(f"/sales/history/by-sku/{sku}")
+        return [
+            JavaSalesHistoryFlatDto.model_validate(p)
+            for p in self._normalize(raw)
+        ]
+
+    async def get_sales_history_by_name(
+        self,
+        name: str,
+    ) -> List[JavaSalesHistoryFlatDto]:
+        raw = await self._get(f"/sales/history/by-name/{name}")
+        return [
+            JavaSalesHistoryFlatDto.model_validate(p)
+            for p in self._normalize(raw)
+        ]
+
+    # --------------------------------------------------
+    # SALES â€” BULK CREATE (Excel / CSV Import)
+    # --------------------------------------------------
+    async def create_bulk_sales(
+        self,
+        rows: List[dict],
+    ) -> dict:
+        """
+        POST /sales/bulk
 
-    async def _post(self, endpoint: str, payload: Dict[str, Any]) -> Any:
-        url = f"{JAVA_API_URL}{endpoint}"
-        if DEV_MODE:
-            return {"dev_mode": True, "payload": payload}
-
-        resp = await self.client.post(url, json=payload, headers=self._headers())
-        resp.raise_for_status()
-        return resp.json()
-
-    # ------------------------------------------------------------------
-    # PUBLIC API â€“ CORRIGÃ‰E Ã€ 1000%
-    # ------------------------------------------------------------------
-    async def get_sales_today(self) -> JavaSaleDto:
-        raw = await self._get("/sales/today")
-        data = self._normalize_response(raw)
-        # /sales/today renvoie gÃ©nÃ©ralement un seul objet
-        return JavaSaleDto.model_validate(data)
-
-    async def get_sales_period(self, start_date: str, end_date: str) -> List[JavaSaleDto]:
-        raw = await self._get(f"/sales?start_date={start_date}&end_date={end_date}")
-        data = self._normalize_response(raw)
-        if not isinstance(data, list):
-            data = [data]  # au cas oÃ¹ Java renvoie un seul objet
-        return [JavaSaleDto.model_validate(item) for item in data if isinstance(item, dict)]
-
-    async def get_recent_sales(self, limit: int = 100) -> List[JavaSaleDto]:
-        raw = await self._get(f"/sales/recent?limit={limit}")
-        data = self._normalize_response(raw)
-        return [JavaSaleDto.model_validate(item) for item in data if isinstance(item, dict)]
-
-    async def get_sales_history_global(self, days: int = 90) -> List[JavaSalesHistoryDto]:
-        raw = await self._get(f"/sales/history?days={days}")
-        data = self._normalize_response(raw)
-        return [JavaSalesHistoryDto.model_validate(item) for item in data if isinstance(item, dict)]
-
-    async def get_sales_history_product(self, product_id: int, days: int = 30) -> List[JavaSalesHistoryDto]:
-        raw = await self._get(f"/sales/history/{product_id}?days={days}")
-        data = self._normalize_response(raw)
-        return [JavaSalesHistoryDto.model_validate(item) for item in data if isinstance(item, dict)]
-
-    # POST
-    async def create_sale(self, payload: Dict[str, Any]) -> Dict[str, Any]:
-        return await self._post("/sales", payload)
-
-    async def bulk_sales(self, payload: Dict[str, Any]) -> Dict[str, Any]:
-        return await self._post("/sales/bulk", payload)
-
-    # ------------------------------------------------------------------
-    async def close(self):
-        await self.client.aclose()
+        Swagger expects:
+        [
+          { "items": [ { productId, sku, quantity } ] }
+        ]
+        """
+
+        url = f"{JAVA_API_URL}/sales/bulk"
+
+        # ðŸ”’ Swagger-aligned payload
+        payload = [
+            JavaCreateSaleRequestDto(
+                items=[JavaSaleItemCreateDto(**row)]
+            ).model_dump()
+            for row in rows
+        ]
+
+        logger.debug("JAVA BULK PAYLOAD SENT: %s", payload)
 
+        if DEV_MODE:
+            return {
+                "imported": len(payload),
+                "failed": 0,
+                "items": payload,
+            }
 
-# ----------------------------------------------------------------------
-# Convenience wrappers (utilisÃ©s dans les services)
-# ----------------------------------------------------------------------
-async def get_today_sales(token: Optional[str] = None) -> JavaSaleDto:
-    client = JavaSalesClient(token)
-    try:
-        return await client.get_sales_today()
-    finally:
-        await client.close()
+        try:
+            resp = await self.client.post(
+                url,
+                json=payload,
+                headers=self._headers(),
+            )
+            resp.raise_for_status()
+            return resp.json()
 
+        except Exception as e:
+            logger.exception("Java Sales BULK API error")
+            raise HTTPException(
+                status_code=502,
+                detail=f"Java Sales BULK API error: {str(e)}",
+            )
 
-async def get_sales_period(start: str, end: str, token: Optional[str] = None) -> List[JavaSaleDto]:
-    client = JavaSalesClient(token)
-    try:
-        return await client.get_sales_period(start, end)
-    finally:
-        await client.close()
\ No newline at end of file
+    async def close(self):
+        await self.client.aclose()
diff --git a/backend-python/src/clients/test_java_client.py b/backend-python/src/clients/test_java_client.py
new file mode 100644
index 0000000..b6a21b0
--- /dev/null
+++ b/backend-python/src/clients/test_java_client.py
@@ -0,0 +1,107 @@
+# test_java_sales_client.py
+import asyncio
+import os
+from dotenv import load_dotenv
+
+from src.clients.java_sales_client import JavaSalesClient
+from src.api.settings import DEV_MODE
+
+# --------------------------------------------------
+# ENV
+# --------------------------------------------------
+load_dotenv()
+
+
+async def test_java_sales_client():
+    print("\n" + "=" * 60)
+    print("ðŸ§ª TEST â€” JavaSalesClient (RAW DATA)")
+    print("=" * 60)
+
+    print(f"JAVA_API_URL = {os.getenv('JAVA_API_URL')}")
+    print(f"DEV_MODE     = {DEV_MODE}")
+
+    token = os.getenv("JAVA_API_TOKEN")  # optionnel
+    client = JavaSalesClient(token=token)
+
+    try:
+        # --------------------------------------------------
+        # 1ï¸âƒ£ RECENT SALES
+        # --------------------------------------------------
+        print("\nðŸ“Œ 1. get_recent_sales()")
+
+        try:
+            recent_sales = await client.get_recent_sales()
+            print(f"âœ… OK â€” {len(recent_sales)} ventes rÃ©cupÃ©rÃ©es")
+
+            if recent_sales:
+                s = recent_sales[0]
+                print("   Exemple vente :")
+                print(f"   - saleId     = {s.saleId}")
+                print(f"   - saleDate   = {s.saleDate}")
+                print(f"   - totalAmount = {s.totalAmount}")
+                print(f"   - items      = {len(s.items)}")
+        except Exception as e:
+            print(f"âŒ ERREUR recent_sales: {e}")
+
+        # --------------------------------------------------
+        # 2ï¸âƒ£ SALES HISTORY (GLOBAL)
+        # --------------------------------------------------
+        print("\nðŸ“Œ 2. get_sales_history()")
+
+        try:
+            history = await client.get_sales_history()
+            print(f"âœ… OK â€” {len(history)} ventes dans l'historique")
+
+            if history:
+                s = history[0]
+                print("   Exemple historique :")
+                print(f"   - saleId     = {s.saleId}")
+                print(f"   - saleDate   = {s.saleDate}")
+                print(f"   - totalAmount = {s.totalAmount}")
+        except Exception as e:
+            print(f"âŒ ERREUR history: {e}")
+
+        # --------------------------------------------------
+        # 3ï¸âƒ£ SALES HISTORY BY SKU (ML PRODUCT)
+        # --------------------------------------------------
+        print("\nðŸ“Œ 3. get_sales_history_by_sku('SUGAR-003')")
+
+        try:
+            sku_history = await client.get_sales_history_by_sku("SUGAR-003")
+            print(f"âœ… OK â€” {len(sku_history)} points pour ce SKU")
+
+            if sku_history:
+                p = sku_history[0]
+                print("   Exemple point ML :")
+                print(f"   - date     = {p.date}")
+                print(f"   - quantity = {p.quantity}")
+        except Exception as e:
+            print(f"âš ï¸ SKU non trouvÃ© ou vide: {e}")
+
+        # --------------------------------------------------
+        # 4ï¸âƒ£ SALES HISTORY BY NAME (OPTION UI)
+        # --------------------------------------------------
+        print("\nðŸ“Œ 4. get_sales_history_by_name('Sugar')")
+
+        try:
+            name_history = await client.get_sales_history_by_name("Sugar")
+            print(f"âœ… OK â€” {len(name_history)} points pour ce produit")
+
+            if name_history:
+                p = name_history[0]
+                print("   Exemple point :")
+                print(f"   - date     = {p.date}")
+                print(f"   - quantity = {p.quantity}")
+        except Exception as e:
+            print(f"âš ï¸ Name non trouvÃ© ou vide: {e}")
+
+    finally:
+        await client.close()
+
+    print("\n" + "=" * 60)
+    print("âœ… TEST TERMINÃ‰")
+    print("=" * 60)
+
+
+if __name__ == "__main__":
+    asyncio.run(test_java_sales_client())
diff --git a/backend-python/src/data/file_processor.py b/backend-python/src/data/file_processor.py
index 79ce5e4..9ddfe9f 100644
--- a/backend-python/src/data/file_processor.py
+++ b/backend-python/src/data/file_processor.py
@@ -1,95 +1,167 @@
-# src/data/file_processor.py
+from __future__ import annotations
 
-import pandas as pd
-from fastapi import HTTPException, UploadFile
-from io import BytesIO
+import io
+import csv
+from typing import Any, Dict, List
 
-from src.utils.validators import validate_schema
+from fastapi import UploadFile
+from openpyxl import load_workbook
 
+from src.clients.java_products_client import JavaProductsClient
 
-def process_file(upload_file: UploadFile, required_schema: dict):
-    """
-    Process an uploaded CSV or Excel file into a validated pandas DataFrame.
 
-    Args:
-        upload_file (UploadFile): The uploaded file object.
-        required_schema (dict): Schema describing required columns and validation rules.
+# --------------------------------------------------
+# Helpers
+# --------------------------------------------------
 
-    Returns:
-        dict: metadata, preview, validation results.
-    """
+def _norm(s: str) -> str:
+    return s.strip().lower().replace(" ", "_").replace("-", "_")
 
-    filename = upload_file.filename.lower()
 
-    # --------------------------------------------------------
-    # 1. Detect file type
-    # --------------------------------------------------------
+def _to_int(v: Any) -> int | None:
     try:
-        if filename.endswith(".csv"):
-            df = pd.read_csv(upload_file.file)
-
-        elif filename.endswith(".xlsx") or filename.endswith(".xls"):
-            # read bytes first (important because file-like object gets consumed)
-            content = upload_file.file.read()
-            df = pd.read_excel(BytesIO(content))
-
-        else:
-            raise HTTPException(
-                status_code=400,
-                detail="Unsupported file format. Only .csv and .xlsx/.xls are allowed."
-            )
-
-    except Exception as e:
-        raise HTTPException(
-            status_code=400,
-            detail=f"Error reading file '{filename}': {str(e)}"
-        )
-
-    # --------------------------------------------------------
-    # 2. Normalize column names
-    # --------------------------------------------------------
-    df.columns = [col.strip() for col in df.columns]
-
-    # --------------------------------------------------------
-    # 3. Schema validation
-    # --------------------------------------------------------
-    validation_errors = None
+        return int(float(v))
+    except Exception:
+        return None
 
+
+def _to_float(v: Any) -> float | None:
     try:
-        validate_schema(df, required_schema)
-    except HTTPException as exc:
-        # capture validator errors but do not crash
-        validation_errors = exc.detail
-
-    # --------------------------------------------------------
-    # 4. Build preview (top 10 rows)
-    # --------------------------------------------------------
-    try:
-        preview = (
-            df.head(10)
-            .fillna("")
-            .astype(str)
-            .to_dict(orient="records")
-        )
+        return float(v)
     except Exception:
-        preview = []
+        return None
+
+
+# --------------------------------------------------
+# Readers (CSV / Excel)
+# --------------------------------------------------
+
+async def _read_file(file: UploadFile) -> List[Dict[str, Any]]:
+    content = await file.read()
+    if not content:
+        raise ValueError("Empty file")
+
+    filename = (file.filename or "").lower()
+
+    # ---------- CSV ----------
+    if filename.endswith(".csv"):
+        text = content.decode("utf-8", errors="replace")
+        reader = csv.DictReader(io.StringIO(text))
+        return [{_norm(k): v for k, v in row.items()} for row in reader]
+
+    # ---------- XLSX ----------
+    wb = load_workbook(io.BytesIO(content), data_only=True)
+    ws = wb.active
+
+    header = [_norm(str(c.value)) for c in ws[1]]
+    rows: List[Dict[str, Any]] = []
 
-    # --------------------------------------------------------
-    # 5. Build column types
-    # --------------------------------------------------------
-    column_types = {col: str(dtype) for col, dtype in df.dtypes.items()}
+    for row in ws.iter_rows(min_row=2, values_only=True):
+        obj = dict(zip(header, row))
+        if any(v not in (None, "") for v in obj.values()):
+            rows.append(obj)
+
+    return rows
+
+
+# --------------------------------------------------
+# Canonical Sales Processor
+# --------------------------------------------------
+
+async def process_sales_upload_to_canonical(
+    file: UploadFile,
+    token: str,
+) -> Dict[str, Any]:
+    """
+    Converts Excel/CSV sales file into canonical Java format.
+
+    Output items:
+        { productId, sku, quantity }
+    """
+
+    rows = await _read_file(file)
+
+    if not rows:
+        return {
+            "items": [],
+            "errors": [],
+            "total_rows": 0,
+            "valid_rows": 0,
+        }
+
+    # --------------------------------------------------
+    # JOIN with Java products
+    # --------------------------------------------------
+    products_client = JavaProductsClient(token)
+    try:
+        products = await products_client.get_all_products()
+    finally:
+        await products_client.close()
+
+    by_id = {p.id: p for p in products if p.id is not None}
+    by_sku = {p.sku.lower(): p for p in products if p.sku}
+    by_name = {p.name.lower(): p for p in products if p.name}
+
+    items: List[Dict[str, Any]] = []
+    errors: List[Dict[str, Any]] = []
+
+    for row_index, row in enumerate(rows, start=2):
+        # --------------------------------------------------
+        # One-of rule: product_id | sku | name
+        # --------------------------------------------------
+        if not row.get("product_id") and not row.get("sku") and not row.get("name"):
+            errors.append({
+                "row": row_index,
+                "field": "product_id / sku / name",
+                "reason": "One of product_id, sku or name is required",
+            })
+            continue
+
+        # --------------------------------------------------
+        # Quantity validation
+        # --------------------------------------------------
+        quantity = _to_float(row.get("quantity"))
+        if quantity is None or quantity <= 0:
+            errors.append({
+                "row": row_index,
+                "field": "quantity",
+                "reason": "Invalid or <= 0",
+            })
+            continue
+
+        # --------------------------------------------------
+        # Resolve product
+        # --------------------------------------------------
+        product = None
+
+        pid = _to_int(row.get("product_id"))
+        if pid and pid in by_id:
+            product = by_id[pid]
+        elif row.get("sku"):
+            product = by_sku.get(str(row["sku"]).lower())
+        elif row.get("name"):
+            product = by_name.get(str(row["name"]).lower())
+
+        if not product:
+            errors.append({
+                "row": row_index,
+                "field": "product",
+                "reason": "Unknown product",
+            })
+            continue
+
+        # --------------------------------------------------
+        # Canonical output (Java SaleItemRequest)
+        # --------------------------------------------------
+        items.append({
+            "productId": product.id,
+            "sku": product.sku,
+            "quantity": int(quantity),
+        })
 
-    # --------------------------------------------------------
-    # 6. Response object
-    # --------------------------------------------------------
     return {
-        "filename": filename,
-        "row_count": len(df),
-        "columns": list(df.columns),
-        "column_types": column_types,
-        "preview": preview,
-        "validation": {
-            "status": "ok" if validation_errors is None else "failed",
-            "errors": validation_errors or [],
-        },
+        "items": items,
+        "errors": errors,
+        "total_rows": len(rows),
+        "valid_rows": len(items),
     }
diff --git a/backend-python/src/data/ml_preprocessor.py b/backend-python/src/data/ml_preprocessor.py
index 7f9b2b9..076e150 100644
--- a/backend-python/src/data/ml_preprocessor.py
+++ b/backend-python/src/data/ml_preprocessor.py
@@ -1,23 +1,19 @@
 # src/data/ml_preprocessor.py
-
 from __future__ import annotations
 
 from typing import Tuple
-
 import numpy as np
 import pandas as pd
 
 
 def clean_numeric(df: pd.DataFrame, col: str = "quantity") -> pd.DataFrame:
     """
-    Ensure quantity is numeric, drop NaNs/negatives.
+    Ensure quantity is numeric and non-negative.
     """
     df = df.copy()
 
     df[col] = pd.to_numeric(df[col], errors="coerce")
     df = df.dropna(subset=[col])
-
-    # optional: remove negatives
     df = df[df[col] >= 0]
 
     return df
@@ -25,22 +21,34 @@ def clean_numeric(df: pd.DataFrame, col: str = "quantity") -> pd.DataFrame:
 
 def fill_missing_values(df: pd.DataFrame) -> pd.DataFrame:
     """
-    Fill missing dates with quantity = 0.
-    Assumes 'date' column exists.
+    - ENSURE one row per date (aggregate first)
+    - Fill missing dates with quantity = 0
     """
+
     df = df.copy()
     df["date"] = pd.to_datetime(df["date"])
-    df = df.sort_values("date")
 
-    full_index = pd.date_range(df["date"].min(), df["date"].max(), freq="D")
-    df = df.set_index("date").reindex(full_index)
-
-    # rename index back to date
-    df.index.name = "date"
-    df = df.reset_index()
-
-    if "quantity" in df.columns:
-        df["quantity"] = df["quantity"].fillna(0)
+    # ðŸ”¥ CRITICAL FIX â€” aggregate by date to avoid duplicate index
+    df = (
+        df.groupby("date", as_index=False)["quantity"]
+        .sum()
+        .sort_values("date")
+        .reset_index(drop=True)
+    )
+
+    # Build full continuous date index
+    full_index = pd.date_range(
+        start=df["date"].min(),
+        end=df["date"].max(),
+        freq="D",
+    )
+
+    df = (
+        df.set_index("date")
+        .reindex(full_index, fill_value=0)
+        .rename_axis("date")
+        .reset_index()
+    )
 
     return df
 
@@ -54,18 +62,21 @@ def prepare_regression_features(
     Input df columns:
       - date
       - quantity
+
     Output:
-      - X: day_index column as 2D
-      - y: quantity values
-      - df with 'date', 'quantity', 'day_index'
+      - X: day_index (2D)
+      - y: quantity
+      - df: date, quantity, day_index
     """
+
     df = df.copy()
     df["date"] = pd.to_datetime(df["date"])
     df = df.sort_values("date").reset_index(drop=True)
 
+    # Linear time index (robust, no date math needed)
     df["day_index"] = np.arange(len(df))
 
-    X = df["day_index"].values.reshape(-1, 1)
+    X = df[["day_index"]].values
     y = df["quantity"].astype(float).values
 
     return X, y, df
diff --git a/backend-python/src/mock/mock_inventory.py b/backend-python/src/mock/mock_inventory.py
deleted file mode 100644
index 47f21ec..0000000
--- a/backend-python/src/mock/mock_inventory.py
+++ /dev/null
@@ -1,12 +0,0 @@
-# src/mock/mock_inventory_stock.py
-
-from src.mock.mock_products import MOCK_PRODUCTS
-
-MOCK_INVENTORY = [
-    {
-        "productId": p["id"],
-        "currentStock": p.get("stockQuantity", 0),
-        "minStock": p.get("lowStockThreshold", 0),
-    }
-    for p in MOCK_PRODUCTS
-]
diff --git a/backend-python/src/mock/mock_inventory_stock.py b/backend-python/src/mock/mock_inventory_stock.py
new file mode 100644
index 0000000..1c4f8a9
--- /dev/null
+++ b/backend-python/src/mock/mock_inventory_stock.py
@@ -0,0 +1,23 @@
+# src/mock/mock_inventory_stock.py
+
+from src.mock.mock_products import MOCK_PRODUCTS
+
+MOCK_INVENTORY = [
+    {
+        "id": p["id"],                     # productId
+        "sku": p["sku"],
+        "name": p["name"],
+        "description": p.get("description"),
+        "quantity": (
+            25 if p["id"] == 1 else
+            8 if p["id"] == 2 else
+            0
+        ),
+        "price": p["price"],
+        "cost": round(p["price"] * 0.6, 2),
+        "category": None,
+        "createdAt": "2025-01-01T00:00:00",
+        "updatedAt": "2025-12-13T12:00:00",
+    }
+    for p in MOCK_PRODUCTS
+]
diff --git a/backend-python/src/mock/mock_ml_sales.py b/backend-python/src/mock/mock_ml_sales.py
new file mode 100644
index 0000000..68118ff
--- /dev/null
+++ b/backend-python/src/mock/mock_ml_sales.py
@@ -0,0 +1,56 @@
+# src/mock/mock_ml_sales.py
+from datetime import datetime, timedelta
+import pandas as pd
+from typing import Optional, List, Dict, Any
+
+# -----------------------------------------------
+# GLOBAL SERIES (flattened)
+# -----------------------------------------------
+MOCK_GLOBAL_SERIES = [
+    {"date": "2025-01-01", "quantity": 12},
+    {"date": "2025-01-02", "quantity": 15},
+    {"date": "2025-01-03", "quantity": 14},
+    {"date": "2025-01-04", "quantity": 16},
+    {"date": "2025-01-05", "quantity": 18},
+    {"date": "2025-01-06", "quantity": 17},
+    {"date": "2025-01-07", "quantity": 20},
+]
+
+# -----------------------------------------------
+# PRODUCT SERIES (by SKU)
+# -----------------------------------------------
+MOCK_PRODUCT_SERIES = {
+    "MILK-001": [
+        {"date": "2025-01-01", "quantity": 5},
+        {"date": "2025-01-02", "quantity": 7},
+        {"date": "2025-01-03", "quantity": 6},
+        {"date": "2025-01-04", "quantity": 9},
+    ],
+    "BREAD-002": [
+        {"date": "2025-01-01", "quantity": 14},
+        {"date": "2025-01-02", "quantity": 12},
+        {"date": "2025-01-03", "quantity": 13},
+        {"date": "2025-01-04", "quantity": 15},
+    ],
+}
+
+
+def _df(data):
+    df = pd.DataFrame(data)
+    df["date"] = pd.to_datetime(df["date"])
+    return df.sort_values("date").reset_index(drop=True)
+
+def load_mock_ml_sales(scope: str, sku: Optional[str] = None) -> pd.DataFrame:
+    if scope == "GLOBAL":
+        return _df(MOCK_GLOBAL_SERIES)
+
+    if scope == "PRODUCT" and sku in MOCK_PRODUCT_SERIES:
+        return _df(MOCK_PRODUCT_SERIES[sku])
+
+    # fallback synthetic
+    today = datetime.today().date()
+    data = [
+        {"date": (today - timedelta(days=i)).isoformat(), "quantity": 10 + i % 4}
+        for i in range(14)
+    ]
+    return _df(data)
diff --git a/backend-python/src/mock/mock_products.py b/backend-python/src/mock/mock_products.py
index b407721..69b5e81 100644
--- a/backend-python/src/mock/mock_products.py
+++ b/backend-python/src/mock/mock_products.py
@@ -1,34 +1,45 @@
 # src/mock/mock_products.py
 
 MOCK_PRODUCTS = [
+    # --------------------------------------------------
+    # âœ… STOCK OK (VERT)
+    # --------------------------------------------------
     {
         "id": 1,
         "name": "Milk",
         "sku": "MILK-001",
         "price": 2.50,
-        "stockQuantity": 25,
+        "stockQuantity": 25,          # >> largement au-dessus du seuil
         "lowStockThreshold": 10,
         "description": "Fresh whole milk",
-        "imageUrl": ""
+        "imageUrl": "",
     },
+
+    # --------------------------------------------------
+    # âš ï¸ LOW STOCK (ORANGE)
+    # --------------------------------------------------
     {
         "id": 2,
         "name": "Bread",
         "sku": "BREAD-002",
         "price": 1.80,
-        "stockQuantity": 8,
+        "stockQuantity": 4,           # < lowStockThreshold â†’ LOW_STOCK
         "lowStockThreshold": 5,
         "description": "Whole grain bread",
-        "imageUrl": ""
+        "imageUrl": "",
     },
+
+    # --------------------------------------------------
+    # âŒ OUT OF STOCK (ROUGE)
+    # --------------------------------------------------
     {
         "id": 3,
         "name": "Sugar",
         "sku": "SUGAR-003",
         "price": 3.00,
-        "stockQuantity": 0,
+        "stockQuantity": 0,           # = 0 â†’ OUT_OF_STOCK
         "lowStockThreshold": 10,
         "description": "White sugar 1kg",
-        "imageUrl": ""
-    }
+        "imageUrl": "",
+    },
 ]
diff --git a/backend-python/src/mock/mock_sales.py b/backend-python/src/mock/mock_sales.py
index 417940b..1d3f6c2 100644
--- a/backend-python/src/mock/mock_sales.py
+++ b/backend-python/src/mock/mock_sales.py
@@ -1,76 +1,97 @@
 # src/mock/mock_sales.py
+from datetime import datetime
 
-from datetime import datetime, timedelta
-
-# -------------------------------
-# SALES TODAY
-# -------------------------------
-MOCK_TODAY_SALES = {
-    "date": "2025-01-01",
-    "total": 245.50,
-    "count": 12,
-    "items": [
-        {"productId": 1, "quantity": 3, "price": 10.0},
-        {"productId": 2, "quantity": 1, "price": 20.0},
-    ]
-}
-
-# -------------------------------
-# SALES HISTORY â€” 90 days
-# Required for:
-#  - dead stock
-#  - avg daily sales
-# -------------------------------
-MOCK_SALES_HISTORY = [
-    {"productId": 1, "date": "2024-12-20", "quantity": 5},
-    {"productId": 1, "date": "2024-12-25", "quantity": 3},
-    {"productId": 2, "date": "2024-12-12", "quantity": 2},
-    {"productId": 2, "date": "2024-12-18", "quantity": 1},
-    {"productId": 3, "date": "2024-09-01", "quantity": 1},  # dead stock
-]
-
-# -------------------------------
-# RECENT SALES LIST
-# Used for dashboard recent sales
-# -------------------------------
+# ------------------------------------------------
+# RECENT SALES (dashboard)
+# ------------------------------------------------
 MOCK_RECENT_SALES = [
     {
         "id": 101,
-        "saleDate": "2024-12-25",
-        "totalAmount": 50.0,
+        "saleDate": datetime(2025, 12, 13, 14, 30),
+        "totalAmount": 55.0,
         "items": [
-            {"productId": 1, "quantity": 2, "price": 10.0}
-        ]
-    },
-    {
-        "id": 102,
-        "saleDate": "2024-12-24",
-        "totalAmount": 32.0,
-        "items": [
-            {"productId": 2, "quantity": 1, "price": 20.0}
-        ]
+            {
+                "productId": 1,
+                "productName": "Milk",
+                "sku": "MILK-001",
+                "quantity": 2,
+                "unitPrice": 2.50,
+                "subtotal": 5.00,
+            },
+            {
+                "productId": 2,
+                "productName": "Bread",
+                "sku": "BREAD-002",
+                "quantity": 1,
+                "unitPrice": 1.80,
+                "subtotal": 1.80,
+            },
+        ],
     }
 ]
 
-# -------------------------------
-# PERIOD SALES for /sales/period
-# -------------------------------
-MOCK_SALES_PERIOD = [
+# ------------------------------------------------
+# SALES HISTORY (GLOBAL) â€” /sales/history
+# ------------------------------------------------
+MOCK_SALES_HISTORY = [
+    {
+        "id": 201,
+        "saleDate": datetime(2025, 12, 10),
+        "totalAmount": 15.0,
+        "items": [
+            {
+                "productId": 1,
+                "productName": "Milk",
+                "sku": "MILK-001",
+                "quantity": 6,
+                "unitPrice": 2.50,
+                "subtotal": 15.00,
+            }
+        ],
+    },
     {
-        "id": 999,
-        "saleDate": "2024-12-20",
-        "totalAmount": 82.0,
+        "id": 202,
+        "saleDate": datetime(2025, 12, 5),
+        "totalAmount": 7.20,
         "items": [
-            {"productId": 1, "quantity": 2, "price": 10.0},
-            {"productId": 3, "quantity": 1, "price": 30.0},
+            {
+                "productId": 2,
+                "productName": "Bread",
+                "sku": "BREAD-002",
+                "quantity": 4,
+                "unitPrice": 1.80,
+                "subtotal": 7.20,
+            }
         ],
     },
     {
-        "id": 1000,
-        "saleDate": "2024-12-21",
-        "totalAmount": 120.0,
+        "id": 203,
+        "saleDate": datetime(2025, 11, 20),
+        "totalAmount": 3.00,
         "items": [
-            {"productId": 2, "quantity": 4, "price": 20.0},
+            {
+                "productId": 3,
+                "productName": "Sugar",
+                "sku": "SUGAR-003",
+                "quantity": 1,
+                "unitPrice": 3.00,
+                "subtotal": 3.00,
+            }
         ],
     },
+    {
+  "id": 999,
+  "saleDate": datetime.today(),
+  "totalAmount": 20.0,
+  "items": [
+    {
+      "productId": 1,
+      "productName": "Milk",
+      "sku": "MILK-001",
+      "quantity": 8,
+      "unitPrice": 2.5,
+      "subtotal": 20.0
+    }
+  ]
+}
 ]
diff --git a/backend-python/src/mock/sales_mock.py b/backend-python/src/mock/sales_mock.py
deleted file mode 100644
index 58ab2e4..0000000
--- a/backend-python/src/mock/sales_mock.py
+++ /dev/null
@@ -1,78 +0,0 @@
-from __future__ import annotations
-
-from datetime import datetime, timedelta
-import pandas as pd
-
-# ============================================================
-# MOCK SALES â€” GLOBAL FORECAST
-# ============================================================
-MOCK_GLOBAL_SALES = [
-    {"date": "2025-01-01", "quantity": 12},
-    {"date": "2025-01-02", "quantity": 15},
-    {"date": "2025-01-03", "quantity": 14},
-    {"date": "2025-01-04", "quantity": 16},
-    {"date": "2025-01-05", "quantity": 18},
-    {"date": "2025-01-06", "quantity": 17},
-    {"date": "2025-01-07", "quantity": 20},
-    {"date": "2025-01-08", "quantity": 19},
-    {"date": "2025-01-09", "quantity": 21},
-    {"date": "2025-01-10", "quantity": 23},
-]
-
-# ============================================================
-# MOCK SALES â€” PRODUCT 1
-# ============================================================
-MOCK_SALES_PRODUCT_1 = [
-    {"date": "2025-01-01", "quantity": 5},
-    {"date": "2025-01-02", "quantity": 7},
-    {"date": "2025-01-03", "quantity": 6},
-    {"date": "2025-01-04", "quantity": 9},
-    {"date": "2025-01-05", "quantity": 8},
-    {"date": "2025-01-06", "quantity": 10},
-]
-
-# ============================================================
-# MOCK SALES â€” PRODUCT 2
-# ============================================================
-MOCK_SALES_PRODUCT_2 = [
-    {"date": "2025-01-01", "quantity": 14},
-    {"date": "2025-01-02", "quantity": 12},
-    {"date": "2025-01-03", "quantity": 13},
-    {"date": "2025-01-04", "quantity": 15},
-    {"date": "2025-01-05", "quantity": 16},
-    {"date": "2025-01-06", "quantity": 18},
-]
-
-# ============================================================
-# CONVERT TO DATAFRAME
-# ============================================================
-def df_from_mock(mock_list):
-    df = pd.DataFrame(mock_list)
-    df["date"] = pd.to_datetime(df["date"])
-    df = df.sort_values("date")
-    return df.reset_index(drop=True)
-
-
-def load_mock_sales(product_id: int | None, history_days: int = 90) -> pd.DataFrame:
-    """
-    Returns a clean Pandas DataFrame for DEV MODE.
-
-    product_id=None â†’ global sales  
-    product_id=1 â†’ MOCK_SALES_PRODUCT_1  
-    product_id=2 â†’ MOCK_SALES_PRODUCT_2  
-    """
-    if product_id is None:
-        data = MOCK_GLOBAL_SALES
-    elif product_id == 1:
-        data = MOCK_SALES_PRODUCT_1
-    elif product_id == 2:
-        data = MOCK_SALES_PRODUCT_2
-    else:
-        # Default mock template
-        today = datetime.today().date()
-        data = []
-        for i in range(min(history_days, 30)):
-            d = today - timedelta(days=i)
-            data.append({"date": d.strftime("%Y-%m-%d"), "quantity": 10 + i % 5})
-
-    return df_from_mock(data)
diff --git a/backend-python/src/models/dto/__init__.py b/backend-python/src/models/dto/__init__.py
new file mode 100644
index 0000000..e69de29
diff --git a/backend-python/src/models/dto/forecast_dto.py b/backend-python/src/models/dto/forecast_dto.py
new file mode 100644
index 0000000..840c9bf
--- /dev/null
+++ b/backend-python/src/models/dto/forecast_dto.py
@@ -0,0 +1,175 @@
+# src/models/dto/forecast_dto.py
+from __future__ import annotations
+
+from enum import Enum
+from typing import List, Optional
+
+from pydantic import BaseModel, Field, model_validator
+
+from src.models.dto.analytics_dto import AnalyticsPeriod
+
+
+# ============================================================
+# FORECAST / ANOMALY SCOPE
+# ============================================================
+class ForecastScope(str, Enum):
+    GLOBAL = "GLOBAL"
+    PRODUCT = "PRODUCT"
+
+
+# ============================================================
+# FORECAST REQUEST
+# ============================================================
+class ForecastRequest(BaseModel):
+    """
+    Forecast request.
+
+    Rules:
+    - scope=GLOBAL  â†’ sku, name, product_id must be None
+    - scope=PRODUCT â†’ at least one of sku or name is REQUIRED
+                      â†’ product_id is optional
+    """
+
+    scope: ForecastScope = Field(..., description="GLOBAL or PRODUCT")
+
+    sku: Optional[str] = Field(
+        None, description="SKU of the product (alternative to name)"
+    )
+    name: Optional[str] = Field(
+        None, description="Name of the product (alternative to sku)"
+    )
+    product_id: Optional[int] = Field(
+        None, description="Optional product ID (for caching / tracking)"
+    )
+
+    forecast_days: int = Field(
+        7, ge=1, le=365, description="Number of days to forecast"
+    )
+    period: AnalyticsPeriod = AnalyticsPeriod.daily
+
+    @model_validator(mode="after")
+    def validate_product_identifier(self):
+        if self.scope == ForecastScope.PRODUCT:
+            if not self.sku and not self.name:
+                raise ValueError(
+                    "At least one of 'sku' or 'name' is required when scope=PRODUCT"
+                )
+            # Nettoyage optionnel
+            if self.sku:
+                self.sku = self.sku.strip()
+            if self.name:
+                self.name = self.name.strip()
+        else:  # GLOBAL
+            self.sku = None
+            self.name = None
+            self.product_id = None
+        return self
+
+
+# ============================================================
+# FORECAST SUMMARY
+# ============================================================
+class ForecastSummary(BaseModel):
+    total: float
+    daily_average: float
+    peak_value: float
+    peak_day: str
+    trend: str
+    period_label: str
+
+
+# ============================================================
+# PRODUCT INFO (for UI enrichment)
+# ============================================================
+class ProductInfo(BaseModel):
+    id: Optional[int] = None
+    sku: Optional[str] = None
+    name: Optional[str] = None
+    # Ajoute d'autres champs si besoin (price, category, etc.)
+
+
+# ============================================================
+# FORECAST RESULT
+# ============================================================
+class ForecastResult(BaseModel):
+    """
+    Response returned by /ml/forecast
+    """
+
+    scope: ForecastScope
+    product_id: Optional[int] = None
+
+    dates: List[str]
+    predictions: List[float]
+
+    summary: ForecastSummary
+
+    product: Optional[ProductInfo] = None
+
+
+# ============================================================
+# ANOMALY REQUEST
+# ============================================================
+class AnomalyRequest(BaseModel):
+    """
+    Anomaly detection request.
+
+    Rules:
+    - scope=GLOBAL  â†’ sku, name, product_id must be None
+    - scope=PRODUCT â†’ at least one of sku or name is REQUIRED
+    """
+
+    scope: ForecastScope = Field(..., description="GLOBAL or PRODUCT")
+
+    sku: Optional[str] = Field(None, description="SKU (alternative to name)")
+    name: Optional[str] = Field(None, description="Name (alternative to sku)")
+    product_id: Optional[int] = Field(None, description="Optional product ID")
+
+    period: AnalyticsPeriod = AnalyticsPeriod.daily
+
+    @model_validator(mode="after")
+    def validate_product_identifier(self):
+        if self.scope == ForecastScope.PRODUCT:
+            if not self.sku and not self.name:
+                raise ValueError(
+                    "At least one of 'sku' or 'name' is required when scope=PRODUCT"
+                )
+            if self.sku:
+                self.sku = self.sku.strip()
+            if self.name:
+                self.name = self.name.strip()
+        else:
+            self.sku = None
+            self.name = None
+            self.product_id = None
+        return self
+
+
+# ============================================================
+# ANOMALY RESULT
+# ============================================================
+class AnomalyResult(BaseModel):
+    date: str
+    value: float
+    score: float
+    severity: str
+    type: str
+    explanation: str
+
+
+# ============================================================
+# ANOMALY RESPONSE
+# ============================================================
+class AnomalyResponse(BaseModel):
+    """
+    Response returned by /ml/anomalies
+    """
+
+    scope: ForecastScope
+    product_id: Optional[int] = None
+
+    period: AnalyticsPeriod
+    count: int
+    anomalies: List[AnomalyResult]
+
+    product: Optional[ProductInfo] = None
\ No newline at end of file
diff --git a/backend-python/src/models/dto/java_raw_dto.py b/backend-python/src/models/dto/java_raw_dto.py
index 78c2a79..eb4c21f 100644
--- a/backend-python/src/models/dto/java_raw_dto.py
+++ b/backend-python/src/models/dto/java_raw_dto.py
@@ -1,65 +1,96 @@
-# src/models/dto/java_raw_dto.py
 from __future__ import annotations
 
 from typing import List, Optional
 from datetime import datetime
-from pydantic import BaseModel, Field, ConfigDict
+from pydantic import BaseModel, ConfigDict
 
 
 # ====================================================
-# 1. PRODUITS â€“ Java ProductDto (utile partout)
+# PRODUCT â€“ ProductDto (Java)
 # ====================================================
 class JavaProductDto(BaseModel):
     id: int
     name: str
     sku: str
     price: float
-    stockQuantity: Optional[int] = 0
-    lowStockThreshold: Optional[int] = 0
+    stockQuantity: int
+    lowStockThreshold: int
     description: Optional[str] = None
     imageUrl: Optional[str] = None
 
-    model_config = ConfigDict(populate_by_name=True)
+    model_config = ConfigDict(extra="ignore")
 
 
 # ====================================================
-# 2. HISTORIQUE DE VENTE â€“ essentiel pour ML & analytics
+# INVENTORY â€“ InventoryResponse (Java)
 # ====================================================
-class JavaSalesHistoryDto(BaseModel):
-    productId: Optional[int] = None
-    date: datetime
-    quantity: float
+class JavaInventoryItemDto(BaseModel):
+    id: int
+    sku: str
+    name: str
+    description: Optional[str]
+    quantity: int
+    price: float
+    cost: float
+    category: Optional[str]
+    createdAt: datetime
+    updatedAt: datetime
+
+    model_config = ConfigDict(extra="ignore")
 
 
 # ====================================================
-# 3. ITEM D'UNE VENTE â€“ requis pour ventes & rapports
+# SALE ITEM â€“ SaleItemResponse (Java)
 # ====================================================
 class JavaSaleItemDto(BaseModel):
     productId: int
-    quantity: float
-    price: float  # prix unitaire
+    productName: str
+    sku: str
+    quantity: int
+    unitPrice: float
+    subtotal: float
 
-    model_config = ConfigDict(populate_by_name=True)
+    model_config = ConfigDict(extra="ignore")
 
 
 # ====================================================
-# 4. VENTE COMPLÃˆTE â€“ Analyse de ventes / PDF reports
+# SALE â€“ SaleResponse (Java)
 # ====================================================
 class JavaSaleDto(BaseModel):
     id: int
-    saleDate: datetime = Field(..., alias="saleDate")
-    totalAmount: float = Field(..., alias="totalAmount")
+    saleDate: datetime
+    totalAmount: float
     items: List[JavaSaleItemDto]
 
-    model_config = ConfigDict(populate_by_name=True)
+    model_config = ConfigDict(extra="ignore")
+
+
+# ====================================================
+# SALES HISTORY FLAT â€“ ML / Analytics
+# ====================================================
+class JavaSalesHistoryFlatDto(BaseModel):
+    date: str
+    quantity: int
+
+    model_config = ConfigDict(extra="ignore")
 
 
 # ====================================================
-# 5. STOCK ANALYTICS (FUTUR ENDPOINT JAVA)
+# SALES â€” BULK CREATE (Swagger-aligned)
 # ====================================================
-class JavaStockLevelDto(BaseModel):
+
+class JavaSaleItemCreateDto(BaseModel):
     productId: int
-    currentStock: float
-    minStock: float
+    sku: str
+    quantity: int
+
+    model_config = ConfigDict(extra="ignore")
+
+
+class JavaCreateSaleRequestDto(BaseModel):
+    """
+    Correspond EXACTEMENT Ã  CreateSaleRequest cÃ´tÃ© Java (Swagger)
+    """
+    items: List[JavaSaleItemCreateDto]
 
-    model_config = ConfigDict(populate_by_name=True)
+    model_config = ConfigDict(extra="ignore")
diff --git a/backend-python/src/models/excel_schemas.py b/backend-python/src/models/excel_schemas.py
index 7d159f0..9599c8d 100644
--- a/backend-python/src/models/excel_schemas.py
+++ b/backend-python/src/models/excel_schemas.py
@@ -1,113 +1,58 @@
 """
 Schema definitions for Excel/CSV uploads.
 
-This file contains ONLY dictionary schemas used by file_processor.py
-for validating Excel / CSV uploads before sending to Java.
-
-No logic. Only static schema definitions.
+ONLY static schema definitions.
+NO logic. NO Java calls.
 """
 
 # ============================================================
-# SALES IMPORT SCHEMA (aligned with Java CreateSaleRequest)
+# SALES IMPORT SCHEMA (INPUT ONLY)
 # ============================================================
 
 REQUIRED_SALES_SCHEMA = {
+    "__rules__": {
+        # At least ONE of these fields must be present per row
+        "one_of": [
+            ["product_id", "sku", "name"]
+        ]
+    },
+
     "product_id": {
         "type": "int",
-        "required": True,
-        "description": "Matches Java field CreateSaleRequest.items[].productId"
-    },
-    "quantity": {
-        "type": "float",
-        "required": True,
-        "rules": [">0"],
-        "description": "Quantity sold â†’ must be > 0"
-    },
-    "unit_price": {
-        "type": "float",
         "required": False,
-        "rules": [">=0"],
-        "description": "Override unitPrice if needed (optional)"
-    },
-    "sale_date": {
-        "type": "date",
-        "required": True,
-        "format": "%Y-%m-%d",
-        "description": "Matches Java Sale.saleDate"
+        "description": "Java Product.id (optional if sku or name provided)"
     },
+
     "sku": {
         "type": "str",
         "required": False,
-        "description": "Optional but helps match products"
-    }
-}
-
-
-# ============================================================
-# INVENTORY IMPORT SCHEMA (for bulk updates or initial load)
-# ============================================================
-
-REQUIRED_INVENTORY_SCHEMA = {
-    "product_id": {
-        "type": "int",
-        "required": True,
-        "description": "Java Product.id"
-    },
-    "stock_quantity": {
-        "type": "float",
-        "required": True,
-        "rules": [">=0"],
-        "description": "Matches Java Product.stockQuantity"
+        "description": "Product SKU (used to resolve productId)"
     },
-    "low_stock_threshold": {
-        "type": "float",
-        "required": False,
-        "rules": [">=0"],
-        "description": "Java Product.lowStockThreshold (optional)"
-    },
-    "cost": {
-        "type": "float",
-        "required": False,
-        "rules": [">=0"],
-        "description": "Purchase price (for financial analytics)"
-    }
-}
-
-
-# ============================================================
-# PRODUCT CATALOG IMPORT (optional future feature)
-# ============================================================
 
-REQUIRED_PRODUCT_SCHEMA = {
     "name": {
         "type": "str",
-        "required": True
-    },
-    "sku": {
-        "type": "str",
-        "required": True
+        "required": False,
+        "description": "Product name (used to resolve productId if sku/id missing)"
     },
-    "price": {
+
+    "quantity": {
         "type": "float",
         "required": True,
-        "rules": [">=0"]
+        "rules": [">0"],
+        "description": "Quantity sold (must be > 0)"
     },
-    "stock_quantity": {
-        "type": "float",
+
+    "sale_date": {
+        "type": "date",
         "required": True,
-        "rules": [">=0"]
-    },
-    "description": {
-        "type": "str",
-        "required": False
-    },
-    "category": {
-        "type": "str",
-        "required": False
+        "format": "%Y-%m-%d",
+        "description": "Sale date (validated, NOT sent to Java)"
     },
-    "low_stock_threshold": {
+
+    "unit_price": {
         "type": "float",
         "required": False,
-        "rules": [">=0"]
+        "rules": [">=0"],
+        "description": "Optional override (ignored in MVP)"
     }
 }
diff --git a/backend-python/src/models/ml_schemas.py b/backend-python/src/models/ml_schemas.py
deleted file mode 100644
index 4f3f28b..0000000
--- a/backend-python/src/models/ml_schemas.py
+++ /dev/null
@@ -1,68 +0,0 @@
-from __future__ import annotations
-
-from typing import List, Optional
-from pydantic import BaseModel
-from src.models.dto.analytics_dto import AnalyticsPeriod
-
-
-# ============================================================
-# FORECAST REQUEST
-# ============================================================
-class ForecastRequest(BaseModel):
-    product_id: Optional[int] = None
-    history_days: int = 90
-    forecast_days: int = 7
-    period: AnalyticsPeriod = AnalyticsPeriod.daily
-
-
-# ============================================================
-# FORECAST SUMMARY
-# ============================================================
-class ForecastSummary(BaseModel):
-    total: float
-    daily_average: float
-    peak_value: float
-    peak_day: Optional[str]
-    trend: str
-    period_label: Optional[str]
-
-
-# ============================================================
-# FORECAST RESULT
-# ============================================================
-class ForecastResult(BaseModel):
-    product_id: Optional[int]
-    dates: List[str]
-    predictions: List[float]
-    summary: ForecastSummary
-
-
-# ============================================================
-# ANOMALY REQUEST
-# ============================================================
-class AnomalyRequest(BaseModel):
-    product_id: Optional[int] = None
-    history_days: int = 90
-    period: AnalyticsPeriod = AnalyticsPeriod.daily
-
-
-# ============================================================
-# ANOMALY RESULT
-# ============================================================
-class AnomalyResult(BaseModel):
-    date: str
-    value: float
-    score: float
-    severity: str
-    type: str
-    explanation: str
-
-
-# ============================================================
-# ANOMALY RESPONSE
-# ============================================================
-class AnomalyResponse(BaseModel):
-    product_id: Optional[int]
-    period: AnalyticsPeriod
-    count: int
-    anomalies: List[AnomalyResult]
diff --git a/backend-python/src/models/schemas.py b/backend-python/src/models/schemas.py
deleted file mode 100644
index 8e68945..0000000
--- a/backend-python/src/models/schemas.py
+++ /dev/null
@@ -1,78 +0,0 @@
-from pydantic import BaseModel, Field, field_validator
-from typing import Optional
-
-
-# ---------------------------------------------
-# ðŸŸ¡ StockAlert
-# ---------------------------------------------
-class StockAlert(BaseModel):
-    product_id: int = Field(..., description="Unique ID of the product")
-    message: str = Field(..., description="Alert message describing the issue")
-    severity: str = Field(
-        ...,
-        pattern="^(low|medium|high)$",
-        description="Severity level"
-    )
-
-    model_config = {
-        "json_schema_extra": {
-            "example": {
-                "product_id": 42,
-                "message": "Stock level below minimum threshold",
-                "severity": "high"
-            }
-        }
-    }
-
-
-# ---------------------------------------------
-# ðŸŸ¡ SalesQuery
-# ---------------------------------------------
-class SalesQuery(BaseModel):
-    start_date: str = Field(
-        ...,
-        pattern=r"^\d{4}-\d{2}-\d{2}$",
-        description="Start date in YYYY-MM-DD format"
-    )
-    end_date: str = Field(
-        ...,
-        pattern=r"^\d{4}-\d{2}-\d{2}$",
-        description="End date in YYYY-MM-DD format"
-    )
-
-    @field_validator("end_date")
-    def validate_date_order(cls, v, info):
-        start = info.data.get("start_date")
-        if start and v < start:
-            raise ValueError("end_date must be after or equal to start_date")
-        return v
-
-    model_config = {
-        "json_schema_extra": {
-            "example": {
-                "start_date": "2025-01-01",
-                "end_date": "2025-01-31"
-            }
-        }
-    }
-
-
-# ---------------------------------------------
-# ðŸŸ¡ ProductStock
-# ---------------------------------------------
-class ProductStock(BaseModel):
-    id: int = Field(..., description="Unique product ID")
-    name: str = Field(..., description="Name of the product")
-    current_stock: int = Field(..., ge=0, description="Current available stock")
-    min_stock: int = Field(..., ge=0, description="Minimum required stock")
-
-    model_config = {
-        "json_schema_extra": {
-            "example": {
-                "id": 10,
-                "name": "Orange Juice",
-                "current_stock": 5,
-                "min_stock": 12
-            }
-        }
-    }
diff --git a/backend-python/src/scheduler/tasks.py b/backend-python/src/scheduler/tasks.py
index 7f46eea..a999362 100644
--- a/backend-python/src/scheduler/tasks.py
+++ b/backend-python/src/scheduler/tasks.py
@@ -1,20 +1,56 @@
 from apscheduler.schedulers.asyncio import AsyncIOScheduler
-from src.api.routes.reports import generate_report
-from src.models.report import ReportRequest
+from typing import Optional
 import logging
+import asyncio
 
-def start_scheduler():
+from src.services.report_service import generate_report
+from src.models.dto.analytics_dto import AnalyticsPeriod
 
-    scheduler = AsyncIOScheduler()
+scheduler: Optional[AsyncIOScheduler] = None
+
+
+def get_scheduler() -> AsyncIOScheduler:
+    global scheduler
+    if scheduler is None:
+        scheduler = AsyncIOScheduler(timezone="Asia/Shanghai")
+        scheduler.start()
+        logging.info("â° Scheduler started")
+    return scheduler
+
+
+def schedule_report_job(
+    report_type: str,
+    fmt: str,
+    hour: int,
+    minute: int,
+    system_token: str,
+):
+    scheduler = get_scheduler()
+
+    async def job():
+        logging.warning(
+            f"ðŸ•’ SCHEDULED REPORT EXECUTING | {report_type} {fmt}"
+        )
+        await generate_report(
+            report_type=report_type,
+            fmt=fmt,
+            period=AnalyticsPeriod.daily,
+            token=system_token,
+            save_to_disk=True,
+        )
+
+    def job_wrapper():
+        asyncio.run(job())
+
+    job_id = f"scheduled-{report_type}-{fmt}"
 
-    # Exemple : gÃ©nÃ¨re un rapport sales PDF tous les jours Ã  minuit
     scheduler.add_job(
-        lambda: generate_report(ReportRequest(report_type="sales", format="pdf")),
-        "cron",
-        hour=0,
-        minute=0,
-        id="daily_sales_report"
+        job_wrapper,
+        trigger="cron",
+        hour=hour,
+        minute=minute,
+        id=job_id,
+        replace_existing=True,
     )
 
-    scheduler.start()
-    logging.info("â° Scheduler started successfully")
+    return job_id
diff --git a/backend-python/src/services/analytics_service.py b/backend-python/src/services/analytics_service.py
index 4223e31..398dea5 100644
--- a/backend-python/src/services/analytics_service.py
+++ b/backend-python/src/services/analytics_service.py
@@ -10,6 +10,7 @@ from src.models.dto.analytics_dto import (
     StockAnalyticsResponse,
     StockKPI,
     ProductStockSnapshot,
+    ProductStockStatus,
     SalesAnalyticsResponse,
     SalesKPI,
     DailySalesPoint,
@@ -20,16 +21,15 @@ from src.clients.java_products_client import JavaProductsClient
 from src.clients.java_sales_client import JavaSalesClient
 
 from src.services.enrichment_service import (
-    build_last_sale_map,
     enrich_inventory_with_products_and_sales,
 )
 
 from src.data.cache_manager import get_cache, cache_analytics
 
 
-# ============================================================
-# Tools
-# ============================================================
+# ------------------------------------------------------------
+# Helpers
+# ------------------------------------------------------------
 def to_dict(obj) -> dict:
     if hasattr(obj, "model_dump"):
         return obj.model_dump(by_alias=True)
@@ -66,26 +66,27 @@ def compute_period_dates(period: AnalyticsPeriod) -> Tuple[date, date]:
     return today, today
 
 
-def stock_cache_key(period: AnalyticsPeriod) -> str:
-    return f"analytics:stock:{period.value}"
-
-
-def sales_cache_key(period: AnalyticsPeriod, start: date, end: date) -> str:
-    return f"analytics:sales:{period.value}:{start}_{end}"
+def _period_label_fr(period: AnalyticsPeriod) -> str:
+    return {
+        AnalyticsPeriod.daily: "Aujourdâ€™hui",
+        AnalyticsPeriod.weekly: "7 derniers jours",
+        AnalyticsPeriod.monthly: "Mois en cours",
+        AnalyticsPeriod.quarterly: "90 derniers jours",
+    }.get(period, "")
 
 
-# ============================================================
-# 1. STOCK ANALYTICS
-# ============================================================
+# ------------------------------------------------------------
+# STOCK ANALYTICS (GLOBAL)
+# ------------------------------------------------------------
 async def compute_stock_analytics(
     period: AnalyticsPeriod,
     token: Optional[str],
 ) -> StockAnalyticsResponse:
 
     today = date.today()
-    key = stock_cache_key(period)
+    cache_key = f"analytics:stock:{period.value}"
 
-    cached = get_cache(key)
+    cached = get_cache(cache_key)
     if cached:
         try:
             return StockAnalyticsResponse(**cached)
@@ -96,45 +97,41 @@ async def compute_stock_analytics(
     sales = JavaSalesClient(token)
 
     try:
-        # Products â†’ base du stock
-        products_raw = await prod.get_all_products()
-        products: List[Dict] = [to_dict(p) for p in products_raw]
-
-        # Sales history â†’ lastSale + avgDaily
-        history_raw = await sales.get_sales_history_global(days=90)
-        history: List[Dict] = [to_dict(h) for h in history_raw]
-
+        products = [to_dict(p) for p in await prod.get_all_products()]
+        sales_history = [to_dict(s) for s in await sales.get_sales_history()]
     finally:
         await prod.close()
         await sales.close()
 
-    # Group by product for analytics
-    by_product = defaultdict(list)
-    for row in history:
-        pid = row.get("productId")
-        if pid:
-            by_product[int(pid)].append(row)
+    cutoff = today - timedelta(days=89)
 
-    last_sale_by_product = build_last_sale_map(by_product)
+    qty_by_day = defaultdict(lambda: defaultdict(float))
+    last_sale: Dict[int, date] = {}
 
-    # Compute avg daily sales per product
-    avg_daily_sales: Dict[int, float] = {}
-    for pid, hist in by_product.items():
-        if not hist:
-            avg_daily_sales[pid] = 0.0
+    for sale in sales_history:
+        d = parse_date(sale.get("saleDate"))
+        if not d or d < cutoff:
             continue
 
-        total_qty = sum(float(h.get("quantity", 0)) for h in hist)
-        dates = {parse_date(h.get("date")) for h in hist if parse_date(h.get("date"))}
+        for item in sale.get("items", []) or []:
+            it = to_dict(item)
+            pid = it.get("productId")
+            if pid is None:
+                continue
 
-        if not dates:
-            avg_daily_sales[pid] = 0.0
-            continue
+            pid = int(pid)
+            qty = float(it.get("quantity", 0))
+            if qty <= 0:
+                continue
+
+            qty_by_day[pid][d] += qty
+            last_sale[pid] = max(d, last_sale.get(pid, d))
 
-        span_days = (max(dates) - min(dates)).days + 1
-        avg_daily_sales[pid] = total_qty / max(span_days, 1)
+    avg_daily = {}
+    for pid, days in qty_by_day.items():
+        span = (max(days) - min(days)).days + 1
+        avg_daily[pid] = sum(days.values()) / max(span, 1)
 
-    # Convert products â†’ inventory_rows for enrich function
     inventory_rows = [
         {
             "productId": p["id"],
@@ -145,68 +142,53 @@ async def compute_stock_analytics(
     ]
 
     enriched = enrich_inventory_with_products_and_sales(
-        inventory_rows=inventory_rows,
-        products=products,
-        last_sale_by_product=last_sale_by_product,
-        avg_daily_sales_by_product=avg_daily_sales,
+        inventory_rows,
+        products,
+        last_sale,
+        avg_daily,
     )
 
     snapshots = [ProductStockSnapshot(**e) for e in enriched]
 
-    # KPIs
-    total_stock_value = sum(s.stock_value for s in snapshots)
-    out_of_stock = sum(1 for s in snapshots if s.current_stock <= 0)
-    low_stock = sum(1 for s in snapshots if s.status == "LOW_STOCK")
-    urgent = sum(
-        1
-        for s in snapshots
-        if s.coverage_days is not None and s.coverage_days < 7
-    )
-    dead = sum(1 for s in snapshots if s.status == "DEAD_STOCK")
-
-    total_products = len(snapshots) or 1
-    low_ratio = (low_stock / total_products) * 100
-
-    coverage_vals = [
-        s.coverage_days for s in snapshots if s.coverage_days is not None
-    ]
-    avg_coverage = (
-        sum(coverage_vals) / len(coverage_vals) if coverage_vals else None
+    kpis = StockKPI(
+        total_stock_value=round(sum(s.stock_value for s in snapshots), 2),
+        out_of_stock_count=sum(1 for s in snapshots if s.current_stock <= 0),
+        low_stock_count=sum(
+            1 for s in snapshots if s.status == ProductStockStatus.low.value
+        ),
+        low_stock_ratio=round(
+            sum(1 for s in snapshots if s.status == ProductStockStatus.low.value)
+            / max(len(snapshots), 1)
+            * 100,
+            1,
+        ),
+        urgent_reorder_count=sum(
+            1 for s in snapshots if s.coverage_days and s.coverage_days < 7
+        ),
+        dead_stock_count=sum(
+            1 for s in snapshots if s.status == ProductStockStatus.dead.value
+        ),
+        rotation_per_year=None,
+        avg_coverage_days=None,
     )
 
-    kpi = StockKPI(
-        total_stock_value=round(total_stock_value, 2),
-        out_of_stock_count=out_of_stock,
-        low_stock_count=low_stock,
-        low_stock_ratio=round(low_ratio, 1),
-        urgent_reorder_count=urgent,
-        dead_stock_count=dead,
-        rotation_per_year=0.0,  # Ã  calculer plus tard si besoin
-        avg_coverage_days=round(avg_coverage, 1) if avg_coverage is not None else None,
-    )
-
-    period_label = {
-        AnalyticsPeriod.daily: "Aujourd'hui",
-        AnalyticsPeriod.weekly: "7 derniers jours",
-        AnalyticsPeriod.monthly: "Mois en cours",
-        AnalyticsPeriod.quarterly: "90 derniers jours",
-    }.get(period, "")
-
     response = StockAnalyticsResponse(
         period=period,
-        period_label=period_label,
+        period_label=_period_label_fr(period),
         as_of=today,
-        kpis=kpi,
-        critical_products=[s for s in snapshots if s.status != "OK"],
+        kpis=kpis,
+        critical_products=[
+            s for s in snapshots if s.status != ProductStockStatus.ok.value
+        ],
     )
 
-    cache_analytics(key, response)
+    cache_analytics(cache_key, response)
     return response
 
 
-# ============================================================
-# 2. SALES ANALYTICS
-# ============================================================
+# ------------------------------------------------------------
+# SALES ANALYTICS (GLOBAL)
+# ------------------------------------------------------------
 async def compute_sales_analytics(
     period: AnalyticsPeriod,
     token: Optional[str],
@@ -217,9 +199,9 @@ async def compute_sales_analytics(
     if not start_date or not end_date:
         start_date, end_date = compute_period_dates(period)
 
-    key = sales_cache_key(period, start_date, end_date)
+    cache_key = f"analytics:sales:{period.value}:{start_date}:{end_date}"
 
-    cached = get_cache(key)
+    cached = get_cache(cache_key)
     if cached:
         try:
             return SalesAnalyticsResponse(**cached)
@@ -230,130 +212,97 @@ async def compute_sales_analytics(
     sales = JavaSalesClient(token)
 
     try:
-        products_raw = await prod.get_all_products()
-        products: List[Dict] = [to_dict(p) for p in products_raw]
-
-        sales_raw = await sales.get_sales_period(
-            start_date.isoformat(),
-            end_date.isoformat(),
-        )
-        raw_sales: List[Dict] = [to_dict(s) for s in sales_raw]
-
+        products = [to_dict(p) for p in await prod.get_all_products()]
+        sales_history = [to_dict(s) for s in await sales.get_sales_history()]
     finally:
         await prod.close()
         await sales.close()
 
-    product_map = {p["id"]: p for p in products if "id" in p}
+    product_map = {p["id"]: p for p in products}
 
-    daily: Dict[date, Dict[str, float]] = defaultdict(
-        lambda: {"rev": 0.0, "qty": 0.0, "tx": 0}
-    )
-    agg_prod: Dict[int, Dict[str, float]] = defaultdict(
-        lambda: {"rev": 0.0, "qty": 0.0}
-    )
+    daily = defaultdict(lambda: {"rev": 0.0, "qty": 0.0, "tx": 0})
+    agg = defaultdict(lambda: {"rev": 0.0, "qty": 0.0})
 
-    for sale in raw_sales:
+    for sale in sales_history:
         d = parse_date(sale.get("saleDate"))
-        if not d:
+        if not d or d < start_date or d > end_date:
             continue
 
-        total = float(sale.get("totalAmount", 0.0))
-        daily[d]["rev"] += total
+        total_amount = float(sale.get("totalAmount", 0))
+        daily[d]["rev"] += total_amount
         daily[d]["tx"] += 1
 
-        for item in sale.get("items", []):
-            pid = item.get("productId")
+        for item in sale.get("items", []) or []:
+            it = to_dict(item)
+            pid = it.get("productId")
             if pid is None:
                 continue
-            qty = float(item.get("quantity", 0.0))
+
+            pid = int(pid)
+            qty = float(it.get("quantity", 0))
             price = float(
-                item.get("price") or product_map.get(pid, {}).get("price", 0.0)
+                it.get("unitPrice")
+                or product_map.get(pid, {}).get("price", 0)
             )
-            revenue = qty * price
 
+            agg[pid]["qty"] += qty
+            agg[pid]["rev"] += qty * price
             daily[d]["qty"] += qty
-            agg_prod[pid]["rev"] += revenue
-            agg_prod[pid]["qty"] += qty
 
-    # SÃ©rie quotidienne
     daily_points: List[DailySalesPoint] = []
     total_rev = total_qty = total_tx = 0.0
 
-    for dt in sorted(daily.keys()):
-        p = daily[dt]
+    for d in sorted(daily):
+        p = daily[d]
+
         daily_points.append(
             DailySalesPoint(
-                date=dt,
-                total_revenue=p["rev"],
-                total_quantity=p["qty"],
-                total_transactions=p["tx"],
+                date=d,
+                total_revenue=round(p["rev"], 2),
+                total_quantity=round(p["qty"], 2),
+                total_transactions=int(p["tx"]),
             )
         )
+
         total_rev += p["rev"]
         total_qty += p["qty"]
         total_tx += p["tx"]
 
-    avg_ticket = total_rev / total_tx if total_tx > 0 else 0.0
-
-    # Top 5 produits
-    top: List[TopProductSales] = []
-    for pid, agg in agg_prod.items():
-        product = product_map.get(pid)
-        if not product:
-            continue
-        top.append(
+    top_products: List[TopProductSales] = sorted(
+        [
             TopProductSales(
                 product_id=pid,
-                name=product.get("name", "Inconnu"),
-                total_quantity=agg["qty"],
-                revenue=agg["rev"],
+                name=product_map[pid]["name"],
+                total_quantity=round(v["qty"], 2),
+                revenue=round(v["rev"], 2),
                 share_of_revenue=(
-                    (agg["rev"] / total_rev * 100) if total_rev > 0 else 0.0
+                    v["rev"] / total_rev * 100 if total_rev else 0.0
                 ),
             )
-        )
-
-    top.sort(key=lambda x: x.revenue, reverse=True)
-    top = top[:5]
-
-    # Tendance
-    seasonal: Optional[str] = None
-    if len(daily_points) >= 4:
-        mid = len(daily_points) // 2
-        first = sum(p.total_revenue for p in daily_points[:mid])
-        second = sum(p.total_revenue for p in daily_points[mid:])
-        if second > first * 1.1:
-            seasonal = "Upward trend"
-        elif second < first * 0.9:
-            seasonal = "Downward trend"
-        else:
-            seasonal = "Stable"
-
-    kpi = SalesKPI(
+            for pid, v in agg.items()
+            if pid in product_map
+        ],
+        key=lambda x: x.revenue,
+        reverse=True,
+    )[:5]
+
+    kpis = SalesKPI(
         total_revenue=round(total_rev, 2),
-        total_quantity=int(total_qty),
+        total_quantity=round(total_qty, 2),
         total_transactions=int(total_tx),
-        average_ticket=round(avg_ticket, 2),
-        top_products=top,
-        seasonal_hint=seasonal,
+        average_ticket=round(total_rev / total_tx, 2) if total_tx else 0.0,
+        top_products=top_products,
+        seasonal_hint=None,
     )
 
-    period_label = {
-    AnalyticsPeriod.daily: "Today",
-    AnalyticsPeriod.weekly: "Last 7 days", 
-    AnalyticsPeriod.monthly: "Current month",
-    AnalyticsPeriod.quarterly: "Last 90 days"
-}.get(period, "")
-
     response = SalesAnalyticsResponse(
-    period=period,
-    period_label=period_label,
-    start_date=start_date,
-    end_date=end_date,
-    kpis=kpi,
-    daily=daily_points,
-)
-
+        period=period,
+        start_date=start_date,
+        end_date=end_date,
+        period_label=_period_label_fr(period),
+        kpis=kpis,
+        daily=daily_points,
+    )
 
-    cache_analytics(key, response)
+    cache_analytics(cache_key, response)
     return response
diff --git a/backend-python/src/services/enrichment_service.py b/backend-python/src/services/enrichment_service.py
index 41085c1..51eee06 100644
--- a/backend-python/src/services/enrichment_service.py
+++ b/backend-python/src/services/enrichment_service.py
@@ -1,45 +1,58 @@
-# src/services/enrichment_service.py
 from __future__ import annotations
 
+"""
+Enrichment layer:
+- Joins raw Java data (sales, products, inventory)
+- Produces analytics-ready dicts
+- Used by analytics_service & report_service
+"""
+
 from typing import Any, Dict, List, Optional
 from datetime import date, datetime
 
+from src.models.dto.analytics_dto import ProductStockStatus
+
 
 # ------------------------------------------------------------------ #
 # Helper ultra-dÃ©fensif â€“ marche avec dict, Pydantic, objets Java...
 # ------------------------------------------------------------------ #
 def _to_dict(item: Any) -> Dict[str, Any]:
-    """Convertit n'importe quoi en dict pur â€“ utilisÃ© partout dans le fichier"""
+    """Convertit n'importe quoi en dict pur"""
     if item is None:
         return {}
     if isinstance(item, dict):
         return item
-    if hasattr(item, "model_dump"):                    # Pydantic v2
+    if hasattr(item, "model_dump"):  # Pydantic v2
         return item.model_dump(by_alias=True)
     if hasattr(item, "__dict__"):
         return item.__dict__
-    # fallback ultime
     try:
         return dict(item)
-    except:
+    except Exception:
         return {}
 
 
 def _parse_date(value: Any) -> Optional[date]:
+    """Parse dates venant de Java, mocks ou JSON (ultra robuste)"""
     if value is None:
         return None
+
     if isinstance(value, date) and not isinstance(value, datetime):
         return value
     if isinstance(value, datetime):
         return value.date()
+
+    cleaned: Optional[str] = None
     try:
         cleaned = str(value).replace("Z", "+00:00").split("+")[0].split(".")[0]
         return datetime.fromisoformat(cleaned).date()
-    except:
+    except Exception:
         try:
-            return datetime.strptime(cleaned, "%Y-%m-%d").date()
-        except:
+            if cleaned:
+                return datetime.strptime(cleaned, "%Y-%m-%d").date()
+        except Exception:
             return None
+    return None
 
 
 def _compute_stock_status(
@@ -47,17 +60,18 @@ def _compute_stock_status(
     min_stock: float,
     last_sale_dt: Optional[date],
     today: Optional[date] = None,
-) -> str:
+) -> ProductStockStatus:
+    """DÃ©termine le statut stock selon rÃ¨gles mÃ©tier"""
     if today is None:
         today = date.today()
 
     if current_stock <= 0:
-        return "OUT_OF_STOCK"
+        return ProductStockStatus.out
     if current_stock < max(min_stock, 1):
-        return "LOW_STOCK"
+        return ProductStockStatus.low
     if last_sale_dt and (today - last_sale_dt).days >= 90:
-        return "DEAD_STOCK"
-    return "OK"
+        return ProductStockStatus.dead
+    return ProductStockStatus.ok
 
 
 # ------------------------------------------------------------------ #
@@ -68,9 +82,14 @@ def enrich_sales_items_with_products(
     products: List[Any],
 ) -> List[Dict[str, Any]]:
 
-    product_map = {p.get("id"): p for p in [_to_dict(p) for p in products] if p.get("id")}
+    product_map = {
+        p.get("id"): p
+        for p in (_to_dict(p) for p in products)
+        if p.get("id") is not None
+    }
 
     enriched: List[Dict[str, Any]] = []
+
     for item in sale_items:
         it = _to_dict(item)
         pid = it.get("productId")
@@ -89,8 +108,6 @@ def enrich_sales_items_with_products(
             "subtotal": round(qty * unit_price, 2),
         })
 
-    
-
     return enriched
 
 
@@ -101,11 +118,12 @@ def enrich_today_sales(
 
     data = _to_dict(today_sales)
     items = data.get("items", [])
+
     enriched_items = enrich_sales_items_with_products(items, products)
 
     return {
-        "saleDate": data.get("date"),
-        "totalAmount": round(float(data.get("total", 0.0)), 2),
+        "saleDate": _parse_date(data.get("saleDate") or data.get("date")),
+        "totalAmount": round(float(data.get("totalAmount") or data.get("total", 0.0)), 2),
         "totalTransactions": int(data.get("count", 0)),
         "items": enriched_items,
     }
@@ -133,7 +151,7 @@ def build_last_sale_map(
 
 
 # ------------------------------------------------------------------ #
-# 3. ENRICHISSEMENT INVENTAIRE + INDICATEURS STOCK (LE PLUS IMPORTANT)
+# 3. ENRICHISSEMENT INVENTAIRE + INDICATEURS STOCK
 # ------------------------------------------------------------------ #
 def enrich_inventory_with_products_and_sales(
     inventory_rows: List[Any],
@@ -142,7 +160,6 @@ def enrich_inventory_with_products_and_sales(
     avg_daily_sales_by_product: Optional[Dict[int, float]] = None,
 ) -> List[Dict[str, Any]]:
 
-    # Conversion immÃ©diate â†’ on travaille toujours avec des dicts aprÃ¨s Ã§a
     inventory = [_to_dict(inv) for inv in inventory_rows]
     products = [_to_dict(p) for p in products]
 
@@ -154,7 +171,6 @@ def enrich_inventory_with_products_and_sales(
     enriched: List[Dict[str, Any]] = []
 
     for inv in inventory:
-        # Support des deux noms possibles selon la source (Java vs mock)
         pid = inv.get("productId") or inv.get("id")
         if pid is None:
             continue
@@ -191,7 +207,7 @@ def enrich_inventory_with_products_and_sales(
             "stock_value": round(current_stock * price, 2),
             "last_sale_date": last_sale_date,
             "coverage_days": round(coverage_days, 1) if coverage_days is not None else None,
-            "status": status,
+            "status": status.value,
         })
 
-    return enriched
\ No newline at end of file
+    return enriched
diff --git a/backend-python/src/services/ml_enrichment_service.py b/backend-python/src/services/ml_enrichment_service.py
index d9f7922..c2e9d04 100644
--- a/backend-python/src/services/ml_enrichment_service.py
+++ b/backend-python/src/services/ml_enrichment_service.py
@@ -1,35 +1,57 @@
-# src/services/ml_enrichment_service.py
-
 from __future__ import annotations
+
 from typing import Dict, Any, Optional
 
 from src.models.dto.java_raw_dto import JavaProductDto
 
 
 def enrich_ml_result(
-    result: Dict[str, Any],
+    result: Dict[str, Any] | Any,
     product: Optional[JavaProductDto],
 ) -> Dict[str, Any]:
     """
-    Ajoute au rÃ©sultat ML les infos produit venant du backend Java :
-    - name
-    - sku
-    - price
-    - category (si un jour tu l'ajoutes)
+    Enrichit un rÃ©sultat ML (forecast ou anomalies) avec les mÃ©tadonnÃ©es produit Java.
+
+    - AUCUN calcul mÃ©tier
+    - AUCUNE dÃ©pendance au modÃ¨le ML
+    - Fonction NON mutante (retourne un nouveau dict)
+
+    ParamÃ¨tres
+    ----------
+    result:
+        RÃ©sultat ML sous forme de dict ou DTO Pydantic (ForecastResult, AnomalyResponse, etc.)
+    product:
+        JavaProductDto correspondant au produit (None pour forecast GLOBAL)
+
+    Retour
+    ------
+    dict enrichi, prÃªt pour l'API / le frontend
     """
 
+    # Support dict OU Pydantic
+    if hasattr(result, "model_dump"):
+        base: Dict[str, Any] = result.model_dump(by_alias=True)
+    elif isinstance(result, dict):
+        base = dict(result)  # copie dÃ©fensive
+    else:
+        # fallback ultime
+        try:
+            base = dict(result)
+        except Exception:
+            base = {}
+
+    # Enrichissement produit (UI context)
     if product:
-        result["product"] = {
+        base["product"] = {
             "id": product.id,
             "name": product.name,
             "sku": product.sku,
             "price": product.price,
             "description": product.description,
             "imageUrl": product.imageUrl,
-            "lowStockThreshold": product.lowStockThreshold,
         }
     else:
-        # Forecast global ou produit introuvable
-        result["product"] = None
+        # Forecast global ou produit non trouvÃ©
+        base["product"] = None
 
-    return result
+    return base
diff --git a/backend-python/src/services/ml_service.py b/backend-python/src/services/ml_service.py
index 6e6210b..3656df4 100644
--- a/backend-python/src/services/ml_service.py
+++ b/backend-python/src/services/ml_service.py
@@ -1,10 +1,6 @@
-# ============================================================
-#  ml_service.py â€” FINAL GLOBAL VERSION (PRODUCT + GLOBAL)
-# ============================================================
-
+# src/services/ml_service.py
 from __future__ import annotations
 
-import os
 import json
 from datetime import timedelta
 from typing import Dict, Any, List, Optional
@@ -14,12 +10,12 @@ import pandas as pd
 from fastapi import HTTPException
 from sklearn.linear_model import LinearRegression
 
+from src.api.settings import DEV_MODE
 from src.data.cache_manager import get_cache, set_cache, TTL_ANALYTICS
-
-# Java + Mock
 from src.clients.java_sales_client import JavaSalesClient
-from src.mock.sales_mock import load_mock_sales
-# Preprocessing
+from src.clients.java_products_client import JavaProductsClient  # â† Ajout nÃ©cessaire
+from src.mock.mock_ml_sales import load_mock_ml_sales
+
 from src.data.ml_preprocessor import (
     clean_numeric,
     fill_missing_values,
@@ -27,234 +23,196 @@ from src.data.ml_preprocessor import (
 )
 
 from src.models.dto.analytics_dto import AnalyticsPeriod
+from src.models.dto.forecast_dto import ForecastScope
 
 
-ML_ENV = os.getenv("ML_ENV", "dev").lower()
+DEFAULT_HISTORY_DAYS = 90
 
 
-# ============================================================
-# LOAD SALES HISTORY (PRODUCT OR GLOBAL)
-# ============================================================
+# ------------------------------------------------------------
+# LOAD SALES HISTORY â€” Support SKU ou NAME
+# ------------------------------------------------------------
 async def _load_sales_history(
-    product_id: Optional[int],
-    history_days: int,
+    scope: ForecastScope,
+    product_sku: Optional[str],
+    product_name: Optional[str],
     token: Optional[str],
 ) -> pd.DataFrame:
-
-    # DEV MODE â†’ generate mock global or product-based
-    if ML_ENV == "dev":
-       df = load_mock_sales(product_id, history_days)
-
-    else:
-        client = JavaSalesClient(token)
-        try:
-            if product_id is None:
-                # GLOBAL HISTORY
-                raw = await client.get_sales_history_global(days=history_days)
+    """
+    Charge l'historique des ventes.
+    - GLOBAL : toutes les ventes
+    - PRODUCT : soit par SKU, soit par NAME (rÃ©solution automatique)
+    """
+
+    if DEV_MODE:
+        # En dev, on mocke avec le SKU si disponible, sinon global
+        return load_mock_ml_sales(scope.value, product_sku)
+
+    client = JavaSalesClient(token)
+    rows: List[Dict[str, Any]] = []
+
+    try:
+        if scope == ForecastScope.GLOBAL:
+            sales = await client.get_sales_history()
+            for s in sales:
+                d = s.saleDate.date() if hasattr(s.saleDate, "date") else s.saleDate
+                for it in s.items:
+                    rows.append({
+                        "date": str(d),
+                        "quantity": it.quantity,
+                    })
+
+        else:  # PRODUCT
+            # Cas 1 : SKU fourni â†’ direct
+            if product_sku:
+                flat = await client.get_sales_history_by_sku(product_sku)
+
+            # Cas 2 : seul NAME fourni â†’ rÃ©solution via Products API
+            elif product_name:
+                prod_client = JavaProductsClient(token)
+                try:
+                    product = await prod_client.get_product_by_name(product_name)
+                    flat = await client.get_sales_history_by_sku(product.sku)
+                finally:
+                    await prod_client.close()
             else:
-                raw = await client.get_sales_history_product(product_id, days=history_days)
-        finally:
-            await client.close()
-
-        if not raw:
-            target = "GLOBAL" if product_id is None else f"product {product_id}"
-            raise HTTPException(404, f"No sales found for {target}")
+                raise HTTPException(
+                    status_code=400,
+                    detail="Either product_sku or product_name is required for PRODUCT scope"
+                )
 
-        df = pd.DataFrame([item.model_dump() for item in raw])
+            rows = [
+                {"date": r.date, "quantity": r.quantity}
+                for r in flat
+            ]
 
-    if "date" not in df.columns or "quantity" not in df.columns:
-        raise HTTPException(500, "Dataset must include 'date' and 'quantity'")
+    finally:
+        await client.close()
 
-    # Clean & standardize
-    df = clean_numeric(df, "quantity")
-    df = fill_missing_values(df)
+    if not rows:
+        raise HTTPException(404, "No sales history found")
 
-    df["date"] = pd.to_datetime(df["date"])
+    df = pd.DataFrame(rows)
+    df["date"] = pd.to_datetime(df["date"], errors="coerce")
+    df = df.dropna(subset=["date", "quantity"])
     df = df.sort_values("date").reset_index(drop=True)
 
-    return df
-
-
-# ============================================================
-# TREND ANALYSIS
-# ============================================================
-def _compute_trend(pred: List[float]) -> str:
-    if len(pred) < 2:
-        return "stable"
-
-    start, end = pred[0], pred[-1]
-
-    if end > start * 1.05:
-        return "upward"
-    if end < start * 0.95:
-        return "downward"
-    return "stable"
-
-
-# ============================================================
-# SUMMARY (Shopify-style)
-# ============================================================
-def _shopify_summary(
-    pred: List[float],
-    dates: List[str],
-    period_label: str,      # ðŸ‘ˆ ajoutÃ© ici
-) -> Dict[str, Any]:
+    df = clean_numeric(df, "quantity")
+    df = fill_missing_values(df)
 
-    if not pred:
-        return {
-            "total": 0.0,
-            "daily_average": 0.0,
-            "peak_value": 0.0,
-            "peak_day": None,
-            "trend": "stable",
-            "period_label": period_label,   # ðŸ‘ˆ ajoutÃ© ici aussi
-        }
-
-
-    arr = np.array(pred, dtype=float)
-    peak_idx = int(arr.argmax())
-
-    return {
-        "total": float(arr.sum()),
-        "daily_average": float(arr.mean()),
-        "peak_value": float(arr[peak_idx]),
-        "peak_day": dates[peak_idx],
-        "trend": _compute_trend(pred),\
-        "period_label": period_label,
-    }
+    cutoff = df["date"].max() - timedelta(days=DEFAULT_HISTORY_DAYS)
+    return df[df["date"] >= cutoff].reset_index(drop=True)
 
 
-# ============================================================
-# FORECAST (PRODUCT OR GLOBAL)
-# ============================================================
+# ------------------------------------------------------------
+# FORECAST â€” Maintenant accepte SKU ou NAME
+# ------------------------------------------------------------
 async def forecast_sales(
-    product_id: Optional[int],
-    history_days: int,
-    forecast_days: int,
-    period: AnalyticsPeriod,
-    token: Optional[str],
+    scope: ForecastScope,
+    product_sku: Optional[str] = None,
+    product_name: Optional[str] = None,
+    forecast_days: int = 7,
+    period: AnalyticsPeriod = AnalyticsPeriod.daily,
+    token: Optional[str] = None,
 ) -> Dict[str, Any]:
 
-    cache_key = f"ml:forecast:{product_id}:{history_days}:{forecast_days}:{ML_ENV}"
-    cached = get_cache(cache_key)
-    if cached:
-        return json.loads(cached) 
-
     if forecast_days <= 0:
         raise HTTPException(400, "forecast_days must be > 0")
 
-    df = await _load_sales_history(product_id, history_days, token)
+    identifier = product_sku or product_name or "global"
+    cache_key = f"ml:forecast:{scope.value}:{identifier}:{forecast_days}:{period.value}"
+    cached = get_cache(cache_key)
+    if cached:
+        return json.loads(cached)
 
-    # Prepare regression inputs
-    X, y, df_proc = prepare_regression_features(df)
-    if len(X) < 2:
-        raise HTTPException(400, "Not enough historical data to train model")
+    df = await _load_sales_history(scope, product_sku, product_name, token)
+    if len(df) < 2:
+        raise HTTPException(400, "Not enough historical data")
 
-    model = LinearRegression()
-    model.fit(X, y)
+    X, y, dfp = prepare_regression_features(df)
+    model = LinearRegression().fit(X, y)
 
-    # Predict next N days
-    last_idx = int(df_proc["day_index"].iloc[-1])
+    last_idx = int(dfp["day_index"].iloc[-1])
     future_idx = np.arange(last_idx + 1, last_idx + 1 + forecast_days).reshape(-1, 1)
 
-    predictions = np.round(model.predict(future_idx).astype(float), 2).tolist()
+    preds = model.predict(future_idx).clip(0).round(2).tolist()
 
-    last_date = df_proc["date"].iloc[-1]
-    future_dates = [
+    last_date = dfp["date"].iloc[-1]
+    dates = [
         (last_date + timedelta(days=i)).strftime("%Y-%m-%d")
         for i in range(1, forecast_days + 1)
     ]
 
-    summary = _shopify_summary(
-    predictions,
-    future_dates,
-    period.value
-)
+    trend = (
+        "upward" if preds[-1] > preds[0]
+        else "downward" if preds[-1] < preds[0]
+        else "stable"
+    )
 
     result = {
-        "product_id": product_id,
-        "dates": future_dates,
-        "predictions": predictions,
-        "summary": summary,
+        "scope": scope.value,
+        "product_id": None,
+        "product_sku": product_sku,
+        "dates": dates,
+        "predictions": preds,
+        "summary": {
+            "total": float(sum(preds)),
+            "daily_average": float(np.mean(preds)),
+            "peak_value": float(max(preds)),
+            "peak_day": dates[int(np.argmax(preds))],
+            "trend": trend,
+            "period_label": period.value,
+        },
     }
 
-    json_str = json.dumps(result, default=str)
-    set_cache(cache_key, json_str, TTL_ANALYTICS)
-
+    set_cache(cache_key, json.dumps(result), TTL_ANALYTICS)
     return result
 
-# ============================================================
-# ANOMALY DETECTION (PRODUCT OR GLOBAL)
-# ============================================================
-def _zscore_anomalies(df: pd.DataFrame) -> List[Dict[str, Any]]:
-    values = df["quantity"].astype(float)
-    mean, std = values.mean(), values.std()
-
-    if std == 0 or np.isnan(std):
-        return []
-
-    anomalies = []
-    zscores = (values - mean) / std
-
-    for idx, z in zscores.items():
-        if abs(z) < 3:
-            continue
-
-        raw_date = df["date"].iloc[idx]
-        date = raw_date.strftime("%Y-%m-%d")
-
-        value = float(values.iloc[idx])
-
-        if value == 0:
-            atype = "ZERO_DROP"
-        elif z > 0:
-            atype = "HIGH_SPIKE"
-        else:
-            atype = "VARIANCE_SHIFT"
-
-        explanation = {
-            "HIGH_SPIKE": "Unusually high sales spike.",
-            "ZERO_DROP": "Sales dropped to zero unexpectedly.",
-            "VARIANCE_SHIFT": "Unusual decrease in sales pattern.",
-        }[atype]
 
-        anomalies.append({
-            "date": date,
-            "value": value,
-            "score": round(float(z), 3),
-            "severity": "high" if abs(z) >= 4 else "medium",
-            "type": atype,
-            "explanation": explanation,
-        })
-
-    return anomalies
-
-
-# ============================================================
-# PUBLIC â€” ANOMALY DETECTION
-# ============================================================
+# ------------------------------------------------------------
+# ANOMALIES â€” Support SKU ou NAME
+# ------------------------------------------------------------
 async def detect_anomalies(
-    product_id: Optional[int],
-    history_days: int,
-    period: AnalyticsPeriod,
-    token: Optional[str],
+    scope: ForecastScope,
+    product_sku: Optional[str] = None,
+    product_name: Optional[str] = None,
+    period: AnalyticsPeriod = AnalyticsPeriod.daily,
+    token: Optional[str] = None,
 ) -> Dict[str, Any]:
 
-    cache_key = f"ml:anomalies:{product_id}:{history_days}:{period.value}:{ML_ENV}"
+    identifier = product_sku or product_name or "global"
+    cache_key = f"ml:anomalies:{scope.value}:{identifier}:{period.value}"
     cached = get_cache(cache_key)
     if cached:
-        return json.loads(cached) 
-    df = await _load_sales_history(product_id, history_days, token)
-    anomalies = _zscore_anomalies(df)
+        return json.loads(cached)
+
+    df = await _load_sales_history(scope, product_sku, product_name, token)
+
+    values = df["quantity"].astype(float)
+    mean, std = values.mean(), values.std()
+
+    anomalies = []
+    if std and not np.isnan(std):
+        z = (values - mean) / std
+        for i, score in z.items():
+            if abs(score) >= 3:
+                anomalies.append({
+                    "date": df["date"].iloc[i].strftime("%Y-%m-%d"),
+                    "value": float(values.iloc[i]),
+                    "score": round(float(score), 3),
+                    "severity": "high" if abs(score) >= 4 else "medium",
+                    "type": "HIGH_SPIKE" if score > 0 else "DROP",
+                    "explanation": "Z-score anomaly detected",
+                })
 
     result = {
-        "product_id": product_id,
+        "scope": scope.value,
+        "product_id": None,
+        "product_sku": product_sku,
         "period": period.value,
         "count": len(anomalies),
         "anomalies": anomalies,
     }
 
-    json_str = json.dumps(result, default=str)
-    set_cache(cache_key, json_str, TTL_ANALYTICS)
-
-    return result
+    set_cache(cache_key, json.dumps(result), TTL_ANALYTICS)
+    return result
\ No newline at end of file
diff --git a/backend-python/src/services/report_service.py b/backend-python/src/services/report_service.py
index 4d2bd93..7ff9630 100644
--- a/backend-python/src/services/report_service.py
+++ b/backend-python/src/services/report_service.py
@@ -3,7 +3,10 @@ from __future__ import annotations
 
 import io
 from datetime import datetime
-from typing import Literal, Tuple, Optional
+from typing import Literal, Tuple, Optional,Union
+from pathlib import Path
+
+from src.models.report import ReportRequest
 
 from fastapi import HTTPException
 
@@ -706,38 +709,113 @@ def _generate_sales_excel(
 # =====================================================================
 # PUBLIC API
 # =====================================================================
+REPORTS_DIR = Path("reports/generated")
+
+
+def _save_report_to_disk(content: bytes, filename: str) -> str:
+    REPORTS_DIR.mkdir(parents=True, exist_ok=True)
+
+    file_path = REPORTS_DIR / filename
+    file_path.write_bytes(content)
+
+    return str(file_path)
+
+def get_latest_report(
+    report_type: ReportType,
+    fmt: ReportFormat,
+) -> Path:
+    pattern = f"analytics_{report_type}_*_.{ 'pdf' if fmt == 'pdf' else 'xlsx' }"
+
+    files = sorted(
+        REPORTS_DIR.glob(pattern),
+        key=lambda p: p.stat().st_mtime,
+        reverse=True,
+    )
+
+    if not files:
+        raise FileNotFoundError("No generated report found")
+
+    return files[0]
+
+def find_last_report_on_disk(
+    report_type: str,
+    fmt: str,
+) -> Optional[Path]:
+    if not REPORTS_DIR.exists():
+        return None
+
+    files = sorted(
+        REPORTS_DIR.glob(f"analytics_{report_type}_*.{fmt}"),
+        key=lambda f: f.stat().st_mtime,
+        reverse=True,
+    )
+
+    return files[0] if files else None
+
+
 
 async def generate_report(
     report_type: ReportType,
     fmt: ReportFormat,
     period: AnalyticsPeriod,
     token: Optional[str],
-) -> Tuple[bytes, str, str]:
+    save_to_disk: bool = False,
+) -> Union[Tuple[bytes, str, str], dict]:
     """
-    Generate a premium analytics report (PDF or Excel) based solely on
-    analytics_service (no direct calls to Java).
+    Core report generator.
+
+    Modes:
+    - save_to_disk = False â†’ API download (bytes)
+    - save_to_disk = True  â†’ Scheduler (disk)
 
     Returns:
-      (content_bytes, filename, media_type)
+    - API mode  â†’ (content, filename, media_type)
+    - Disk mode â†’ { file_path, filename, generated_at }
     """
 
-    # 1. Charger les analytics
+    # --------------------------------------------------
+    # 1. LOAD ANALYTICS
+    # --------------------------------------------------
     sales = await compute_sales_analytics(period=period, token=token)
     stock = await compute_stock_analytics(period=period, token=token)
 
     include_stock = report_type in ("combined", "stock")
 
-    # 2. GÃ©nÃ©ration suivant le format
+    # --------------------------------------------------
+    # 2. GENERATE CONTENT
+    # --------------------------------------------------
     if fmt == "pdf":
-        content = _generate_sales_pdf(sales=sales, stock=stock if include_stock else None)
-        filename = f"analytics_{report_type}_{_period_label(period)}_{_now_label()}.pdf"
+        content = _generate_sales_pdf(
+            sales=sales,
+            stock=stock if include_stock else None,
+        )
+        filename = f"analytics_{report_type}_{period.value}_{_now_label()}.pdf"
         media_type = "application/pdf"
-        return content, filename, media_type
 
-    if fmt == "excel":
-        content = _generate_sales_excel(sales=sales, stock=stock if include_stock else None)
-        filename = f"analytics_{report_type}_{_period_label(period)}_{_now_label()}.xlsx"
-        media_type = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
-        return content, filename, media_type
+    elif fmt == "excel":
+        content = _generate_sales_excel(
+            sales=sales,
+            stock=stock if include_stock else None,
+        )
+        filename = f"analytics_{report_type}_{period.value}_{_now_label()}.xlsx"
+        media_type = (
+            "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
+        )
 
-    raise HTTPException(400, f"Unsupported report format: {fmt}")
+    else:
+        raise HTTPException(400, f"Unsupported report format: {fmt}")
+
+    # --------------------------------------------------
+    # 3. SAVE OR RETURN
+    # --------------------------------------------------
+    if save_to_disk:
+        file_path = _save_report_to_disk(content, filename)
+
+        return {
+            "status": "success",
+            "file_path": file_path,
+            "filename": filename,
+            "generated_at": datetime.utcnow().isoformat(),
+        }
+
+    return content, filename, media_type
\ No newline at end of file
diff --git a/backend-python/src/services/scheduled_reports_service.py b/backend-python/src/services/scheduled_reports_service.py
new file mode 100644
index 0000000..c93a771
--- /dev/null
+++ b/backend-python/src/services/scheduled_reports_service.py
@@ -0,0 +1,32 @@
+import logging
+from datetime import datetime
+
+from src.models.report import ReportRequest
+from src.services.report_service import generate_report_internal
+
+logger = logging.getLogger(__name__)
+
+
+async def generate_daily_sales_report():
+    """
+    Job APScheduler
+    GÃ©nÃ¨re automatiquement le rapport SALES PDF
+    """
+
+    logger.info("ðŸ•› Starting scheduled daily sales report")
+
+    req = ReportRequest(
+        report_type="sales",
+        format="pdf",
+        period="daily"
+    )
+
+    # âš ï¸ fonction mÃ©tier, PAS endpoint FastAPI
+    result = await generate_report_internal(req)
+
+    logger.info(
+        "âœ… Daily sales report generated: %s",
+        result.get("file_path")
+    )
+
+    return result
diff --git a/backend-python/tests/test2.py b/backend-python/tests/test2.py
index 2a0d8f3..b6a21b0 100644
--- a/backend-python/tests/test2.py
+++ b/backend-python/tests/test2.py
@@ -1,20 +1,107 @@
-import httpx
-
-# Test avec des endpoints qui existent
-endpoints = [
-    "http://10.131.175.145:8080/api/v1/products",
-    "http://10.131.175.145:8080/api/v1/inventory",
-    "http://10.131.175.145:8080/api/v1/sales",
-    "http://10.131.175.145:8080/api/v1/auth/login"
-    "http://10.131.175.145:8080/actuator/health"
-]
-
-for url in endpoints:
+# test_java_sales_client.py
+import asyncio
+import os
+from dotenv import load_dotenv
+
+from src.clients.java_sales_client import JavaSalesClient
+from src.api.settings import DEV_MODE
+
+# --------------------------------------------------
+# ENV
+# --------------------------------------------------
+load_dotenv()
+
+
+async def test_java_sales_client():
+    print("\n" + "=" * 60)
+    print("ðŸ§ª TEST â€” JavaSalesClient (RAW DATA)")
+    print("=" * 60)
+
+    print(f"JAVA_API_URL = {os.getenv('JAVA_API_URL')}")
+    print(f"DEV_MODE     = {DEV_MODE}")
+
+    token = os.getenv("JAVA_API_TOKEN")  # optionnel
+    client = JavaSalesClient(token=token)
+
     try:
-        print(f"\nTesting: {url}")
-        r = httpx.get(url, timeout=3)
-        print(f"âœ… Response: {r.status_code}")
-        if r.status_code == 401:
-            print("   (401 is OK - needs authentication)")
-    except Exception as e:
-        print(f"âŒ Error: {type(e).__name__}")
\ No newline at end of file
+        # --------------------------------------------------
+        # 1ï¸âƒ£ RECENT SALES
+        # --------------------------------------------------
+        print("\nðŸ“Œ 1. get_recent_sales()")
+
+        try:
+            recent_sales = await client.get_recent_sales()
+            print(f"âœ… OK â€” {len(recent_sales)} ventes rÃ©cupÃ©rÃ©es")
+
+            if recent_sales:
+                s = recent_sales[0]
+                print("   Exemple vente :")
+                print(f"   - saleId     = {s.saleId}")
+                print(f"   - saleDate   = {s.saleDate}")
+                print(f"   - totalAmount = {s.totalAmount}")
+                print(f"   - items      = {len(s.items)}")
+        except Exception as e:
+            print(f"âŒ ERREUR recent_sales: {e}")
+
+        # --------------------------------------------------
+        # 2ï¸âƒ£ SALES HISTORY (GLOBAL)
+        # --------------------------------------------------
+        print("\nðŸ“Œ 2. get_sales_history()")
+
+        try:
+            history = await client.get_sales_history()
+            print(f"âœ… OK â€” {len(history)} ventes dans l'historique")
+
+            if history:
+                s = history[0]
+                print("   Exemple historique :")
+                print(f"   - saleId     = {s.saleId}")
+                print(f"   - saleDate   = {s.saleDate}")
+                print(f"   - totalAmount = {s.totalAmount}")
+        except Exception as e:
+            print(f"âŒ ERREUR history: {e}")
+
+        # --------------------------------------------------
+        # 3ï¸âƒ£ SALES HISTORY BY SKU (ML PRODUCT)
+        # --------------------------------------------------
+        print("\nðŸ“Œ 3. get_sales_history_by_sku('SUGAR-003')")
+
+        try:
+            sku_history = await client.get_sales_history_by_sku("SUGAR-003")
+            print(f"âœ… OK â€” {len(sku_history)} points pour ce SKU")
+
+            if sku_history:
+                p = sku_history[0]
+                print("   Exemple point ML :")
+                print(f"   - date     = {p.date}")
+                print(f"   - quantity = {p.quantity}")
+        except Exception as e:
+            print(f"âš ï¸ SKU non trouvÃ© ou vide: {e}")
+
+        # --------------------------------------------------
+        # 4ï¸âƒ£ SALES HISTORY BY NAME (OPTION UI)
+        # --------------------------------------------------
+        print("\nðŸ“Œ 4. get_sales_history_by_name('Sugar')")
+
+        try:
+            name_history = await client.get_sales_history_by_name("Sugar")
+            print(f"âœ… OK â€” {len(name_history)} points pour ce produit")
+
+            if name_history:
+                p = name_history[0]
+                print("   Exemple point :")
+                print(f"   - date     = {p.date}")
+                print(f"   - quantity = {p.quantity}")
+        except Exception as e:
+            print(f"âš ï¸ Name non trouvÃ© ou vide: {e}")
+
+    finally:
+        await client.close()
+
+    print("\n" + "=" * 60)
+    print("âœ… TEST TERMINÃ‰")
+    print("=" * 60)
+
+
+if __name__ == "__main__":
+    asyncio.run(test_java_sales_client())
diff --git a/salesflow-frontend/.env.development b/salesflow-frontend/.env.development
new file mode 100644
index 0000000..81fbc7c
--- /dev/null
+++ b/salesflow-frontend/.env.development
@@ -0,0 +1 @@
+VITE_ENV=dev
diff --git a/salesflow-frontend/.env.production b/salesflow-frontend/.env.production
new file mode 100644
index 0000000..272e1f2
--- /dev/null
+++ b/salesflow-frontend/.env.production
@@ -0,0 +1 @@
+VITE_ENV=prod
diff --git a/salesflow-frontend/package-lock.json b/salesflow-frontend/package-lock.json
index fb8e99f..470257f 100644
--- a/salesflow-frontend/package-lock.json
+++ b/salesflow-frontend/package-lock.json
@@ -15,6 +15,7 @@
         "react": "^19.2.0",
         "react-dom": "^19.2.0",
         "react-dropzone": "^14.3.8",
+        "react-hot-toast": "^2.6.0",
         "react-router-dom": "^7.9.6",
         "recharts": "^3.5.1"
       },
@@ -2381,7 +2382,6 @@
       "version": "3.2.3",
       "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.2.3.tgz",
       "integrity": "sha512-z1HGKcYy2xA8AGQfwrn0PAy+PB7X/GSj3UVJW9qKyn43xWa+gl5nXmU4qqLMRzWVLFC8KusUX8T/0kCiOYpAIQ==",
-      "devOptional": true,
       "license": "MIT"
     },
     "node_modules/d3-array": {
@@ -3211,6 +3211,15 @@
         "url": "https://github.com/sponsors/sindresorhus"
       }
     },
+    "node_modules/goober": {
+      "version": "2.1.18",
+      "resolved": "https://registry.npmjs.org/goober/-/goober-2.1.18.tgz",
+      "integrity": "sha512-2vFqsaDVIT9Gz7N6kAL++pLpp41l3PfDuusHcjnGLfR6+huZkl6ziX+zgVC3ZxpqWhzH6pyDdGrCeDhMIvwaxw==",
+      "license": "MIT",
+      "peerDependencies": {
+        "csstype": "^3.0.10"
+      }
+    },
     "node_modules/gopd": {
       "version": "1.2.0",
       "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
@@ -4166,6 +4175,23 @@
         "react": ">= 16.8 || 18.0.0"
       }
     },
+    "node_modules/react-hot-toast": {
+      "version": "2.6.0",
+      "resolved": "https://registry.npmjs.org/react-hot-toast/-/react-hot-toast-2.6.0.tgz",
+      "integrity": "sha512-bH+2EBMZ4sdyou/DPrfgIouFpcRLCJ+HoCA32UoAYHn6T3Ur5yfcDCeSr5mwldl6pFOsiocmrXMuoCJ1vV8bWg==",
+      "license": "MIT",
+      "dependencies": {
+        "csstype": "^3.1.3",
+        "goober": "^2.1.16"
+      },
+      "engines": {
+        "node": ">=10"
+      },
+      "peerDependencies": {
+        "react": ">=16",
+        "react-dom": ">=16"
+      }
+    },
     "node_modules/react-is": {
       "version": "19.2.0",
       "resolved": "https://registry.npmjs.org/react-is/-/react-is-19.2.0.tgz",
diff --git a/salesflow-frontend/package.json b/salesflow-frontend/package.json
index f7f5731..bd66818 100644
--- a/salesflow-frontend/package.json
+++ b/salesflow-frontend/package.json
@@ -17,6 +17,7 @@
     "react": "^19.2.0",
     "react-dom": "^19.2.0",
     "react-dropzone": "^14.3.8",
+    "react-hot-toast": "^2.6.0",
     "react-router-dom": "^7.9.6",
     "recharts": "^3.5.1"
   },
diff --git a/salesflow-frontend/src/components/analytics/ReportsExport.tsx b/salesflow-frontend/src/components/analytics/ReportsExport.tsx
index ccf80f0..5238537 100644
--- a/salesflow-frontend/src/components/analytics/ReportsExport.tsx
+++ b/salesflow-frontend/src/components/analytics/ReportsExport.tsx
@@ -1,16 +1,32 @@
 import { useState } from "react";
 import { reportsAPI } from "../../services/reportsAPI";
-import type { ReportFormat, ReportType, ReportPeriod } from "../../types/reports";
+import type {
+  ReportFormat,
+  ReportType,
+  ReportPeriod,
+} from "../../types/reports";
 
 export default function ReportsExport() {
+  // -----------------------------
+  // COMMON STATE
+  // -----------------------------
   const [format, setFormat] = useState<ReportFormat>("pdf");
   const [reportType, setReportType] = useState<ReportType>("combined");
   const [period, setPeriod] = useState<ReportPeriod>("daily");
   const [loading, setLoading] = useState(false);
 
-  const generate = async () => {
-    setLoading(true);
+  // -----------------------------
+  // SCHEDULER STATE
+  // -----------------------------
+  const [hour, setHour] = useState<number>(0);
+  const [minute, setMinute] = useState<number>(0);
+  const [scheduling, setScheduling] = useState(false);
 
+  // =====================================================
+  // MANUAL GENERATION
+  // =====================================================
+  const generateNow = async () => {
+    setLoading(true);
     try {
       const res = await reportsAPI.generate({
         format,
@@ -28,56 +44,111 @@ export default function ReportsExport() {
 
       window.URL.revokeObjectURL(url);
     } catch (err) {
-      console.error("âŒ Report generation failed", err);
-      alert("Error generating report. Check console.");
+      alert("Error generating report.");
+    } finally {
+      setLoading(false);
     }
+  };
+
+  // =====================================================
+  // SCHEDULE REPORT
+  // =====================================================
+  const scheduleReport = async () => {
+    setScheduling(true);
+    try {
+      const res = await reportsAPI.schedule({
+        report_type: reportType,
+        format,
+        hour,
+        minute,
+      });
 
-    setLoading(false);
+      alert(`ðŸ“… Report scheduled at ${hour}:${minute} (job ${res.job_id})`);
+    } catch {
+      alert("Error scheduling report.");
+    } finally {
+      setScheduling(false);
+    }
   };
 
+  // =====================================================
+  // DOWNLOAD LAST SCHEDULED REPORT
+  // =====================================================
+  const downloadLastScheduled = async () => {
+    setLoading(true);
+    try {
+      const res = await reportsAPI.downloadLastScheduled(
+        reportType,
+        format
+      );
+
+      const blob = new Blob([res.file], { type: res.media_type });
+      const url = window.URL.createObjectURL(blob);
+
+      const a = document.createElement("a");
+      a.href = url;
+      a.download = res.filename;
+      a.click();
+
+      window.URL.revokeObjectURL(url);
+    } catch {
+      alert("No scheduled report available yet.");
+    } finally {
+      setLoading(false);
+    }
+  };
+
+  // =====================================================
+  // UI
+  // =====================================================
   return (
-    <div className="bg-white shadow p-4 rounded mt-8">
-      <h3 className="text-xl font-bold mb-3">ðŸ“„ Export Reports</h3>
-
-      <div className="grid grid-cols-3 gap-4">
-        
-        {/* FORMAT */}
-        <select
-          value={format}
-          onChange={(e) => setFormat(e.target.value as ReportFormat)}
-        >
+    <div className="bg-white shadow p-6 rounded mt-8 max-w-xl">
+      <h3 className="text-xl font-bold mb-4">ðŸ“„ Reports</h3>
+
+      {/* OPTIONS */}
+      <div className="grid grid-cols-3 gap-4 mb-4">
+        <select value={format} onChange={(e) => setFormat(e.target.value as ReportFormat)}>
           <option value="pdf">PDF</option>
           <option value="excel">Excel</option>
         </select>
 
-        {/* TYPE */}
-        <select
-          value={reportType}
-          onChange={(e) => setReportType(e.target.value as ReportType)}
-        >
-          <option value="sales">Sales only</option>
-          <option value="stock">Stock only</option>
+        <select value={reportType} onChange={(e) => setReportType(e.target.value as ReportType)}>
+          <option value="sales">Sales</option>
+          <option value="stock">Stock</option>
           <option value="combined">Sales + Stock</option>
         </select>
 
-        {/* PERIOD */}
-        <select
-          value={period}
-          onChange={(e) => setPeriod(e.target.value as ReportPeriod)}
-        >
+        <select value={period} onChange={(e) => setPeriod(e.target.value as ReportPeriod)}>
           <option value="daily">Today</option>
           <option value="weekly">Last 7 days</option>
           <option value="monthly">This month</option>
         </select>
       </div>
 
-      <button
-        onClick={generate}
-        className="btn-primary mt-4"
-        disabled={loading}
-      >
-        {loading ? "Generating..." : "Generate Report"}
+      {/* MANUAL */}
+      <button onClick={generateNow} className="btn-primary mb-4" disabled={loading}>
+        {loading ? "Generating..." : "Generate now"}
       </button>
+
+      {/* SCHEDULE */}
+      <div className="border-t pt-4">
+        <h4 className="font-semibold mb-2">â° Schedule automatic report</h4>
+        <div className="flex gap-2 mb-2">
+          <input type="number" min={0} max={23} value={hour} onChange={(e) => setHour(+e.target.value)} />
+          <input type="number" min={0} max={59} value={minute} onChange={(e) => setMinute(+e.target.value)} />
+        </div>
+        <button onClick={scheduleReport} className="btn-secondary" disabled={scheduling}>
+          {scheduling ? "Scheduling..." : "Schedule"}
+        </button>
+      </div>
+
+      {/* DOWNLOAD */}
+      <div className="border-t pt-4 mt-4">
+        <h4 className="font-semibold mb-2">ðŸ“¥ Last scheduled report</h4>
+        <button onClick={downloadLastScheduled} className="btn-outline" disabled={loading}>
+          {loading ? "Downloading..." : "Download last"}
+        </button>
+      </div>
     </div>
   );
 }
diff --git a/salesflow-frontend/src/pages/Analytics.tsx b/salesflow-frontend/src/pages/Analytics.tsx
index e0fc3d7..d0c4e17 100644
--- a/salesflow-frontend/src/pages/Analytics.tsx
+++ b/salesflow-frontend/src/pages/Analytics.tsx
@@ -1,34 +1,79 @@
+// src/pages/Analytics.tsx
 import { useState, useEffect } from "react";
+import { motion } from "framer-motion";
+import {
+  Calendar,
+  Package,
+  User,
+  Menu,
+  TrendingUp,
+  DollarSign,
+  ShoppingCart,
+  Package as PackageIcon,
+} from "lucide-react";
+import {
+  AreaChart,
+  Area,
+  XAxis,
+  YAxis,
+  CartesianGrid,
+  Tooltip,
+  ResponsiveContainer,
+} from "recharts";
+
 import { analyticsAPI } from "../services/analyticsAPI";
 import ReportsExport from "../components/analytics/ReportsExport";
-
 import type {
   SalesAnalyticsResponse,
   StockAnalyticsResponse,
   AnalyticsPeriod,
 } from "../types/analytics";
 
-import {
-  LineChart,
-  Line,
-  XAxis,
-  YAxis,
-  Tooltip,
-  ResponsiveContainer,
-  CartesianGrid,
-} from "recharts";
+/* -----------------------------------------------------
+   Helpers
+----------------------------------------------------- */
+function stockStyle(status: string) {
+  switch (status) {
+    case "OUT_OF_STOCK":
+      return {
+        bg: "bg-red-50",
+        border: "border-red-200",
+        badge: "bg-red-600 text-white",
+        icon: "ðŸš«",
+      };
+    case "LOW_STOCK":
+      return {
+        bg: "bg-orange-50",
+        border: "border-orange-200",
+        badge: "bg-orange-500 text-white",
+        icon: "âš ï¸",
+      };
+    case "DEAD_STOCK":
+      return {
+        bg: "bg-gray-100",
+        border: "border-gray-300",
+        badge: "bg-gray-600 text-white",
+        icon: "â˜ ï¸",
+      };
+    default:
+      return {
+        bg: "bg-green-50",
+        border: "border-green-200",
+        badge: "bg-green-600 text-white",
+        icon: "âœ…",
+      };
+  }
+}
 
+/* -----------------------------------------------------
+   Page
+----------------------------------------------------- */
 export default function Analytics() {
-  const [period, setPeriod] = useState<AnalyticsPeriod>("weekly");
-
+  const [period, setPeriod] = useState<AnalyticsPeriod>("daily");
   const [sales, setSales] = useState<SalesAnalyticsResponse | null>(null);
   const [stock, setStock] = useState<StockAnalyticsResponse | null>(null);
-
   const [loading, setLoading] = useState(true);
 
-  // -------------------------------
-  // LOAD ANALYTICS
-  // -------------------------------
   const load = async () => {
     setLoading(true);
     try {
@@ -36,7 +81,6 @@ export default function Analytics() {
         analyticsAPI.getSalesAnalytics(period),
         analyticsAPI.getStockAnalytics(period),
       ]);
-
       setSales(s);
       setStock(st);
     } catch (e) {
@@ -52,136 +96,328 @@ export default function Analytics() {
 
   if (loading || !sales || !stock) {
     return (
-      <div className="p-10 text-center text-gray-600 text-lg">
-        Loading analyticsâ€¦
+      <div className="min-h-screen flex items-center justify-center bg-gray-50">
+        <div className="text-center">
+          <div className="inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600" />
+          <p className="mt-6 text-xl text-gray-600">Loading analyticsâ€¦</p>
+        </div>
       </div>
     );
   }
 
   const k = sales.kpis;
+  const sk = stock.kpis;
 
   return (
-    <div className="p-6 space-y-10">
+    <div className="min-h-screen bg-gray-50">
+      {/* HEADER */}
+      <header className="bg-white shadow-sm border-b">
+        <div className="px-6 py-4 flex items-center justify-between">
+          <div className="flex items-center gap-4">
+            <button className="lg:hidden">
+              <Menu className="w-6 h-6" />
+            </button>
+            <div className="flex items-center gap-3">
+              <div className="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-xl">
+                S
+              </div>
+              <h1 className="text-2xl font-bold text-gray-900">SalesFlow</h1>
+            </div>
+          </div>
+          <div className="flex items-center gap-4">
+            <div className="px-4 py-2 bg-blue-50 rounded-lg text-sm font-medium flex items-center gap-2">
+              <Calendar className="w-4 h-4" />
+              {sales.period_label}
+            </div>
+            <div className="w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center">
+              <User className="w-6 h-6 text-gray-600" />
+            </div>
+          </div>
+        </div>
+      </header>
+
+      <div className="p-6 max-w-7xl mx-auto space-y-10">
+        {/* SALES KPI â€” BEAUTIFUL GRADIENT CARDS */}
+        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
+          <KPICard
+            icon={<DollarSign className="w-8 h-8" />}
+            title="Total Revenue"
+            value={`$${k.total_revenue.toLocaleString(undefined, { minimumFractionDigits: 2 })}`}
+            gradient="from-blue-500 to-blue-600"
+          />
+          <KPICard
+            icon={<ShoppingCart className="w-8 h-8" />}
+            title="Transactions"
+            value={k.total_transactions.toLocaleString()}
+            gradient="from-purple-500 to-purple-600"
+          />
+          <KPICard
+            icon={<PackageIcon className="w-8 h-8" />}
+            title="Units Sold"
+            value={k.total_quantity.toLocaleString()}
+            gradient="from-orange-500 to-amber-500"
+          />
+          <KPICard
+            icon={<TrendingUp className="w-8 h-8" />}
+            title="Average Ticket"
+            value={`$${k.average_ticket.toLocaleString(undefined, { minimumFractionDigits: 2 })}`}
+            gradient="from-emerald-500 to-teal-600"
+          />
+        </div>
 
-      {/* ---------------- PERIOD SELECT ---------------- */}
-      <div className="flex justify-between items-center">
-        <h1 className="text-3xl font-bold">Analytics</h1>
+        {/* STOCK KPI â€” COMPACT & ELEGANT */}
+        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6">
+          <KPICardSmall title="Stock Value" value={`$${sk.total_stock_value.toLocaleString()}`} icon="ðŸ’°" />
+          <KPICardSmall title="Out of Stock" value={sk.out_of_stock_count.toString()} icon="ðŸš«" />
+          <KPICardSmall title="Low Stock" value={sk.low_stock_count.toString()} icon="âš ï¸" />
+          <KPICardSmall title="Urgent Reorder" value={sk.urgent_reorder_count.toString()} icon="ðŸ”¥" />
+          <KPICardSmall title="Dead Stock" value={sk.dead_stock_count.toString()} icon="â˜ ï¸" />
+          <KPICardSmall title="Low Stock %" value={`${sk.low_stock_ratio}%`} icon="ðŸ“‰" />
+        </div>
 
-        <select
-          value={period}
-          onChange={(e) => setPeriod(e.target.value as AnalyticsPeriod)}
-          className="border rounded-lg p-2 shadow-sm"
+        {/* SALES TREND â€” MODERN AREA CHART */}
+        <motion.div
+          initial={{ opacity: 0, y: 20 }}
+          animate={{ opacity: 1, y: 0 }}
+          className="bg-white rounded-2xl shadow-xl border border-gray-100 p-8"
         >
-          <option value="daily">Today</option>
-          <option value="weekly">Last 7 Days</option>
-          <option value="monthly">This Month</option>
-          <option value="quarterly">Last 90 Days</option>
-        </select>
-      </div>
+          <div className="flex justify-between items-center mb-8">
+            <h2 className="text-2xl font-bold text-gray-800">Sales Trends</h2>
+            <select
+              value={period}
+              onChange={(e) => setPeriod(e.target.value as AnalyticsPeriod)}
+              className="px-5 py-3 bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl text-sm font-medium border border-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500"
+            >
+              <option value="daily">Today</option>
+              <option value="weekly">Last 7 Days</option>
+              <option value="monthly">This Month</option>
+              <option value="quarterly">Last 90 Days</option>
+            </select>
+          </div>
 
-      {/* ---------------- KPI CARDS ---------------- */}
-      <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
+          {sales.daily.length === 0 ? (
+            <div className="text-center py-20 text-gray-500">
+              <TrendingUp className="w-20 h-20 mx-auto mb-6 text-gray-300" />
+              <p className="text-lg font-medium">No sales data for this period</p>
+            </div>
+          ) : (
+            <div className="h-96">
+              <ResponsiveContainer width="100%" height="100%">
+                <AreaChart data={sales.daily}>
+                  <defs>
+                    <linearGradient id="salesGradient" x1="0" y1="0" x2="0" y2="1">
+                      <stop offset="0%" stopColor="#3b82f6" stopOpacity={0.9} />
+                      <stop offset="50%" stopColor="#60a5fa" stopOpacity={0.5} />
+                      <stop offset="100%" stopColor="#93c5fd" stopOpacity={0.1} />
+                    </linearGradient>
+                  </defs>
+                  <CartesianGrid strokeDasharray="4 4" stroke="#f1f5f9" />
+                  <XAxis dataKey="date" stroke="#64748b" fontSize={12} />
+                  <YAxis stroke="#64748b" fontSize={12} />
+                  <Tooltip
+                    contentStyle={{
+                      backgroundColor: "rgba(255, 255, 255, 0.95)",
+                      border: "1px solid #e2e8f0",
+                      borderRadius: "12px",
+                      boxShadow: "0 4px 12px rgba(0,0,0,0.1)",
+                    }}
+                  />
+                  <Area
+                    type="monotone"
+                    dataKey="total_revenue"
+                    stroke="#2563eb"
+                    strokeWidth={4}
+                    fill="url(#salesGradient)"
+                    dot={{ fill: "#2563eb", r: 5 }}
+                    activeDot={{ r: 8 }}
+                  />
+                </AreaChart>
+              </ResponsiveContainer>
+            </div>
+          )}
+        </motion.div>
 
-        <KPI title="Revenue" value={`$${k.total_revenue}`} />
-        <KPI title="Transactions" value={k.total_transactions} />
-        <KPI title="Units Sold" value={k.total_quantity} />
-        <KPI title="Avg Ticket" value={`$${k.average_ticket}`} />
+        {/* TOP PRODUCTS + STOCK ALERTS */}
+        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
+                  {/* TOP PRODUCTS â€” PREMIUM HORIZONTAL BARS */}
+          <motion.div
+            initial={{ opacity: 0, x: -20 }}
+            animate={{ opacity: 1, x: 0 }}
+            transition={{ duration: 0.6 }}
+            className="bg-white rounded-2xl shadow-xl border border-gray-100 p-8"
+          >
+            <h2 className="text-2xl font-bold text-gray-800 mb-8">Top 5 Products</h2>
+            {k.top_products.length === 0 ? (
+              <div className="text-center py-20 text-gray-500">
+                <PackageIcon className="w-20 h-20 mx-auto mb-6 text-gray-300" />
+                <p className="text-lg font-medium">No product sales for this period</p>
+              </div>
+            ) : (
+              <div className="space-y-6">
+                {k.top_products.slice(0, 5).map((product, index) => (
+                  <motion.div
+                    key={product.product_id}
+                    initial={{ opacity: 0, x: -30 }}
+                    animate={{ opacity: 1, x: 0 }}
+                    transition={{ delay: index * 0.1 }}
+                    className="flex items-center gap-6"
+                  >
+                    {/* Rank Badge */}
+                    <div className="w-12 h-12 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-md">
+                      {index + 1}
+                    </div>
 
-      </div>
+                    {/* Product Info */}
+                    <div className="flex-1">
+                      <p className="text-lg font-semibold text-gray-900">{product.name}</p>
+                      <p className="text-sm text-gray-500">Revenue: ${product.revenue.toLocaleString()}</p>
+                    </div>
 
-      {/* ---------------- SALES TREND GRAPH ---------------- */}
-      <div className="bg-white shadow rounded-xl p-6 border">
-        <h2 className="text-xl font-bold mb-4">Daily Revenue Trend</h2>
-
-        <div className="h-72">
-          <ResponsiveContainer width="100%" height="100%">
-            <LineChart data={sales.daily}>
-              <XAxis dataKey="date" />
-              <YAxis />
-              <CartesianGrid strokeDasharray="3 3" />
-              <Tooltip />
-              <Line
-                type="monotone"
-                dataKey="total_revenue"
-                stroke="#2563eb"
-                strokeWidth={3}
-              />
-            </LineChart>
-          </ResponsiveContainer>
-        </div>
-      </div>
+                    {/* Quantity Bar */}
+                    <div className="flex items-center gap-4 w-64">
+                      <div className="flex-1 bg-gray-200 rounded-full h-10 overflow-hidden">
+                        <div
+                          className="h-full bg-gradient-to-r from-amber-400 to-orange-500 rounded-full flex items-center justify-end pr-4 shadow-inner"
+                          style={{
+                            width: `${(product.total_quantity / k.top_products[0].total_quantity) * 100}%`,
+                          }}
+                        >
+                          <span className="text-white font-bold text-sm">
+                            {product.total_quantity}
+                          </span>
+                        </div>
+                      </div>
+                      <span className="text-sm text-gray-600">units</span>
+                    </div>
 
-      {/* ---------------- TOP PRODUCTS ---------------- */}
-      <div className="bg-white shadow rounded-xl p-6 border">
-        <h2 className="text-xl font-bold mb-4">Top 5 Products</h2>
-
-        <table className="w-full text-sm">
-          <thead>
-            <tr className="border-b text-gray-600">
-              <th>Name</th>
-              <th>Qty</th>
-              <th>Revenue</th>
-              <th>Share</th>
-            </tr>
-          </thead>
-          <tbody>
-            {k.top_products.map((p) => (
-              <tr key={p.product_id} className="border-b">
-                <td>{p.name}</td>
-                <td>{p.total_quantity}</td>
-                <td>${p.revenue.toFixed(2)}</td>
-                <td>{p.share_of_revenue.toFixed(1)}%</td>
-              </tr>
-            ))}
-          </tbody>
-        </table>
-      </div>
+                    {/* Share Badge */}
+                    <div className="text-right">
+                      <span className="inline-block px-4 py-2 bg-amber-100 text-amber-800 rounded-full text-sm font-bold">
+                        {product.share_of_revenue.toFixed(1)}%
+                      </span>
+                    </div>
+                  </motion.div>
+                ))}
+              </div>
+            )}
+          </motion.div>
 
-      {/* ---------------- CRITICAL STOCK ---------------- */}
-      <div className="bg-white shadow rounded-xl p-6 border">
-        <h2 className="text-xl font-bold mb-4 text-red-600">
-          Critical Stock Items
-        </h2>
-
-        {stock.critical_products.length === 0 ? (
-          <p className="text-gray-500">No critical stock alerts.</p>
-        ) : (
-          <table className="w-full text-sm">
-            <thead>
-              <tr className="border-b text-gray-600">
-                <th>Product</th>
-                <th>Stock</th>
-                <th>Min</th>
-                <th>Status</th>
-              </tr>
-            </thead>
-            <tbody>
-              {stock.critical_products.map((p) => (
-                <tr key={p.productId} className="border-b">
-                  <td>{p.name}</td>
-                  <td>{p.current_stock}</td>
-                  <td>{p.min_stock}</td>
-                  <td className="text-red-600 font-bold">{p.status}</td>
-                </tr>
-              ))}
-            </tbody>
-          </table>
-        )}
-      </div>
+          {/* STOCK ALERTS â€” RICH CARDS */}
+          <motion.div
+            initial={{ opacity: 0, x: 20 }}
+            animate={{ opacity: 1, x: 0 }}
+            className="bg-white rounded-2xl shadow-xl border border-gray-100 p-8"
+          >
+            <h2 className="text-2xl font-bold text-gray-800 mb-8">Stock Alerts</h2>
+            {stock.critical_products.length === 0 ? (
+              <div className="text-center py-16 text-emerald-600">
+                <Package className="w-20 h-20 mx-auto mb-6" />
+                <p className="text-xl font-semibold">All stock levels are healthy</p>
+                <p className="text-sm text-emerald-600 mt-2">Great job keeping inventory optimal!</p>
+              </div>
+            ) : (
+              <div className="space-y-5 max-h-96 overflow-y-auto pr-2">
+                {stock.critical_products.map((p) => {
+                  const s = stockStyle(p.status);
+                  return (
+                    <div
+                      key={p.product_id}
+                      className={`p-6 rounded-2xl border-2 ${s.bg} ${s.border} transition-all hover:shadow-md`}
+                    >
+                      <div className="flex justify-between items-start mb-4">
+                        <div>
+                          <p className="text-lg font-bold text-gray-900">{p.name}</p>
+                          <p className="text-sm text-gray-600">ID: {p.product_id}</p> {/* â† SKU supprimÃ© */}
+                        </div>
+                        <div className="flex items-center gap-3">
+                          <span className="text-3xl">{s.icon}</span>
+                          <span className={`px-4 py-2 rounded-full text-sm font-bold ${s.badge}`}>
+                            {p.status.replace(/_/g, " ")}
+                          </span>
+                        </div>
+                      </div>
+                      <div className="grid grid-cols-2 gap-4 text-sm">
+                        <div><strong>Current Stock:</strong> {p.current_stock}</div>
+                        <div><strong>Min Stock:</strong> {p.min_stock}</div>
+                        <div><strong>Price:</strong> ${Number(p.unit_price).toFixed(2)}</div>
+                        <div><strong>Value:</strong> ${Number(p.stock_value).toFixed(2)}</div>
+                        <div><strong>Last Sale:</strong> {p.last_sale_date || "â€”"}</div>
+                        <div>
+                          <strong>Coverage:</strong>{" "}
+                          {p.coverage_days == null ? "â€”" : `${p.coverage_days.toFixed(1)} days`}
+                        </div>
+                      </div>
+                    </div>
+                  );
+                })}
+              </div>
+            )}
+          </motion.div>
+        </div>
 
-      {/* ---------------- EXPORT PDF / EXCEL ---------------- */}
-      <ReportsExport />
+        {/* REPORT EXPORT */}
+        <motion.div
+          initial={{ opacity: 0, y: 30 }}
+          animate={{ opacity: 1, y: 0 }}
+          className="flex justify-center mt-16"
+        >
+          <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-3xl shadow-2xl border border-blue-200 px-12 py-10 flex flex-col items-center gap-6 max-w-2xl text-center">
+            <div className="w-20 h-20 bg-blue-600 rounded-2xl flex items-center justify-center shadow-lg">
+              <Package className="w-12 h-12 text-white" />
+            </div>
+            <div>
+              <h3 className="text-2xl font-bold text-gray-800">Export Analytics Report</h3>
+              <p className="text-gray-600 mt-3 max-w-md">
+                Generate a professional PDF or Excel report with sales trends, top products,
+                stock alerts, and all key performance indicators for the selected period.
+              </p>
+            </div>
+            <ReportsExport />
+          </div>
+        </motion.div>
+      </div>
     </div>
   );
 }
 
+/* -----------------------------------------------------
+   Enhanced KPI Components
+----------------------------------------------------- */
+function KPICard({
+  icon,
+  title,
+  value,
+  gradient,
+}: {
+  icon: React.ReactNode;
+  title: string;
+  value: string;
+  gradient: string;
+}) {
+  return (
+    <motion.div
+      whileHover={{ scale: 1.03 }}
+      className={`bg-gradient-to-br ${gradient} text-white rounded-2xl shadow-xl p-8 border border-white/20`}
+    >
+      <div className="flex items-center justify-between">
+        <div>
+          <p className="text-white/80 text-sm font-medium">{title}</p>
+          <p className="text-4xl font-extrabold mt-3">{value}</p>
+        </div>
+        <div className="w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm">
+          {icon}
+        </div>
+      </div>
+    </motion.div>
+  );
+}
 
-/* -------- SMALL COMPONENT -------- */
-function KPI({ title, value }: { title: string; value: any }) {
+function KPICardSmall({ title, value, icon }: { title: string; value: string; icon: string }) {
   return (
-    <div className="bg-white shadow p-6 border rounded-xl">
-      <p className="text-gray-500 text-sm">{title}</p>
-      <p className="text-2xl font-bold mt-2">{value}</p>
+    <div className="bg-white rounded-2xl shadow-lg border border-gray-100 p-5 text-center">
+      <div className="text-4xl mb-3">{icon}</div>
+      <p className="text-2xl font-bold text-gray-900">{value}</p>
+      <p className="text-sm text-gray-600 mt-1">{title}</p>
     </div>
   );
-}
+}
\ No newline at end of file
diff --git a/salesflow-frontend/src/pages/Inventory.tsx b/salesflow-frontend/src/pages/Inventory.tsx
index beb413f..de5d10a 100644
--- a/salesflow-frontend/src/pages/Inventory.tsx
+++ b/salesflow-frontend/src/pages/Inventory.tsx
@@ -1,10 +1,15 @@
 // src/pages/Inventory.tsx
-import { useEffect, useMemo, useState, useRef } from "react";
-import { useSearchParams } from "react-router-dom";
+import { useEffect, useMemo, useState } from "react";
 import { inventoryAPI } from "../services/inventoryAPI";
+import { productAPI } from "../services/productAPI";
+import toast from "react-hot-toast";
+import { motion } from "framer-motion";
+import { Plus, Edit2, Trash2, Package, Search } from "lucide-react";
+
 import type { InventoryItem } from "../types/inventory";
+import type { Product } from "../types/product";
 
-type SortKey = "name" | "quantity" | "price" | "category";
+type SortKey = "name" | "quantity" | "price" | "cost" | "category" | "sku";
 type SortDirection = "asc" | "desc";
 
 interface SortState {
@@ -12,108 +17,76 @@ interface SortState {
   direction: SortDirection;
 }
 
-type Mode = "idle" | "create" | "edit";
-
-const EMPTY_FORM: Omit<InventoryItem, "id"> = {
-  name: "",
-  description: "",
-  quantity: 0,
-  price: 0,
-  cost: 0,
-  category: "",
-};
-
 export default function Inventory() {
   const [inventory, setInventory] = useState<InventoryItem[]>([]);
-  const [selected, setSelected] = useState<InventoryItem | null>(null);
-  const [form, setForm] = useState<Omit<InventoryItem, "id"> | InventoryItem | null>(null);
-  const [mode, setMode] = useState<Mode>("idle");
-
+  const [products, setProducts] = useState<Product[]>([]);
   const [loading, setLoading] = useState(true);
-  const [saving, setSaving] = useState(false);
   const [error, setError] = useState<string | null>(null);
 
   const [search, setSearch] = useState("");
-  const [page, setPage] = useState(1);
-  const pageSize = 10;
-
   const [sort, setSort] = useState<SortState>({ key: "name", direction: "asc" });
-  const [searchParams] = useSearchParams();
-  const scrollRef = useRef<HTMLTableRowElement | null>(null);
-
-  const urlProductId = searchParams.get("productId");
-
-  // ---------------------------------------------------
-  // LOAD INVENTORY
-  // ---------------------------------------------------
+  const [page, setPage] = useState(1);
+  const pageSize = 12;
+
+  // Modals state
+  const [addModalOpen, setAddModalOpen] = useState(false);
+  const [editModalOpen, setEditModalOpen] = useState(false);
+  const [deleteModalOpen, setDeleteModalOpen] = useState(false);
+  const [selectedItem, setSelectedItem] = useState<InventoryItem | null>(null);
+  const [selectedProduct, setSelectedProduct] = useState<Product | null>(null);
+  const [quantity, setQuantity] = useState("");
+  const [cost, setCost] = useState("");
+
+  // LOAD DATA
   useEffect(() => {
-    async function load() {
-      try {
-        const res = await inventoryAPI.getAll();
-        setInventory(res.data);
-
-        // Auto-select via ?productId=
-        if (urlProductId) {
-          const id = Number(urlProductId);
-          const found = res.data.find((i: InventoryItem) => i.id === id);
-          if (found) {
-            setSelected(found);
-            setForm(found);
-            setMode("edit");
-          }
-        }
-      } catch (err) {
-        console.error(err);
-        setError("Failed to load inventory items.");
-      } finally {
-        setLoading(false);
-      }
-    }
-
-    load();
+    loadAll();
   }, []);
 
-  // ---------------------------------------------------
-  // AUTO SCROLL
-  // ---------------------------------------------------
-  useEffect(() => {
-    if (scrollRef.current) {
-      scrollRef.current.scrollIntoView({ behavior: "smooth", block: "center" });
+  async function loadAll() {
+    try {
+      setLoading(true);
+      setError(null);
+      const [invRes, prodRes] = await Promise.all([
+        inventoryAPI.getAll(),
+        productAPI.getAll(),
+      ]);
+      setInventory(invRes.data || []);
+      setProducts(prodRes.data || []);
+    } catch (err: any) {
+      console.error(err);
+      setError("Failed to load data.");
+      toast.error("Failed to load inventory or products.");
+    } finally {
+      setLoading(false);
     }
-  }, [selected]);
+  }
 
-  // ---------------------------------------------------
-  // FILTER + SORT
-  // ---------------------------------------------------
+  // FILTER + SORT + PAGINATION
   const filtered = useMemo(() => {
-    let list = inventory;
+    let list = [...inventory];
     const q = search.toLowerCase().trim();
 
     if (q) {
       list = list.filter(
         (i) =>
           i.name.toLowerCase().includes(q) ||
-          i.category.toLowerCase().includes(q)
+          i.sku.toLowerCase().includes(q) ||
+          i.category?.toLowerCase().includes(q)
       );
     }
 
-    list = [...list].sort((a, b) => {
+    list.sort((a, b) => {
       const av = a[sort.key];
       const bv = b[sort.key];
       const dir = sort.direction === "asc" ? 1 : -1;
 
-      if (typeof av === "number" && typeof bv === "number")
-        return (av - bv) * dir;
-
-      return String(av).localeCompare(String(bv)) * dir;
+      if (typeof av === "number" && typeof bv === "number") return (av - bv) * dir;
+      return String(av ?? "").localeCompare(String(bv ?? "")) * dir;
     });
 
     return list;
   }, [inventory, search, sort]);
 
-  // ---------------------------------------------------
-  // PAGINATION
-  // ---------------------------------------------------
   const totalPages = Math.max(1, Math.ceil(filtered.length / pageSize));
   const paged = useMemo(() => {
     const start = (page - 1) * pageSize;
@@ -128,259 +101,428 @@ export default function Inventory() {
     );
   };
 
-  // ---------------------------------------------------
-  // CRUD HANDLERS
-  // ---------------------------------------------------
-  const startCreate = () => {
-    setMode("create");
-    setSelected(null);
-    setForm({ ...EMPTY_FORM });
+  // MODAL HANDLERS
+  const resetModals = () => {
+    setSelectedItem(null);
+    setSelectedProduct(null);
+    setQuantity("");
+    setCost("");
   };
 
-  const selectItem = (item: InventoryItem) => {
-    setSelected(item);
-    setForm(item);
-    setMode("edit");
+  const openEdit = (item: InventoryItem) => {
+    setSelectedItem(item);
+    setQuantity(item.quantity.toString());
+    setCost(item.cost?.toString() ?? item.price.toString());
+    setEditModalOpen(true);
   };
 
-  const handleInput = (field: keyof Omit<InventoryItem, "id">, value: any) => {
-    if (!form) return;
-    setForm({ ...(form as any), [field]: value });
+  const openDelete = (item: InventoryItem) => {
+    setSelectedItem(item);
+    setDeleteModalOpen(true);
   };
 
-  const handleSave = async () => {
-    if (!form) return;
-
-    setSaving(true);
-    setError(null);
+  const handleAddStock = async () => {
+    if (!selectedProduct || !quantity || parseInt(quantity) <= 0) {
+      toast.error("Select a product and enter a valid quantity.");
+      return;
+    }
 
     try {
-      // UPDATE
-      if (mode === "edit" && (form as InventoryItem).id) {
-        const f = form as InventoryItem;
-        await inventoryAPI.update(f.id!, {
-          name: f.name,
-          description: f.description,
-          quantity: f.quantity,
-          price: f.price,
-          cost: f.cost,
-          category: f.category,
-        });
-      }
-      // CREATE
-      else if (mode === "create") {
-        const f = form as Omit<InventoryItem, "id">;
-        await inventoryAPI.create(f);
-      }
-
-      const res = await inventoryAPI.getAll();
-      setInventory(res.data);
-
-      alert("Saved successfully!");
-      if (mode === "create") setForm({ ...EMPTY_FORM });
-    } catch (err) {
-      console.error(err);
-      setError("Failed to save item.");
-    } finally {
-      setSaving(false);
+      await inventoryAPI.create(
+  selectedProduct.sku,
+  {
+    cost: parseFloat(cost),
+    quantity: parseInt(quantity),
+  }
+);
+ // Bypass typage strict temporairement
+      toast.success("Stock added successfully!");
+      loadAll();
+      setAddModalOpen(false);
+      resetModals();
+    } catch (err: any) {
+      toast.error(err.response?.data?.message || "Failed to add stock.");
     }
   };
 
-  const handleDelete = async () => {
-    if (!selected || !selected.id) return;
-    if (!confirm("Delete this inventory item?")) return;
+  const handleEditStock = async () => {
+    if (!selectedItem || !quantity || parseInt(quantity) < 0) {
+      toast.error("Enter a valid quantity.");
+      return;
+    }
 
     try {
-      await inventoryAPI.delete(selected.id);
+      await inventoryAPI.updateBySku(selectedItem.sku, {
+        cost: parseFloat(cost),
+        quantity: parseInt(quantity),
+      } as any); // Bypass typage strict temporairement
+      toast.success("Stock updated!");
+      loadAll();
+      setEditModalOpen(false);
+      resetModals();
+    } catch (err: any) {
+      toast.error(err.response?.data?.message || "Update failed.");
+    }
+  };
 
-      const res = await inventoryAPI.getAll();
-      setInventory(res.data);
+  const handleDelete = async () => {
+    if (!selectedItem) return;
 
-      setSelected(null);
-      setForm(null);
-      setMode("idle");
-      alert("Item deleted.");
-    } catch (err) {
-      console.error(err);
-      setError("Failed to delete item.");
+    try {
+      await inventoryAPI.deleteBySku(selectedItem.sku);
+      toast.success("Item removed from inventory.");
+      loadAll();
+      setDeleteModalOpen(false);
+      resetModals();
+    } catch (err: any) {
+      toast.error(err.response?.data?.message || "Deletion failed.");
     }
   };
 
-  // ---------------------------------------------------
-  // RENDER
-  // ---------------------------------------------------
-  if (loading) return <p className="p-6">Loading inventory...</p>;
+  // RENDER LOADING
+  if (loading) {
+    return (
+      <div className="p-12 text-center">
+        <div className="inline-block animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600"></div>
+        <p className="mt-6 text-2xl text-gray-600">Loading inventory...</p>
+      </div>
+    );
+  }
 
   return (
-    <div className="p-6 flex gap-6">
-
-      {/* ---------------- LEFT SIDE : TABLE ---------------- */}
-      <div className="flex-1">
-        <div className="flex justify-between mb-4">
-          <h1 className="text-2xl font-bold">Inventory</h1>
-
+    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-cyan-50 to-indigo-50">
+      <div className="p-8 max-w-7xl mx-auto">
+
+        {/* HEADER */}
+        <motion.div initial={{ opacity: 0, y: -20 }} animate={{ opacity: 1, y: 0 }} className="mb-10 flex items-center justify-between">
+          <div>
+            <h1 className="text-5xl font-extrabold bg-gradient-to-r from-blue-600 to-indigo-700 text-transparent bg-clip-text">
+              Inventory Management
+            </h1>
+            <p className="text-xl text-gray-600 mt-3">Real-time stock tracking with low stock alerts</p>
+          </div>
           <button
-            onClick={startCreate}
-            className="px-4 py-2 bg-blue-600 text-white rounded-lg shadow"
+            onClick={() => setAddModalOpen(true)}
+            className="inline-flex items-center px-6 py-4 bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-bold rounded-xl hover:from-blue-700 hover:to-cyan-700 transition shadow-xl"
           >
-            + Add Item
+            <Plus className="w-6 h-6 mr-3" />
+            Add Stock
           </button>
+        </motion.div>
+
+        {/* SEARCH */}
+        <div className="mb-8 relative max-w-2xl">
+          <Search className="absolute left-6 top-1/2 -translate-y-1/2 text-gray-400 w-6 h-6" />
+          <input
+            type="text"
+            placeholder="Search by name, SKU or category..."
+            className="w-full pl-16 pr-6 py-4 text-lg border border-gray-300 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-300 shadow-lg"
+            value={search}
+            onChange={(e) => setSearch(e.target.value)}
+          />
         </div>
 
-        <input
-          type="text"
-          placeholder="Search by name or category..."
-          className="border rounded px-3 py-2 w-64 mb-3"
-          value={search}
-          onChange={(e) => setSearch(e.target.value)}
-        />
-
+        {/* ERROR */}
         {error && (
-          <div className="mb-3 text-red-600 bg-red-50 border border-red-200 p-2 rounded">
+          <div className="mb-8 p-6 bg-red-50 border border-red-200 text-red-700 rounded-2xl shadow">
             {error}
           </div>
         )}
 
-        <div className="bg-white rounded-xl shadow p-4">
-          <table className="w-full">
-            <thead>
-              <tr className="border-b text-left text-sm">
-                <th className="cursor-pointer" onClick={() => toggleSort("name")}>Name</th>
-                <th className="cursor-pointer" onClick={() => toggleSort("quantity")}>Qty</th>
-                <th className="cursor-pointer" onClick={() => toggleSort("price")}>Price</th>
-                <th className="cursor-pointer" onClick={() => toggleSort("category")}>Category</th>
-              </tr>
-            </thead>
-
-            <tbody>
-              {paged.map((item) => (
-                <tr
-                  key={item.id}
-                  ref={selected?.id === item.id ? scrollRef : null}
-                  className={`border-b hover:bg-gray-100 cursor-pointer ${
-                    selected?.id === item.id ? "bg-blue-50" : ""
-                  }`}
-                  onClick={() => selectItem(item)}
-                >
-                  <td>{item.name}</td>
-                  <td>{item.quantity}</td>
-                  <td>${item.price}</td>
-                  <td>{item.category}</td>
-                </tr>
-              ))}
-
-              {paged.length === 0 && (
+        {/* TABLE */}
+        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.2 }}
+          className="bg-white rounded-3xl shadow-2xl overflow-hidden">
+          <div className="overflow-x-auto">
+            <table className="w-full">
+              <thead className="bg-gradient-to-r from-blue-50 to-cyan-50 border-b-2 border-gray-200">
                 <tr>
-                  <td colSpan={4} className="text-center py-4 text-gray-500">
-                    No items found.
-                  </td>
+                  <th onClick={() => toggleSort("name")} className="px-8 py-5 text-left text-sm font-bold text-gray-700 cursor-pointer hover:bg-blue-100 transition">
+                    Product Name {sort.key === "name" && (sort.direction === "asc" ? "â†‘" : "â†“")}
+                  </th>
+                  <th onClick={() => toggleSort("sku")} className="px-8 py-5 text-left text-sm font-bold text-gray-700 cursor-pointer hover:bg-blue-100 transition">
+                    SKU {sort.key === "sku" && (sort.direction === "asc" ? "â†‘" : "â†“")}
+                  </th>
+                  <th onClick={() => toggleSort("quantity")} className="px-8 py-5 text-left text-sm font-bold text-gray-700 cursor-pointer hover:bg-blue-100 transition">
+                    Stock {sort.key === "quantity" && (sort.direction === "asc" ? "â†‘" : "â†“")}
+                  </th>
+                  <th onClick={() => toggleSort("price")} className="px-8 py-5 text-left text-sm font-bold text-gray-700 cursor-pointer hover:bg-blue-100 transition">
+                    Price {sort.key === "price" && (sort.direction === "asc" ? "â†‘" : "â†“")}
+                  </th>
+                  <th onClick={() => toggleSort("cost")} className="px-8 py-5 text-left text-sm font-bold text-gray-700 cursor-pointer hover:bg-blue-100 transition">
+                    Cost {sort.key === "cost" && (sort.direction === "asc" ? "â†‘" : "â†“")}
+                  </th>
+                  <th onClick={() => toggleSort("category")} className="px-8 py-5 text-left text-sm font-bold text-gray-700 cursor-pointer hover:bg-blue-100 transition">
+                    Category {sort.key === "category" && (sort.direction === "asc" ? "â†‘" : "â†“")}
+                  </th>
+                  <th className="px-8 py-5 text-left text-sm font-bold text-gray-700">Last Updated</th>
+                  <th className="px-8 py-5 text-left text-sm font-bold text-gray-700">Actions</th>
                 </tr>
-              )}
-            </tbody>
-          </table>
+              </thead>
+              <tbody className="divide-y divide-gray-100">
+                {paged.map((item) => {
+                  const isCritical = item.quantity === 0;
+                  const isLow = item.quantity > 0 && item.quantity <= 10;
+
+                  return (
+                    <motion.tr
+                      key={item.id}
+                      whileHover={{ backgroundColor: "#f0f9ff" }}
+                      className={`transition-all ${isCritical ? "bg-red-50" : isLow ? "bg-yellow-50" : ""}`}
+                    >
+                      <td className="px-8 py-6 font-medium text-gray-900">{item.name}</td>
+                      <td className="px-8 py-6 text-gray-600 font-mono text-sm">{item.sku}</td>
+                      <td className="px-8 py-6">
+                        <span className={`inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold ${
+                          isCritical
+                            ? "bg-red-100 text-red-800"
+                            : isLow
+                            ? "bg-yellow-100 text-yellow-800"
+                            : "bg-green-100 text-green-800"
+                        }`}>
+                          {item.quantity}
+                          {isCritical && " Out of Stock"}
+                          {isLow && " Low Stock"}
+                        </span>
+                      </td>
+                      <td className="px-8 py-6 font-semibold">${item.price.toFixed(2)}</td>
+                      <td className="px-8 py-6 font-semibold text-gray-600">
+                        ${item.cost?.toFixed(2)}
+                      </td>
+                      <td className="px-8 py-6 text-gray-600">{item.category || "â€”"}</td>
+                      <td className="px-8 py-6 text-sm text-gray-500">
+                        {new Date(item.updatedAt).toLocaleDateString()}
+                      </td>
+                      <td className="px-8 py-6">
+                        <div className="flex items-center gap-3">
+                          <button
+                            onClick={() => openEdit(item)}
+                            className="p-3 text-blue-600 hover:bg-blue-50 rounded-lg transition"
+                            title="Edit stock"
+                          >
+                            <Edit2 className="w-5 h-5" />
+                          </button>
+                          <button
+                            onClick={() => openDelete(item)}
+                            className="p-3 text-red-600 hover:bg-red-50 rounded-lg transition"
+                            title="Remove from inventory"
+                          >
+                            <Trash2 className="w-5 h-5" />
+                          </button>
+                        </div>
+                      </td>
+                    </motion.tr>
+                  );
+                })}
+
+                {paged.length === 0 && (
+                  <tr>
+                    <td colSpan={8} className="text-center py-16 text-gray-500 text-xl">
+                      No inventory items found.
+                    </td>
+                  </tr>
+                )}
+              </tbody>
+            </table>
+          </div>
 
-          {/* Pagination */}
-          <div className="flex justify-between items-center mt-4 text-sm">
+          {/* PAGINATION */}
+          <div className="flex items-center justify-between px-8 py-6 bg-gray-50 border-t">
             <button
+              onClick={() => setPage((p) => Math.max(1, p - 1))}
               disabled={page <= 1}
-              onClick={() => setPage(page - 1)}
-              className="px-3 py-1 border rounded disabled:opacity-50"
+              className="px-6 py-3 border border-blue-300 text-blue-700 rounded-xl disabled:opacity-50 hover:bg-blue-50 transition font-medium"
             >
-              Prev
+              â† Previous
             </button>
-
-            <span>Page {page} / {totalPages}</span>
-
+            <span className="text-lg font-semibold text-gray-700">
+              Page <strong>{page}</strong> of <strong>{totalPages}</strong>
+            </span>
             <button
+              onClick={() => setPage((p) => Math.min(totalPages, p + 1))}
               disabled={page >= totalPages}
-              onClick={() => setPage(page + 1)}
-              className="px-3 py-1 border rounded disabled:opacity-50"
+              className="px-6 py-3 border border-blue-300 text-blue-700 rounded-xl disabled:opacity-50 hover:bg-blue-50 transition font-medium"
             >
-              Next
+              Next â†’
             </button>
           </div>
-        </div>
+        </motion.div>
+
+        {/* SUMMARY CARDS */}
+        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.4 }}
+          className="mt-12 grid grid-cols-1 md:grid-cols-3 gap-8">
+          <div className="bg-gradient-to-br from-blue-500 to-indigo-600 text-white rounded-2xl p-8 shadow-xl">
+            <p className="text-lg opacity-90">Total Items</p>
+            <p className="text-5xl font-extrabold mt-2">{inventory.length}</p>
+          </div>
+          <div className="bg-gradient-to-br from-yellow-500 to-orange-600 text-white rounded-2xl p-8 shadow-xl">
+            <p className="text-lg opacity-90">Low Stock</p>
+            <p className="text-5xl font-extrabold mt-2">
+              {inventory.filter(i => i.quantity > 0 && i.quantity <= 10).length}
+            </p>
+          </div>
+          <div className="bg-gradient-to-br from-red-500 to-rose-600 text-white rounded-2xl p-8 shadow-xl">
+            <p className="text-lg opacity-90">Out of Stock</p>
+            <p className="text-5xl font-extrabold mt-2">
+              {inventory.filter(i => i.quantity === 0).length}
+            </p>
+          </div>
+        </motion.div>
       </div>
 
-      {/* ---------------- RIGHT SIDE : PANEL FORM ---------------- */}
-      <div className="w-96 bg-white shadow rounded-xl p-4">
-        {!form ? (
-          <p>Select an item or click â€œAdd Itemâ€.</p>
-        ) : (
-          <>
-            <h2 className="text-xl font-bold mb-3">
-              {mode === "create" ? "Add Inventory Item" : "Edit Inventory Item"}
-            </h2>
-
-            {/* Editable inputs */}
-            <label className="block text-sm mb-1">Name</label>
-            <input
-              className="border p-2 rounded w-full mb-2"
-              value={form.name}
-              onChange={(e) => handleInput("name", e.target.value)}
-            />
-
-            <label className="block text-sm mb-1">Description</label>
-            <input
-              className="border p-2 rounded w-full mb-2"
-              value={form.description}
-              onChange={(e) => handleInput("description", e.target.value)}
-            />
-
-            <label className="block text-sm mb-1">Quantity</label>
-            <input
-              type="number"
-              className="border p-2 rounded w-full mb-2"
-              value={form.quantity}
-              onChange={(e) => handleInput("quantity", parseInt(e.target.value) || 0)}
-            />
-
-            <label className="block text-sm mb-1">Price</label>
-            <input
-              type="number"
-              className="border p-2 rounded w-full mb-2"
-              value={form.price}
-              onChange={(e) => handleInput("price", parseFloat(e.target.value) || 0)}
-            />
-
-            <label className="block text-sm mb-1">Cost</label>
-            <input
-              type="number"
-              className="border p-2 rounded w-full mb-2"
-              value={form.cost}
-              onChange={(e) => handleInput("cost", parseFloat(e.target.value) || 0)}
-            />
-
-            <label className="block text-sm mb-1">Category</label>
-            <input
-              className="border p-2 rounded w-full mb-4"
-              value={form.category}
-              onChange={(e) => handleInput("category", e.target.value)}
-            />
-
-            {/* Buttons */}
-            <div className="flex gap-3">
+      {/* MODAL ADD STOCK */}
+      {addModalOpen && (
+        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
+          <div className="bg-white rounded-2xl p-8 w-full max-w-lg shadow-2xl">
+            <h2 className="text-3xl font-bold text-gray-800 mb-6">Add Stock</h2>
+            <div className="space-y-6">
+              <div>
+                <label className="block text-sm font-medium text-gray-700 mb-2">Select Product</label>
+                <select
+                  className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-300"
+                  onChange={(e) => {
+                    const prod = products.find(p => p.id === Number(e.target.value));
+                    setSelectedProduct(prod || null);
+                    if (prod) setCost(prod.price.toString());
+                  }}
+                >
+                  <option value="">Choose from catalogue...</option>
+                  {products.map(p => (
+                    <option key={p.id} value={p.id}>
+                      {p.name} ({p.sku}) â€” ${p.price.toFixed(2)}{p.category ? ` â€” ${p.category}` : ""}
+                    </option>
+                  ))}
+                </select>
+              </div>
+
+              {selectedProduct && (
+                <div className="p-5 bg-blue-50 rounded-xl flex items-center gap-4">
+                  <Package className="w-10 h-10 text-blue-600" />
+                  <div>
+                    <p className="font-semibold text-gray-800">{selectedProduct.name}</p>
+                    <p className="text-sm text-gray-600">SKU: {selectedProduct.sku}</p>
+                  </div>
+                </div>
+              )}
+
+              <div>
+                <label className="block text-sm font-medium text-gray-700 mb-2">Quantity to Add</label>
+                <input
+                  type="number"
+                  min="1"
+                  value={quantity}
+                  onChange={(e) => setQuantity(e.target.value)}
+                  className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-300"
+                  placeholder="Enter quantity"
+                />
+              </div>
+
+              <div>
+                <label className="block text-sm font-medium text-gray-700 mb-2">Cost</label>
+                <input
+                  type="number"
+                  step="0.01"
+                  value={cost}
+                  onChange={(e) => setCost(e.target.value)}
+                  className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-300"
+                  placeholder="Enter cost"
+                />
+              </div>
+            </div>
+
+            <div className="flex gap-4 mt-8">
               <button
-                onClick={handleSave}
-                className="flex-1 py-2 bg-blue-600 text-white rounded disabled:opacity-50"
-                disabled={saving}
+                onClick={() => { setAddModalOpen(false); resetModals(); }}
+                className="flex-1 py-3 border border-gray-300 rounded-xl hover:bg-gray-50 transition"
               >
-                {saving ? "Saving..." : "Save"}
+                Cancel
+              </button>
+              <button
+                onClick={handleAddStock}
+                className="flex-1 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-xl hover:from-blue-700 hover:to-cyan-700 transition font-medium"
+              >
+                Add Stock
               </button>
-
-              {mode === "edit" && (
-                <button
-                  onClick={handleDelete}
-                  className="flex-1 py-2 bg-red-600 text-white rounded disabled:opacity-50"
-                  disabled={saving}
-                >
-                  {saving ? "Deleting..." : "Delete"}
-                </button>
-              )}
             </div>
-          </>
-        )}
-      </div>
+          </div>
+        </div>
+      )}
+
+      {/* MODAL EDIT */}
+      {editModalOpen && selectedItem && (
+        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
+          <div className="bg-white rounded-2xl p-8 w-full max-w-md shadow-2xl">
+            <h2 className="text-3xl font-bold text-gray-800 mb-6">Adjust Stock</h2>
+            <div className="space-y-6">
+              <div className="p-5 bg-gray-50 rounded-xl">
+                <p className="font-semibold">{selectedItem.name}</p>
+                <p className="text-sm text-gray-600">SKU: {selectedItem.sku}</p>
+                <p className="text-sm text-gray-600 mt-2">Current: {selectedItem.quantity} units</p>
+              </div>
+              <div>
+                <label className="block text-sm font-medium text-gray-700 mb-2">New Quantity</label>
+                <input
+                  type="number"
+                  min="0"
+                  value={quantity}
+                  onChange={(e) => setQuantity(e.target.value)}
+                  className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-300"
+                />
+              </div>
+              <div>
+                <label className="block text-sm font-medium text-gray-700 mb-2">Cost</label>
+                <input
+                  type="number"
+                  step="0.01"
+                  value={cost}
+                  onChange={(e) => setCost(e.target.value)}
+                  className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-300"
+                />
+              </div>
+            </div>
+            <div className="flex gap-4 mt-8">
+              <button
+                onClick={() => { setEditModalOpen(false); resetModals(); }}
+                className="flex-1 py-3 border border-gray-300 rounded-xl hover:bg-gray-50"
+              >
+                Cancel
+              </button>
+              <button
+                onClick={handleEditStock}
+                className="flex-1 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-xl hover:from-blue-700 hover:to-cyan-700 font-medium"
+              >
+                Update
+              </button>
+            </div>
+          </div>
+        </div>
+      )}
+
+      {/* MODAL DELETE */}
+      {deleteModalOpen && selectedItem && (
+        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
+          <div className="bg-white rounded-2xl p-8 w-full max-w-md shadow-2xl">
+            <h2 className="text-3xl font-bold text-gray-800 mb-6">Remove from Inventory?</h2>
+            <p className="text-gray-600 mb-8">
+              This will remove <span className="font-semibold">{selectedItem.name}</span> from stock tracking.
+              The product remains in the catalogue.
+            </p>
+            <div className="flex gap-4">
+              <button
+                onClick={() => { setDeleteModalOpen(false); resetModals(); }}
+                className="flex-1 py-3 border border-gray-300 rounded-xl hover:bg-gray-50"
+              >
+                Cancel
+              </button>
+              <button
+                onClick={handleDelete}
+                className="flex-1 py-3 bg-red-600 text-white rounded-xl hover:bg-red-700 font-medium"
+              >
+                Remove
+              </button>
+            </div>
+          </div>
+        </div>
+      )}
     </div>
   );
-}
+}
\ No newline at end of file
diff --git a/salesflow-frontend/src/pages/Login.tsx b/salesflow-frontend/src/pages/Login.tsx
index 1afc2ca..e9a5188 100644
--- a/salesflow-frontend/src/pages/Login.tsx
+++ b/salesflow-frontend/src/pages/Login.tsx
@@ -1,5 +1,6 @@
+// src/pages/Login.tsx
 import { useState } from "react";
-import { useNavigate } from "react-router-dom";
+import { useNavigate, Link } from "react-router-dom";
 import { authAPI } from "../services/api/javaApi";
 import { useAuth } from "../contexts/AuthContext";
 import type { LoginCredentials } from "../types/auth";
@@ -16,25 +17,19 @@ const Login = () => {
   const [loading, setLoading] = useState(false);
   const [errorMsg, setErrorMsg] = useState("");
 
-  // ----------------------------------------------------------
-  // FORM CHANGE HANDLER
-  // ----------------------------------------------------------
   const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
     setForm({ ...form, [e.target.name]: e.target.value });
   };
 
-  // ----------------------------------------------------------
-  // SUBMIT HANDLER
-  // ----------------------------------------------------------
   const handleSubmit = async (e: React.FormEvent) => {
     e.preventDefault();
     setLoading(true);
     setErrorMsg("");
 
     try {
-      // ----------------------------------------------------------
-      // DEV MODE â€” Instant login without backend
-      // ----------------------------------------------------------
+      // --------------------------------------------------
+      // DEV MODE â€” fake login
+      // --------------------------------------------------
       if (devMode) {
         const fakeUser = {
           username: "developer",
@@ -52,16 +47,14 @@ const Login = () => {
         return;
       }
 
-      // ----------------------------------------------------------
-      // PROD MODE â€” REAL LOGIN
-      // ----------------------------------------------------------
+      // --------------------------------------------------
+      // REAL BACKEND LOGIN
+      // --------------------------------------------------
       const data = await authAPI.login(form);
 
-      // Save JWT token returned by backend
       localStorage.setItem("token", data.accessToken);
       setToken(data.accessToken);
 
-      // Backend already returns user object â†’ use it
       if (data.user) {
         setUser({
           username: data.user.username,
@@ -71,11 +64,9 @@ const Login = () => {
       }
 
       navigate("/dashboard");
-
     } catch (error: any) {
       console.error("Login error:", error);
 
-      // cleanup previous session
       localStorage.removeItem("token");
       setUser(null);
       setToken(null);
@@ -90,65 +81,94 @@ const Login = () => {
     }
   };
 
-  // ----------------------------------------------------------
-  // UI
-  // ----------------------------------------------------------
   return (
-    <div className="min-h-screen flex justify-center items-center bg-gray-100">
-      <div className="bg-white p-10 rounded-xl shadow-lg w-full max-w-md">
-        <h1 className="text-3xl font-bold text-center mb-6 text-gray-800">
-          SalesFlow Lite
-        </h1>
-
-        {errorMsg && (
-          <div className="text-red-500 text-center mb-4">{errorMsg}</div>
-        )}
-
-        <form onSubmit={handleSubmit} className="space-y-6">
-          <div>
-            <label className="block text-gray-700 font-medium mb-1">
-              Phone Number
-            </label>
+    <div className="min-h-screen bg-gradient-to-b from-slate-900 to-slate-800 flex items-center justify-center px-4">
+      {/* Carte principale */}
+      <div className="bg-white rounded-3xl shadow-2xl overflow-hidden w-full max-w-md">
+        {/* Header bleu */}
+        <div className="bg-gradient-to-br from-blue-600 to-blue-700 px-10 pt-16 pb-24 rounded-t-3xl text-center">
+          <div className="inline-flex items-center justify-center w-24 h-24 bg-blue-500 rounded-full shadow-2xl mb-8">
+            <span className="text-6xl font-bold text-white">S</span>
+          </div>
+          <h1 className="text-4xl font-bold text-white mb-3">Log In</h1>
+          <p className="text-blue-100 text-lg">
+            Fill the below information to Log In
+          </p>
+        </div>
+
+        {/* Formulaire */}
+        <div className="px-10 -mt-12 pb-12">
+          {errorMsg && (
+            <div className="mb-8 p-4 bg-red-50 border border-red-200 rounded-2xl text-red-700 text-center font-medium">
+              {errorMsg}
+            </div>
+          )}
+
+          <form onSubmit={handleSubmit} className="space-y-8">
+            {/* Phone */}
             <input
               name="phoneNumber"
               type="text"
               value={form.phoneNumber}
               onChange={handleChange}
-              className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
-              placeholder="0771000001"
+              placeholder="User Name or Phone Number"
               required
+              className="w-full px-6 py-5 bg-gray-50 border border-gray-300 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-300 focus:border-blue-500 transition"
             />
-          </div>
 
-          <div>
-            <label className="block text-gray-700 font-medium mb-1">
-              Password
-            </label>
+            {/* Password */}
             <input
               name="password"
               type="password"
               value={form.password}
               onChange={handleChange}
-              className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
-              placeholder="password"
+              placeholder="Password"
               required
+              className="w-full px-6 py-5 bg-gray-50 border border-gray-300 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-300 focus:border-blue-500 transition"
             />
-          </div>
 
-          <button
-            type="submit"
-            disabled={loading}
-            className="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-semibold"
-          >
-            {loading ? "Signing in..." : "Sign in"}
-          </button>
-        </form>
-
-        {devMode && (
-          <p className="text-center text-sm text-green-600 mt-4 font-medium">
-            DEV MODE ACTIVE â€” Login bypass enabled
-          </p>
-        )}
+            {/* Forgot password */}
+            <div className="text-right">
+              <a
+                href="#"
+                className="text-blue-600 hover:text-blue-700 text-sm font-medium"
+              >
+                In case you forgot password ?
+              </a>
+            </div>
+
+            {/* Submit */}
+            <button
+              type="submit"
+              disabled={loading}
+              className="w-full py-5 bg-blue-600 hover:bg-blue-700 text-white font-bold text-xl rounded-full shadow-xl transition disabled:opacity-70"
+            >
+              {loading ? "Signing in..." : "LOG IN"}
+            </button>
+
+            {/* REGISTER LINK â€” âœ… FIX */}
+            <div className="text-center mt-8">
+              <p className="text-gray-600 text-base">
+                Don't have an account ?{" "}
+                <Link
+                  to="/register"
+                  className="text-blue-600 font-bold hover:text-blue-700"
+                >
+                  REGISTER
+                </Link>
+              </p>
+            </div>
+          </form>
+
+          {/* DEV MODE */}
+          {devMode && (
+            <div className="mt-10 text-center">
+              <span className="inline-block px-6 py-3 bg-green-100 text-green-800 rounded-full text-sm font-bold">
+                DEV MODE ACTIVE
+              </span>
+            </div>
+          )}
+        </div>
       </div>
     </div>
   );
diff --git a/salesflow-frontend/src/pages/ML.tsx b/salesflow-frontend/src/pages/ML.tsx
index e7a8a9a..270b122 100644
--- a/salesflow-frontend/src/pages/ML.tsx
+++ b/salesflow-frontend/src/pages/ML.tsx
@@ -1,144 +1,304 @@
-import { useState } from "react";
+// src/pages/ForecastAI.tsx
+import { useState, useEffect } from "react";
+import { motion } from "framer-motion";
+import {
+  Calendar,
+  User,
+  Menu,
+  Search,
+  TrendingUp,
+  AlertTriangle,
+  Package,
+} from "lucide-react";
+import {
+  LineChart,
+  Line,
+  XAxis,
+  YAxis,
+  CartesianGrid,
+  Tooltip,
+  ResponsiveContainer,
+} from "recharts";
+
 import { mlAPI } from "../services/mlAPI";
+import { productAPI } from "../services/productAPI";
+import type { Product } from "../types/product";
 import type {
   ForecastResult,
   AnomalyResponse,
-  ForecastRequest,
-  AnomalyRequest,
   AnalyticsPeriod,
+  ForecastScope,
 } from "../types/ml";
 
-export default function MLPage() {
-  // Inputs utilisateur
-  const [productId, setProductId] = useState<string>("1");
-  const [historyDays, setHistoryDays] = useState(90);
+export default function ForecastAI() {
+  // --------------------------------------------
+  // UI STATE
+  // --------------------------------------------
+  const [mode, setMode] = useState<ForecastScope>("GLOBAL");
+  const [searchQuery, setSearchQuery] = useState("");
+  const [selectedProduct, setSelectedProduct] = useState<Product | null>(null);
+
   const [forecastDays, setForecastDays] = useState(7);
   const [period, setPeriod] = useState<AnalyticsPeriod>("daily");
 
-  // RÃ©sultats
+  const [products, setProducts] = useState<Product[]>([]);
+
   const [forecast, setForecast] = useState<ForecastResult | null>(null);
   const [anomalies, setAnomalies] = useState<AnomalyResponse | null>(null);
 
-  // Ã‰tat du chargement & erreurs
   const [loadingForecast, setLoadingForecast] = useState(false);
   const [loadingAnomalies, setLoadingAnomalies] = useState(false);
   const [error, setError] = useState<string | null>(null);
 
-  // ---------------------------------------------------------
-  // FORECAST
-  // ---------------------------------------------------------
+  // --------------------------------------------
+  // LOAD PRODUCTS
+  // --------------------------------------------
+  useEffect(() => {
+    const loadProducts = async () => {
+      try {
+        const res = await productAPI.getAll();
+        setProducts(res.data || []);
+      } catch (err) {
+        console.error("Failed to load products for search", err);
+      }
+    };
+    loadProducts();
+  }, []);
+
+  const filteredProducts = products.filter(
+    (p) =>
+      p.sku.toLowerCase().includes(searchQuery.toLowerCase()) ||
+      p.name.toLowerCase().includes(searchQuery.toLowerCase())
+  );
+
+  // --------------------------------------------
+  // RUN FORECAST
+  // --------------------------------------------
   const handleForecast = async () => {
     setError(null);
     setForecast(null);
     setLoadingForecast(true);
 
-    const pid = Number(productId);
-    if (!pid || pid <= 0) {
-      setError("Product ID must be a positive number.");
+    if (mode === "PRODUCT" && !selectedProduct) {
+      setError("Please select a product.");
       setLoadingForecast(false);
       return;
     }
 
-    const payload: ForecastRequest = {
-      product_id: pid,
-      history_days: historyDays,
-      forecast_days: forecastDays,
-      period,
-    };
-
     try {
-      const result = await mlAPI.forecastSales(payload);
+      const result = await mlAPI.forecastSales({
+        scope: mode,
+        // Envoi flexible : SKU ou Name (prioritÃ© SKU)
+        sku: mode === "PRODUCT" ? selectedProduct!.sku : null,
+        name: mode === "PRODUCT" && !selectedProduct!.sku ? selectedProduct!.name : null,
+        product_id: mode === "PRODUCT" ? selectedProduct!.id : null,
+        forecast_days: forecastDays,
+        period,
+      });
+
       setForecast(result);
     } catch (err: any) {
-      console.error("âŒ Forecast error", err);
-      const msg = err.response?.data?.detail || err.message;
-      setError("Forecast failed : " + String(msg));
+      const msg = err.response?.data?.detail || err.message || "Unknown error";
+      setError("Forecast failed: " + msg);
     } finally {
       setLoadingForecast(false);
     }
   };
 
-  // ---------------------------------------------------------
-  // ANOMALY DETECTION
-  // ---------------------------------------------------------
+  // --------------------------------------------
+  // DETECT ANOMALIES
+  // --------------------------------------------
   const handleAnomalies = async () => {
     setError(null);
     setAnomalies(null);
     setLoadingAnomalies(true);
 
-    const pid = Number(productId);
-    if (!pid || pid <= 0) {
-      setError("Product ID must be a positive number.");
+    if (mode === "PRODUCT" && !selectedProduct) {
+      setError("Please select a product.");
       setLoadingAnomalies(false);
       return;
     }
 
-    const payload: AnomalyRequest = {
-      product_id: pid,
-      history_days: historyDays,
-      period,
-    };
-
     try {
-      const result = await mlAPI.detectAnomalies(payload);
+      const result = await mlAPI.detectAnomalies({
+        scope: mode,
+        sku: mode === "PRODUCT" ? selectedProduct!.sku : null,
+        name: mode === "PRODUCT" && !selectedProduct!.sku ? selectedProduct!.name : null,
+        product_id: mode === "PRODUCT" ? selectedProduct!.id : null,
+        period,
+      });
+
       setAnomalies(result);
     } catch (err: any) {
-      console.error("âŒ Anomaly error", err);
-      const msg = err.response?.data?.detail || err.message;
-      setError("Anomaly detection failed : " + String(msg));
+      const msg = err.response?.data?.detail || err.message || "Unknown error";
+      setError("Anomaly detection failed: " + msg);
     } finally {
       setLoadingAnomalies(false);
     }
   };
 
-  // ---------------------------------------------------------
-  // RENDERING
-  // ---------------------------------------------------------
+  // --------------------------------------------
+  // CHART DATA
+  // --------------------------------------------
+  const chartData = forecast
+    ? forecast.dates.map((date, i) => ({
+        date,
+        sales: forecast.predictions[i],
+      }))
+    : [];
+
   return (
-    <div className="min-h-screen p-6 bg-gray-50">
-      <div className="max-w-6xl mx-auto space-y-10">
-        
-        <h1 className="text-4xl font-bold">Machine Learning</h1>
+    <div className="min-h-screen bg-gray-50">
+      {/* HEADER */}
+      <header className="bg-white shadow-sm border-b">
+        <div className="px-6 py-4 flex items-center justify-between">
+          <div className="flex items-center gap-4">
+            <button className="lg:hidden">
+              <Menu className="w-6 h-6" />
+            </button>
+            <div className="flex items-center gap-3">
+              <div className="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-xl">
+                S
+              </div>
+              <h1 className="text-2xl font-bold text-gray-900">SalesFlow</h1>
+            </div>
+          </div>
 
-        {/* ======================= FORMULAIRE ML ======================= */}
-        <div className="bg-white p-6 rounded-xl shadow space-y-6">
-          <h2 className="text-2xl font-semibold">ML Parameters</h2>
+          <div className="flex items-center gap-4">
+            <button className="px-4 py-2 bg-gray-100 rounded-lg text-sm font-medium flex items-center gap-2">
+              <Calendar className="w-4 h-4" />
+              30-day
+            </button>
+            <div className="w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center">
+              <User className="w-6 h-6 text-gray-600" />
+            </div>
+          </div>
+        </div>
+      </header>
 
-          <div className="grid md:grid-cols-4 gap-6">
-            <div>
-              <label className="font-medium">Product ID</label>
-              <input
-                type="number"
-                className="w-full mt-1 p-2 border rounded"
-                value={productId}
-                onChange={(e) => setProductId(e.target.value)}
-              />
+      <div className="p-6 max-w-7xl mx-auto space-y-8">
+        {/* TITLE */}
+        <motion.div
+          initial={{ opacity: 0, y: -20 }}
+          animate={{ opacity: 1, y: 0 }}
+          className="text-center"
+        >
+          <h1 className="text-5xl font-extrabold bg-gradient-to-r from-blue-600 to-purple-700 text-transparent bg-clip-text">
+            Machine Learning
+          </h1>
+          <p className="text-xl text-gray-600 mt-3">
+            Advanced sales forecasting and anomaly detection
+          </p>
+        </motion.div>
+
+        {/* PARAMETERS */}
+        <motion.div
+          initial={{ opacity: 0, y: 20 }}
+          animate={{ opacity: 1, y: 0 }}
+          transition={{ delay: 0.1 }}
+          className="bg-white rounded-2xl shadow-lg border p-8"
+        >
+          <h2 className="text-2xl font-bold text-gray-800 mb-8">
+            ML Parameters
+          </h2>
+
+          {/* MODE */}
+          <div className="mb-8">
+            <label className="block text-sm font-medium text-gray-700 mb-3">
+              Analysis Mode
+            </label>
+            <div className="flex gap-8">
+              <label className="flex items-center gap-3 cursor-pointer">
+                <input
+                  type="radio"
+                  checked={mode === "GLOBAL"}
+                  onChange={() => {
+                    setMode("GLOBAL");
+                    setSelectedProduct(null);
+                    setSearchQuery("");
+                  }}
+                  className="w-5 h-5 text-blue-600"
+                />
+                <span className="text-lg font-medium">Global Forecast</span>
+              </label>
+              <label className="flex items-center gap-3 cursor-pointer">
+                <input
+                  type="radio"
+                  checked={mode === "PRODUCT"}
+                  onChange={() => setMode("PRODUCT")}
+                  className="w-5 h-5 text-blue-600"
+                />
+                <span className="text-lg font-medium">Per Product</span>
+              </label>
             </div>
+          </div>
 
-            <div>
-              <label className="font-medium">History Days</label>
+          {/* PRODUCT SEARCH */}
+          <div className="mb-8">
+            <label className="block text-sm font-medium text-gray-700 mb-2">
+              Product Search {mode === "PRODUCT" && "(SKU or Name)"}
+            </label>
+            <div className="relative">
               <input
-                type="number"
-                className="w-full mt-1 p-2 border rounded"
-                value={historyDays}
-                onChange={(e) => setHistoryDays(Number(e.target.value))}
+                type="text"
+                disabled={mode === "GLOBAL"}
+                placeholder={
+                  mode === "GLOBAL"
+                    ? "Global mode active"
+                    : "Type SKU or product name..."
+                }
+                className={`w-full px-4 py-3 pl-12 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${
+                  mode === "GLOBAL" ? "bg-gray-100 cursor-not-allowed" : ""
+                }`}
+                value={searchQuery}
+                onChange={(e) => setSearchQuery(e.target.value)}
               />
+              <Search className="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" />
             </div>
 
+            {mode === "PRODUCT" && searchQuery && filteredProducts.length > 0 && (
+              <div className="mt-2 bg-white border rounded-xl shadow-lg max-h-60 overflow-auto z-10">
+                {filteredProducts.map((p) => (
+                  <button
+                    key={p.id}
+                    onClick={() => {
+                      setSelectedProduct(p);
+                      setSearchQuery(`${p.sku} - ${p.name}`);
+                    }}
+                    className="w-full px-4 py-3 text-left hover:bg-blue-50 transition"
+                  >
+                    <p className="font-medium">{p.name}</p>
+                    <p className="text-sm text-gray-500">
+                      SKU: {p.sku} â€¢ ${p.price}
+                    </p>
+                  </button>
+                ))}
+              </div>
+            )}
+          </div>
+
+          {/* DAYS & PERIOD */}
+          <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
             <div>
-              <label className="font-medium">Forecast Days</label>
+              <label className="block text-sm font-medium text-gray-700 mb-2">
+                Forecast Days
+              </label>
               <input
                 type="number"
-                className="w-full mt-1 p-2 border rounded"
+                min={1}
+                max={365}
+                className="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500"
                 value={forecastDays}
                 onChange={(e) => setForecastDays(Number(e.target.value))}
               />
             </div>
 
             <div>
-              <label className="font-medium">Period</label>
+              <label className="block text-sm font-medium text-gray-700 mb-2">
+                Aggregation Period
+              </label>
               <select
-                className="w-full mt-1 p-2 border rounded"
+                className="w-full px-4 py-3 border rounded-xl bg-white focus:ring-2 focus:ring-blue-500"
                 value={period}
                 onChange={(e) => setPeriod(e.target.value as AnalyticsPeriod)}
               >
@@ -149,11 +309,12 @@ export default function MLPage() {
             </div>
           </div>
 
-          <div className="flex gap-4 pt-4">
+          {/* ACTIONS */}
+          <div className="flex gap-6 justify-center">
             <button
               onClick={handleForecast}
               disabled={loadingForecast}
-              className="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"
+              className="px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-md transition disabled:opacity-70"
             >
               {loadingForecast ? "Forecasting..." : "Run Forecast"}
             </button>
@@ -161,102 +322,194 @@ export default function MLPage() {
             <button
               onClick={handleAnomalies}
               disabled={loadingAnomalies}
-              className="px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50"
+              className="px-8 py-4 bg-red-600 hover:bg-red-700 text-white font-bold rounded-xl shadow-md transition disabled:opacity-70"
             >
               {loadingAnomalies ? "Scanning..." : "Detect Anomalies"}
             </button>
           </div>
-        </div>
+        </motion.div>
 
-        {/* ======================= ERROR ======================= */}
+        {/* ERROR */}
         {error && (
-          <div className="p-4 bg-red-100 border border-red-400 rounded-lg text-red-700">
+          <motion.div
+            initial={{ opacity: 0 }}
+            animate={{ opacity: 1 }}
+            className="p-6 bg-red-50 border border-red-200 rounded-xl text-red-700 font-medium text-center"
+          >
+            <AlertTriangle className="w-6 h-6 inline mr-2" />
             {error}
-          </div>
+          </motion.div>
         )}
 
-        {/* ======================= FORECAST RESULT ======================= */}
+        {/* FORECAST RESULTS */}
         {forecast && (
-          <div className="bg-white p-6 rounded-xl shadow">
-            <h2 className="text-2xl font-bold text-blue-600 mb-4">
-              Forecast Results
-            </h2>
-
-            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
-              <div className="bg-blue-50 p-4 rounded">
-                <p>Total</p>
-                <p className="text-2xl font-bold">{forecast.summary.total}</p>
+          <motion.div
+            initial={{ opacity: 0, y: 30 }}
+            animate={{ opacity: 1, y: 0 }}
+            className="space-y-8"
+          >
+            {/* Summary Cards */}
+            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
+              <div className="bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-2xl p-6 shadow-lg">
+                <p className="text-blue-100 text-sm">Total Forecasted</p>
+                <p className="text-3xl font-bold mt-2">
+                  {forecast.summary.total.toLocaleString()}
+                </p>
+                <p className="text-blue-100 text-sm mt-1">units</p>
               </div>
 
-              <div className="bg-green-50 p-4 rounded">
-                <p>Daily Avg</p>
-                <p className="text-2xl font-bold">
-                  {forecast.summary.daily_average}
+              <div className="bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-2xl p-6 shadow-lg">
+                <p className="text-purple-100 text-sm">Daily Average</p>
+                <p className="text-3xl font-bold mt-2">
+                  {Math.round(forecast.summary.daily_average)}
                 </p>
+                <p className="text-purple-100 text-sm mt-1">units/day</p>
               </div>
 
-              <div className="bg-purple-50 p-4 rounded">
-                <p>Peak</p>
-                <p className="text-2xl font-bold">
+              <div className="bg-gradient-to-br from-orange-500 to-red-500 text-white rounded-2xl p-6 shadow-lg">
+                <p className="text-orange-100 text-sm">Peak Forecast</p>
+                <p className="text-3xl font-bold mt-2">
                   {forecast.summary.peak_value}
                 </p>
-                <p>{forecast.summary.peak_day}</p>
+                <p className="text-orange-100 text-sm mt-1">
+                  on {forecast.summary.peak_day}
+                </p>
               </div>
 
-              <div className="bg-gray-100 p-4 rounded">
-                <p>Trend</p>
-                <p className="text-xl font-bold">{forecast.summary.trend}</p>
+              <div className="bg-gradient-to-br from-green-500 to-emerald-600 text-white rounded-2xl p-6 shadow-lg">
+                <TrendingUp className="w-8 h-8 mb-2" />
+                <p className="text-green-100 text-sm">Trend</p>
+                <p className="text-2xl font-bold capitalize">
+                  {forecast.summary.trend}
+                </p>
+                <p className="text-green-100 text-sm mt-1">
+                  {forecast.summary.period_label}
+                </p>
               </div>
             </div>
 
-            <h3 className="font-semibold mb-3">Predictions</h3>
-            <div className="max-h-64 overflow-auto space-y-2">
-              {forecast.dates.map((date, i) => (
-                <div
-                  key={i}
-                  className="flex justify-between bg-gray-50 p-2 rounded"
-                >
-                  <span>{date}</span>
-                  <span>{forecast.predictions[i]}</span>
-                </div>
-              ))}
+            {/* Chart */}
+            <div className="bg-white rounded-2xl shadow-lg border p-8">
+              <div className="flex items-center justify-between mb-6">
+                <h2 className="text-2xl font-bold text-gray-800">
+                  Sales Forecast
+                  {forecast.scope === "PRODUCT" && forecast.product && (
+                    <span className="text-blue-600">
+                      {" - "} {forecast.product.name} ({forecast.product.sku})
+                    </span>
+                  )}
+                </h2>
+                <Package className="w-8 h-8 text-blue-600" />
+              </div>
+
+              <div className="h-96">
+                <ResponsiveContainer width="100%" height="100%">
+                  <LineChart data={chartData}>
+                    <CartesianGrid strokeDasharray="4 4" stroke="#e0e0e0" />
+                    <XAxis dataKey="date" stroke="#666" />
+                    <YAxis stroke="#666" />
+                    <Tooltip
+                      contentStyle={{
+                        backgroundColor: "rgba(255, 255, 255, 0.95)",
+                        border: "1px solid #ccc",
+                        borderRadius: "8px",
+                      }}
+                    />
+                    <Line
+                      type="monotone"
+                      dataKey="sales"
+                      stroke="#6366f1"
+                      strokeWidth={4}
+                      dot={{ fill: "#6366f1", r: 6 }}
+                      activeDot={{ r: 8 }}
+                    />
+                  </LineChart>
+                </ResponsiveContainer>
+              </div>
             </div>
-          </div>
+          </motion.div>
         )}
 
-        {/* ======================= ANOMALIES RESULT ======================= */}
-        {anomalies && (
-          <div className="bg-white p-6 rounded-xl shadow">
-            <h2 className="text-2xl font-bold text-red-600 mb-4">
-              Anomalies ({anomalies.count})
+        {/* ANOMALIES RESULTS */}
+        {anomalies && anomalies.count > 0 && (
+          <motion.div
+            initial={{ opacity: 0, y: 30 }}
+            animate={{ opacity: 1, y: 0 }}
+            className="space-y-6"
+          >
+            <h2 className="text-3xl font-bold text-center text-red-600">
+              Detected Anomalies ({anomalies.count})
             </h2>
 
-            {anomalies.count === 0 ? (
-              <p className="text-green-600 font-medium">
-                No anomalies detected.
-              </p>
-            ) : (
-              <div className="space-y-4">
-                {anomalies.anomalies.map((a, i) => (
-                  <div
-                    key={i}
-                    className="p-4 rounded-lg border-l-4 bg-red-50 border-red-500"
-                  >
-                    <p className="font-bold">{a.date}</p>
-                    <p className="text-sm">
-                      {a.type} â€” {a.severity.toUpperCase()}
-                    </p>
-                    <p>{a.explanation}</p>
-                    <p className="text-xs text-gray-600">
-                      Score Z: {a.score}
-                    </p>
+            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
+              {anomalies.anomalies.map((anom, i) => (
+                <motion.div
+                  key={i}
+                  initial={{ opacity: 0, scale: 0.9 }}
+                  animate={{ opacity: 1, scale: 1 }}
+                  transition={{ delay: i * 0.1 }}
+                  className={`rounded-2xl shadow-lg border p-6 ${
+                    anom.severity === "high"
+                      ? "bg-red-50 border-red-300"
+                      : "bg-orange-50 border-orange-300"
+                  }`}
+                >
+                  <div className="flex items-center justify-between mb-4">
+                    <AlertTriangle
+                      className={`w-10 h-10 ${
+                        anom.severity === "high" ? "text-red-600" : "text-orange-600"
+                      }`}
+                    />
+                    <span
+                      className={`px-4 py-2 rounded-full text-sm font-bold ${
+                        anom.severity === "high"
+                          ? "bg-red-200 text-red-800"
+                          : "bg-orange-200 text-orange-800"
+                      }`}
+                    >
+                      {anom.severity === "high" ? "Critical" : "Moderate"}
+                    </span>
                   </div>
-                ))}
-              </div>
-            )}
-          </div>
+
+                  <p className="text-lg font-semibold text-gray-800">
+                    {anom.date}
+                  </p>
+                  <p className="text-gray-600 mt-2">
+                    Observed sales: <strong>{anom.value}</strong>
+                  </p>
+                  <p className="text-gray-600">
+                    Z-score: <strong>{anom.score.toFixed(2)}</strong>
+                  </p>
+                  <p className="text-gray-600">
+                    Type: <strong>{anom.type}</strong>
+                  </p>
+                  <p className="mt-4 text-sm text-gray-700 italic">
+                    {anom.explanation}
+                  </p>
+                </motion.div>
+              ))}
+            </div>
+          </motion.div>
+        )}
+
+        {anomalies && anomalies.count === 0 && (
+          <motion.div
+            initial={{ opacity: 0 }}
+            animate={{ opacity: 1 }}
+            className="text-center py-12 bg-green-50 rounded-2xl border border-green-200"
+          >
+            <div className="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
+              <TrendingUp className="w-10 h-10 text-white" />
+            </div>
+            <p className="text-2xl font-bold text-green-800">
+              No anomalies detected
+            </p>
+            <p className="text-green-700 mt-2">
+              Sales are consistent with expected trends.
+            </p>
+          </motion.div>
         )}
       </div>
     </div>
   );
-}
+}
\ No newline at end of file
diff --git a/salesflow-frontend/src/pages/Products.tsx b/salesflow-frontend/src/pages/Products.tsx
index 3068e8f..8f99f86 100644
--- a/salesflow-frontend/src/pages/Products.tsx
+++ b/salesflow-frontend/src/pages/Products.tsx
@@ -3,8 +3,10 @@ import { useEffect, useMemo, useState } from "react";
 import { productAPI } from "../services/productAPI";
 import type { Product } from "../types/product";
 import { useNavigate } from "react-router-dom";
+import { motion } from "framer-motion";
+import toast from "react-hot-toast"; // â† AJOUTÃ‰
 
-type SortKey = "name" | "price" | "stockQuantity" | "sku";
+type SortKey = "name" | "price" | "sku" | "category";
 type SortDirection = "asc" | "desc";
 
 interface SortState {
@@ -18,10 +20,9 @@ const EMPTY_FORM: Omit<Product, "id"> = {
   name: "",
   sku: "",
   price: 0,
-  stockQuantity: 0,
   description: "",
   imageUrl: "",
-  lowStockThreshold: 1,
+  category: "",
 };
 
 export default function Products() {
@@ -30,7 +31,6 @@ export default function Products() {
   const [form, setForm] = useState<Omit<Product, "id"> | Product | null>(null);
   const [mode, setMode] = useState<Mode>("idle");
 
-  const [loading, setLoading] = useState(false);
   const [saving, setSaving] = useState(false);
   const [error, setError] = useState<string | null>(null);
 
@@ -41,47 +41,42 @@ export default function Products() {
 
   const navigate = useNavigate();
 
-  // ------------------------
   // LOAD PRODUCTS
-  // ------------------------
   useEffect(() => {
     loadProducts();
   }, []);
 
   async function loadProducts() {
     try {
-      setLoading(true);
       const res = await productAPI.getAll();
-      setProducts(res.data);
+      setProducts(res.data || []);
 
       if (selected) {
         const updated = res.data.find((p: Product) => p.id === selected.id);
         setSelected(updated ?? null);
+        if (mode === "view" || mode === "edit") setForm(updated ?? null);
       }
     } catch (e) {
       console.error(e);
       setError("Failed to load products.");
-    } finally {
-      setLoading(false);
     }
   }
 
-  // ------------------------
   // FILTER + SORT + PAGINATION
-  // ------------------------
   const filteredProducts = useMemo(() => {
     const q = search.toLowerCase().trim();
     let list: Product[] = [...products];
 
     if (q) {
       list = list.filter(
-        (p: Product) =>
+        (p) =>
           p.name.toLowerCase().includes(q) ||
-          p.sku.toLowerCase().includes(q)
+          p.sku.toLowerCase().includes(q) ||
+          p.category?.toLowerCase().includes(q)
       );
     }
 
-    list.sort((a: Product, b: Product) => {
+    list.sort((a, b) => {
       const { key, direction } = sort;
       const dir = direction === "asc" ? 1 : -1;
       const av = a[key];
@@ -90,33 +85,27 @@ export default function Products() {
       if (typeof av === "number" && typeof bv === "number") {
         return (av - bv) * dir;
       }
-      return String(av).localeCompare(String(bv)) * dir;
+      return String(av ?? "").localeCompare(String(bv ?? "")) * dir;
     });
 
     return list;
   }, [products, search, sort]);
 
   const totalPages = Math.max(1, Math.ceil(filteredProducts.length / pageSize));
-
-  useEffect(() => {
-    if (page > totalPages) setPage(1);
-  }, [totalPages]);
-
   const pagedProducts = useMemo(() => {
     const start = (page - 1) * pageSize;
     return filteredProducts.slice(start, start + pageSize);
   }, [filteredProducts, page]);
 
   const toggleSort = (key: SortKey) => {
-    setSort(prev => ({
-      key,
-      direction: prev.key === key && prev.direction === "asc" ? "desc" : "asc",
-    }));
+    setSort((prev) =>
+      prev.key === key
+        ? { key, direction: prev.direction === "asc" ? "desc" : "asc" }
+        : { key, direction: "asc" }
+    );
   };
 
-  // ------------------------
   // CRUD HANDLERS
-  // ------------------------
   const startCreate = () => {
     setMode("create");
     setSelected(null);
@@ -128,18 +117,18 @@ export default function Products() {
     try {
       setError(null);
       const res = await productAPI.getById(id);
-      setSelected(res.data);
-      setForm(res.data);
-      setMode("view"); // â† Toujours ouvrir en mode VIEW
+      const product = res.data;
+      setSelected(product);
+      setForm(product);
+      setMode("view");
     } catch (e) {
       console.error(e);
-      setError("Failed to load product.");
+      toast.error("Failed to load product details.");
     }
   };
 
   const enterEditMode = () => {
     if (!selected) return;
-    setForm({ ...selected });
     setMode("edit");
   };
 
@@ -147,15 +136,19 @@ export default function Products() {
     if (mode === "create") {
       setMode("idle");
       setForm(null);
+      setSelected(null);
     } else if (selected) {
       setForm(selected);
       setMode("view");
     }
   };
 
-  const handleInput = (field: keyof Omit<Product, "id">, value: string | number) => {
+  const handleInput = (
+    field: keyof Omit<Product, "id">,
+    value: string | number
+  ) => {
     if (!form) return;
-    setForm(prev => prev ? { ...prev, [field]: value } : null);
+    setForm((prev) => (prev ? { ...prev, [field]: value } : null));
   };
 
   const handleSave = async () => {
@@ -168,353 +161,337 @@ export default function Products() {
       name: String(form.name).trim(),
       sku: String(form.sku).trim(),
       price: Number(form.price) || 0,
-      stockQuantity: Number(form.stockQuantity) || 0,
-      description: String(form.description ?? "").trim(),
-      imageUrl: String(form.imageUrl ?? "").trim(),
-      lowStockThreshold: Number(form.lowStockThreshold) || 1,
+      description: form.description?.trim() || null,
+      imageUrl: form.imageUrl?.trim() || null,
+      category: form.category?.trim() || null,
     };
 
     if (!payload.name || !payload.sku) {
-      setError("Name and SKU are required.");
+      toast.error("Name and SKU are required.");
       setSaving(false);
       return;
     }
 
     try {
-      if (mode === "edit" && "id" in form && form.id) {
-        await productAPI.update(form.id, payload);
+      let updatedProduct;
+      if (mode === "edit" && selected?.sku) {
+        updatedProduct = await productAPI.updateBySku(selected.sku, payload);
       } else {
-        const created = await productAPI.create(payload);
-        setSelected(created.data);
-        setForm(created.data);
+        updatedProduct = await productAPI.create(payload);
       }
 
+      toast.success("Product saved successfully!");
       await loadProducts();
-      alert("Product saved successfully!");
-
-      // AprÃ¨s sauvegarde â†’ retour en mode VIEW
+      setSelected(updatedProduct.data);
+      setForm(updatedProduct.data);
       setMode("view");
-    } catch (e) {
-      console.error(e);
-      setError("Failed to save product.");
+    } catch (e: any) {
+      toast.error(e.response?.data?.message || "Failed to save product.");
     } finally {
       setSaving(false);
     }
   };
 
   const handleDelete = async () => {
-    if (!selected || !confirm("Delete this product permanently?")) return;
+    if (!selected || !confirm("Delete this product from catalogue? Stock will remain.")) return;
 
     try {
       setSaving(true);
-      await productAPI.delete(selected.id!);
+      await productAPI.delete(selected.id);
+      toast.success("Product deleted from catalogue.");
       await loadProducts();
       setSelected(null);
       setForm(null);
       setMode("idle");
-      alert("Product deleted.");
     } catch (e) {
-      console.error(e);
-      setError("Failed to delete product.");
+      toast.error("Failed to delete product.");
     } finally {
       setSaving(false);
     }
   };
 
-  // ------------------------
   // RENDER
-  // ------------------------
   return (
-    <div className="p-6 flex gap-6">
-      {/* LEFT TABLE */}
+    <div className="p-6 flex gap-8 min-h-screen bg-gradient-to-br from-blue-50 via-cyan-50 to-indigo-50">
+      {/* LEFT: CATALOGUE TABLE */}
       <div className="flex-1">
-        <div className="flex justify-between items-center mb-6">
-          <h1 className="text-3xl font-bold">Products</h1>
-          <button
-            onClick={startCreate}
-            className="px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition shadow"
-          >
-            + Add Product
-          </button>
-        </div>
+        <motion.div initial={{ opacity: 0, y: -20 }} animate={{ opacity: 1, y: 0 }} className="mb-10">
+          <div className="flex justify-between items-center">
+            <h1 className="text-5xl font-extrabold bg-gradient-to-r from-blue-600 to-indigo-700 text-transparent bg-clip-text">
+              Product Catalogue
+            </h1>
+            <button
+              onClick={startCreate}
+              className="px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition transform hover:scale-105"
+            >
+              + Add Product
+            </button>
+          </div>
+          <p className="text-xl text-gray-600 mt-3">Manage your product references (name, price, image, category)</p>
+        </motion.div>
 
-        <div className="flex justify-between items-center mb-4">
-          <input
-            type="text"
-            placeholder="Search by name or SKU..."
-            className="px-4 py-2 border rounded-lg w-80 focus:outline-none focus:ring-2 focus:ring-blue-500"
-            value={search}
-            onChange={e => setSearch(e.target.value)}
-          />
-          <span className="text-gray-600">{filteredProducts.length} result(s)</span>
-        </div>
+        <input
+          type="text"
+          placeholder="Search by name, SKU or category..."
+          className="w-full max-w-2xl px-6 py-4 text-lg border border-gray-300 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-300 mb-8 shadow-lg"
+          value={search}
+          onChange={(e) => setSearch(e.target.value)}
+        />
 
         {error && (
-          <div className="mb-4 p-4 bg-red-50 border border-red-300 text-red-700 rounded-lg">
+          <div className="mb-8 p-6 bg-red-50 border border-red-200 text-red-700 rounded-2xl shadow">
             {error}
           </div>
         )}
 
-        <div className="bg-white rounded-xl shadow overflow-hidden">
-          {loading ? (
-            <div className="p-12 text-center text-gray-500">Loading products...</div>
-          ) : (
-            <>
-              <table className="w-full">
-                <thead className="bg-gray-50 border-b">
-                  <tr className="text-left text-xs font-medium text-gray-600 uppercase tracking-wider">
-                    <th onClick={() => toggleSort("name")} className="px-6 py-4 cursor-pointer hover:bg-gray-100">Name</th>
-                    <th onClick={() => toggleSort("price")} className="px-6 py-4 cursor-pointer hover:bg-gray-100">Price</th>
-                    <th onClick={() => toggleSort("stockQuantity")} className="px-6 py-4 cursor-pointer hover:bg-gray-100">Stock</th>
-                    <th onClick={() => toggleSort("sku")} className="px-6 py-4 cursor-pointer hover:bg-gray-100">SKU</th>
-                    <th className="px-6 py-4">Actions</th>
+        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.2 }}
+          className="bg-white rounded-3xl shadow-2xl overflow-hidden">
+          <div className="overflow-x-auto">
+            <table className="w-full">
+              <thead className="bg-gradient-to-r from-blue-50 to-cyan-50">
+                <tr>
+                  <th onClick={() => toggleSort("name")} className="px-8 py-5 text-left text-sm font-bold text-gray-700 cursor-pointer hover:bg-blue-100 transition">
+                    Name {sort.key === "name" && (sort.direction === "asc" ? "â†‘" : "â†“")}
+                  </th>
+                  <th onClick={() => toggleSort("sku")} className="px-8 py-5 text-left text-sm font-bold text-gray-700 cursor-pointer hover:bg-blue-100 transition">
+                    SKU {sort.key === "sku" && (sort.direction === "asc" ? "â†‘" : "â†“")}
+                  </th>
+                  <th onClick={() => toggleSort("price")} className="px-8 py-5 text-left text-sm font-bold text-gray-700 cursor-pointer hover:bg-blue-100 transition">
+                    Price {sort.key === "price" && (sort.direction === "asc" ? "â†‘" : "â†“")}
+                  </th>
+                  <th onClick={() => toggleSort("category")} className="px-8 py-5 text-left text-sm font-bold text-gray-700 cursor-pointer hover:bg-blue-100 transition">
+                    Category {sort.key === "category" && (sort.direction === "asc" ? "â†‘" : "â†“")}
+                  </th>
+                  <th className="px-8 py-5 text-left text-sm font-bold text-gray-700">Actions</th>
+                </tr>
+              </thead>
+              <tbody className="divide-y divide-gray-100">
+                {pagedProducts.map((p) => (
+                  <motion.tr
+                    key={p.id}
+                    whileHover={{ backgroundColor: "#f0f9ff" }}
+                    className={`cursor-pointer transition-all ${selected?.id === p.id ? "bg-blue-50 border-l-4 border-blue-600" : ""}`}
+                    onClick={() => selectProduct(p.id!)}
+                  >
+                    <td className="px-8 py-6 font-medium text-gray-900">{p.name}</td>
+                    <td className="px-8 py-6 text-gray-600 font-mono">{p.sku}</td>
+                    <td className="px-8 py-6 font-semibold text-blue-700">${p.price.toFixed(2)}</td>
+                    <td className="px-8 py-6 text-gray-600">{p.category || "â€”"}</td>
+                    <td className="px-8 py-6">
+                      <button
+                        onClick={(e) => {
+                          e.stopPropagation();
+                          navigate(`/inventory?productId=${p.id}`);
+                        }}
+                        className="text-blue-600 hover:text-blue-800 font-medium underline"
+                      >
+                        Manage Stock â†’
+                      </button>
+                    </td>
+                  </motion.tr>
+                ))}
+                {pagedProducts.length === 0 && (
+                  <tr>
+                    <td colSpan={5} className="text-center py-16 text-gray-500 text-xl">
+                      No products in catalogue.
+                    </td>
                   </tr>
-                </thead>
-                <tbody className="divide-y divide-gray-200">
-                  {pagedProducts.map((p: Product) => (
-                    <tr
-                      key={p.id}
-                      className={`hover:bg-gray-50 cursor-pointer transition ${selected?.id === p.id ? "bg-blue-50" : ""}`}
-                      onClick={() => selectProduct(p.id!)}
-                    >
-                      <td className="px-6 py-4 font-medium">{p.name}</td>
-                      <td className="px-6 py-4">${Number(p.price).toFixed(2)}</td>
-                      <td className="px-6 py-4">
-                        <span className={`inline-flex px-2.5 py-1 text-xs font-semibold rounded-full ${
-                          p.stockQuantity === 0 ? "bg-red-100 text-red-800" :
-                          p.stockQuantity < p.lowStockThreshold ? "bg-yellow-100 text-yellow-800" :
-                          "bg-green-100 text-green-800"
-                        }`}>
-                          {p.stockQuantity}
-                        </span>
-                      </td>
-                      <td className="px-6 py-4 text-sm text-gray-600">{p.sku}</td>
-                      <td className="px-6 py-4">
-                        <button
-                          onClick={(e) => {
-                            e.stopPropagation();
-                            navigate(`/inventory?productId=${p.id}`);
-                          }}
-                          className="text-blue-600 hover:text-blue-800 font-medium"
-                        >
-                          View Stock â†’
-                        </button>
-                      </td>
-                    </tr>
-                  ))}
-                  {pagedProducts.length === 0 && (
-                    <tr>
-                      <td colSpan={5} className="px-6 py-12 text-center text-gray-500">
-                        No products found.
-                      </td>
-                    </tr>
-                  )}
-                </tbody>
-              </table>
-
-              <div className="flex items-center justify-between px-6 py-4 bg-gray-50 border-t text-sm">
-                <button
-                  onClick={() => setPage(p => p - 1)}
-                  disabled={page <= 1}
-                  className="px-4 py-2 border rounded disabled:opacity-50 hover:bg-gray-100"
-                >
-                  Previous
-                </button>
-                <span className="text-gray-700">
-                  Page <strong>{page}</strong> of <strong>{totalPages}</strong>
-                </span>
-                <button
-                  onClick={() => setPage(p => p + 1)}
-                  disabled={page >= totalPages}
-                  className="px-4 py-2 border rounded disabled:opacity-50 hover:bg-gray-100"
-                >
-                  Next
-                </button>
-              </div>
-            </>
-          )}
-        </div>
+                )}
+              </tbody>
+            </table>
+          </div>
+
+          {/* PAGINATION */}
+          <div className="flex items-center justify-between px-8 py-6 bg-gray-50 border-t">
+            <button
+              onClick={() => setPage((p) => Math.max(1, p - 1))}
+              disabled={page <= 1}
+              className="px-6 py-3 border border-blue-300 text-blue-700 rounded-xl disabled:opacity-50 hover:bg-blue-50 transition font-medium"
+            >
+              â† Previous
+            </button>
+            <span className="text-lg font-semibold text-gray-700">
+              Page <strong>{page}</strong> of <strong>{totalPages}</strong>
+            </span>
+            <button
+              onClick={() => setPage((p) => Math.min(totalPages, p + 1))}
+              disabled={page >= totalPages}
+              className="px-6 py-3 border border-blue-300 text-blue-700 rounded-xl disabled:opacity-50 hover:bg-blue-50 transition font-medium"
+            >
+              Next â†’
+            </button>
+          </div>
+        </motion.div>
       </div>
 
-      {/* RIGHT PANEL */}
+      {/* RIGHT PANEL â€” DETAILED VIEW / FORM */}
       <div className="w-96">
-        <div className="bg-white rounded-xl shadow p-6 sticky top-6 min-h-[500px]">
-          {/* IDLE */}
+        <div className="bg-white rounded-3xl shadow-2xl p-8 sticky top-6 min-h-[600px] flex flex-col">
           {mode === "idle" && (
-            <p className="text-center text-gray-500 mt-10">
-              Select a product or click â€œAdd Productâ€ to begin.
-            </p>
-          )}
-
-          {/* VIEW MODE */}
-          {mode === "view" && selected && (
-            <div className="space-y-6">
-              <div className="flex justify-between items-start">
-                <h2 className="text-2xl font-bold">Product Details</h2>
-                <button
-                  onClick={enterEditMode}
-                  className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm"
-                >
-                  Edit
-                </button>
-              </div>
-
-              {selected.imageUrl && (
-                <img
-                  src={selected.imageUrl}
-                  alt={selected.name}
-                  className="w-full h-64 object-cover rounded-lg shadow-md"
-                  onError={(e) => (e.currentTarget.src = "https://via.placeholder.com/400x300?text=No+Image")}
-                />
-              )}
-
-              <div className="space-y-3 text-sm">
-                <div>
-                  <span className="font-semibold text-gray-700">Name:</span>{" "}
-                  <span className="text-gray-900">{selected.name}</span>
-                </div>
-                <div>
-                  <span className="font-semibold text-gray-700">SKU:</span>{" "}
-                  <span className="text-gray-900">{selected.sku}</span>
-                </div>
-                <div>
-                  <span className="font-semibold text-gray-700">Price:</span>{" "}
-                  <span className="text-gray-900">${Number(selected.price).toFixed(2)}</span>
-                </div>
-                <div>
-                  <span className="font-semibold text-gray-700">Stock Quantity:</span>{" "}
-                  <span className="text-gray-900">{selected.stockQuantity}</span>
-                </div>
-                <div>
-                  <span className="font-semibold text-gray-700">Low Stock Threshold:</span>{" "}
-                  <span className="text-gray-900">{selected.lowStockThreshold}</span>
-                </div>
-                {selected.description && (
-                  <div>
-                    <span className="font-semibold text-gray-700">Description:</span>
-                    <p className="text-gray-900 mt-1">{selected.description}</p>
-                  </div>
-                )}
-              </div>
+            <div className="text-center py-20 flex-1 flex flex-col items-center justify-center">
+              <div className="bg-gray-200 border-2 border-dashed rounded-2xl w-32 h-32 mb-6" />
+              <p className="text-2xl text-gray-500">Select a product or add a new one</p>
             </div>
           )}
 
-          {/* CREATE & EDIT MODE */}
-          {(mode === "create" || mode === "edit") && form && (
-            <>
+          {(mode === "view" || mode === "edit" || mode === "create") && form && (
+            <div className="flex-1 flex flex-col">
+              {/* Header */}
               <div className="flex justify-between items-center mb-6">
-                <h2 className="text-2xl font-bold">
-                  {mode === "create" ? "Add New Product" : "Edit Product"}
+                <h2 className="text-3xl font-bold text-gray-800">
+                  {mode === "create" ? "New Product" : form.name}
                 </h2>
-                {mode === "edit" && (
+                {mode === "view" && (
                   <button
-                    onClick={cancelEditOrCreate}
-                    className="text-gray-500 hover:text-gray-700"
+                    onClick={enterEditMode}
+                    className="px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"
                   >
-                    Cancel
+                    Edit
+                  </button>
+                )}
+                {(mode === "edit" || mode === "create") && (
+                  <button onClick={cancelEditOrCreate} className="text-gray-500 hover:text-gray-700 text-2xl">
+                    âœ•
                   </button>
                 )}
               </div>
 
-              {form.imageUrl && (
+              {/* Product Image */}
+              {form.imageUrl ? (
                 <img
                   src={form.imageUrl}
                   alt={form.name}
-                  className="w-full h-64 object-cover rounded-lg mb-6 shadow-md"
-                  onError={(e) => (e.currentTarget.src = "https://via.placeholder.com/400x300?text=No+Image")}
+                  className="w-full h-64 object-cover rounded-2xl mb-6 shadow-lg"
+                  onError={(e) => (e.currentTarget.src = "https://via.placeholder.com/600x400?text=No+Image")}
                 />
+              ) : (
+                <div className="bg-gray-200 border-2 border-dashed rounded-2xl w-full h-64 mb-6 flex items-center justify-center">
+                  <span className="text-gray-500">No Image</span>
+                </div>
               )}
 
-              <div className="space-y-4">
+              {/* Details */}
+              <div className="space-y-4 flex-1">
                 <div>
-                  <label className="block text-sm font-medium mb-1">Name *</label>
-                  <input
-                    className="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
-                    value={form.name}
-                    onChange={e => handleInput("name", e.target.value)}
-                  />
+                  <label className="text-sm font-medium text-gray-600">Name</label>
+                  {mode === "view" ? (
+                    <p className="text-xl font-semibold text-gray-900">{form.name}</p>
+                  ) : (
+                    <input
+                      className="w-full px-5 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-300 mt-1"
+                      value={form.name}
+                      onChange={(e) => handleInput("name", e.target.value)}
+                    />
+                  )}
                 </div>
 
-                <div>
-                  <label className="block text-sm font-medium mb-1">SKU *</label>
-                  <input
-                    className="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
-                    value={form.sku}
-                    onChange={e => handleInput("sku", e.target.value)}
-                  />
-                </div>
+                {form.description && mode === "view" && (
+                  <div>
+                    <label className="text-sm font-medium text-gray-600">Description</label>
+                    <p className="text-gray-700">{form.description}</p>
+                  </div>
+                )}
 
-                <div>
-                  <label className="block text-sm font-medium mb-1">Price</label>
-                  <input
-                    type="number"
-                    step="0.01"
-                    className="w-full px-3 py-2 border rounded-lg"
-                    value={form.price}
-                    onChange={e => handleInput("price", parseFloat(e.target.value) || 0)}
-                  />
-                </div>
+                {mode !== "view" && (
+                  <div>
+                    <label className="text-sm font-medium text-gray-600">Description</label>
+                    <textarea
+                      rows={3}
+                      className="w-full px-5 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-300 mt-1 resize-none"
+                      value={form.description || ""}
+                      onChange={(e) => handleInput("description", e.target.value)}
+                    />
+                  </div>
+                )}
 
                 <div>
-                  <label className="block text-sm font-medium mb-1">Stock Quantity</label>
-                  <input
-                    type="number"
-                    className="w-full px-3 py-2 border rounded-lg"
-                    value={form.stockQuantity}
-                    onChange={e => handleInput("stockQuantity", parseInt(e.target.value) || 0)}
-                  />
+                  <label className="text-sm font-medium text-gray-600">Price</label>
+                  {mode === "view" ? (
+                    <p className="text-xl font-bold text-blue-700">${Number(form.price).toFixed(2)}</p>
+                  ) : (
+                    <input
+                      type="number"
+                      step="0.01"
+                      className="w-full px-5 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-300 mt-1"
+                      value={form.price}
+                      onChange={(e) => handleInput("price", parseFloat(e.target.value) || 0)}
+                    />
+                  )}
                 </div>
 
                 <div>
-                  <label className="block text-sm font-medium mb-1">Low Stock Threshold</label>
-                  <input
-                    type="number"
-                    className="w-full px-3 py-2 border rounded-lg"
-                    value={form.lowStockThreshold}
-                    onChange={e => handleInput("lowStockThreshold", parseInt(e.target.value) || 1)}
-                  />
+                  <label className="text-sm font-medium text-gray-600">SKU</label>
+                  {mode === "view" ? (
+                    <p className="font-mono text-gray-800">{form.sku}</p>
+                  ) : (
+                    <input
+                      className="w-full px-5 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-300 mt-1 font-mono"
+                      value={form.sku}
+                      onChange={(e) => handleInput("sku", e.target.value)}
+                    />
+                  )}
                 </div>
 
-                <div>
-                  <label className="block text-sm font-medium mb-1">Description</label>
-                  <textarea
-                    rows={3}
-                    className="w-full px-3 py-2 border rounded-lg"
-                    value={form.description}
-                    onChange={e => handleInput("description", e.target.value)}
-                  />
-                </div>
+                {(form.category || mode !== "view") && (
+                  <div>
+                    <label className="text-sm font-medium text-gray-600">Category</label>
+                    {mode === "view" ? (
+                      <p className="text-gray-700">{form.category}</p>
+                    ) : (
+                      <input
+                        className="w-full px-5 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-300 mt-1"
+                        value={form.category || ""}
+                        onChange={(e) => handleInput("category", e.target.value)}
+                      />
+                    )}
+                  </div>
+                )}
 
-                <div>
-                  <label className="block text-sm font-medium mb-1">Image URL</label>
-                  <input
-                    className="w-full px-3 py-2 border rounded-lg"
-                    value={form.imageUrl}
-                    onChange={e => handleInput("imageUrl", e.target.value)}
-                  />
-                </div>
+                {mode !== "view" && (
+                  <div>
+                    <label className="text-sm font-medium text-gray-600">Image URL</label>
+                    <input
+                      className="w-full px-5 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-300 mt-1"
+                      value={form.imageUrl || ""}
+                      onChange={(e) => handleInput("imageUrl", e.target.value)}
+                    />
+                  </div>
+                )}
               </div>
 
-              <div className="flex gap-3 mt-8">
-                <button
-                  onClick={handleSave}
-                  disabled={saving}
-                  className="flex-1 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition"
-                >
-                  {saving ? "Saving..." : "Save Product"}
-                </button>
-
-                {mode === "edit" && (
+              {/* Action Buttons */}
+              {(mode === "create" || mode === "edit") && (
+                <div className="flex gap-4 mt-8">
                   <button
-                    onClick={handleDelete}
+                    onClick={handleSave}
                     disabled={saving}
-                    className="flex-1 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition"
+                    className="flex-1 py-4 bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-bold rounded-xl hover:from-blue-700 hover:to-cyan-700 disabled:opacity-50 transition shadow-lg"
                   >
-                    {saving ? "Deleting..." : "Delete"}
+                    {saving ? "Saving..." : "Save"}
                   </button>
-                )}
-              </div>
-            </>
+                  {mode === "edit" && (
+                    <button
+                      onClick={handleDelete}
+                      disabled={saving}
+                      className="flex-1 py-4 bg-red-600 text-white font-bold rounded-xl hover:bg-red-700 disabled:opacity-50 transition shadow-lg"
+                    >
+                      Delete
+                    </button>
+                  )}
+                </div>
+              )}
+
+              {mode === "view" && (
+                <div className="mt-8">
+                  <button
+                    onClick={() => navigate(`/inventory?productId=${selected?.id}`)}
+                    className="w-full py-4 bg-gradient-to-r from-indigo-600 to-blue-600 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition"
+                  >
+                    Manage Stock â†’
+                  </button>
+                </div>
+              )}
+            </div>
           )}
         </div>
       </div>
diff --git a/salesflow-frontend/src/pages/Register.tsx b/salesflow-frontend/src/pages/Register.tsx
index 40ed0cb..f4f240c 100644
--- a/salesflow-frontend/src/pages/Register.tsx
+++ b/salesflow-frontend/src/pages/Register.tsx
@@ -1,3 +1,4 @@
+// src/pages/Register.tsx
 import { useState } from "react";
 import { useNavigate, Link } from "react-router-dom";
 import { authAPI } from "../services/api/javaApi";
@@ -26,7 +27,7 @@ const Register = () => {
     e.preventDefault();
     setErrorMsg("");
 
-    // Client-side validation
+    // Validation mot de passe
     if (form.password !== form.confirmPassword) {
       setErrorMsg("Passwords do not match.");
       return;
@@ -35,19 +36,12 @@ const Register = () => {
     setLoading(true);
 
     try {
-      // ----------------------------------------------------
-      // DEV MODE â€” emulate registration
-      // ----------------------------------------------------
       if (devMode) {
         console.log("DEV MODE: Fake registration:", form);
         navigate("/login");
         return;
       }
 
-      // ----------------------------------------------------
-      // REAL BACKEND CALL â€” Java expects:
-      // { username, phoneNumber, email, password, role? }
-      // ----------------------------------------------------
       await authAPI.register({
         username: form.username,
         phoneNumber: form.phoneNumber,
@@ -56,16 +50,13 @@ const Register = () => {
         role: "USER",
       });
 
-      // Redirect after success
       navigate("/login");
     } catch (error: any) {
       console.error("Register error:", error);
-
       const message =
         error?.response?.data?.message ||
         error?.message ||
         "Registration failed";
-
       setErrorMsg(message);
     } finally {
       setLoading(false);
@@ -73,121 +64,128 @@ const Register = () => {
   };
 
   return (
-    <div className="min-h-screen flex justify-center items-center bg-gray-100">
-      <div className="bg-white p-10 rounded-xl shadow-lg w-full max-w-md">
-        <h1 className="text-3xl font-bold text-center mb-6 text-gray-800">
-          Create Account
-        </h1>
-
-        {errorMsg && (
-          <div className="text-red-500 text-center mb-4">{errorMsg}</div>
-        )}
-
-        <form onSubmit={handleSubmit} className="space-y-6">
-          {/* Username */}
-          <div>
-            <label className="block text-gray-700 font-medium mb-1">
-              Username
-            </label>
-            <input
-              name="username"
-              type="text"
-              value={form.username}
-              onChange={handleChange}
-              required
-              className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
-              placeholder="e.g. marcel_kabila"
-            />
-          </div>
-
-          {/* Phone Number */}
-          <div>
-            <label className="block text-gray-700 font-medium mb-1">
-              Phone Number
-            </label>
-            <input
-              name="phoneNumber"
-              type="text"
-              value={form.phoneNumber}
-              onChange={handleChange}
-              required
-              className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
-              placeholder="0771000001"
-            />
-          </div>
-
-          {/* Email */}
-          <div>
-            <label className="block text-gray-700 font-medium mb-1">
-              Email
-            </label>
-            <input
-              name="email"
-              type="email"
-              value={form.email}
-              onChange={handleChange}
-              required
-              className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
-              placeholder="name@example.com"
-            />
+    <div className="min-h-screen bg-gradient-to-b from-slate-900 to-slate-800 flex items-center justify-center px-4">
+      {/* Carte principale */}
+      <div className="bg-white rounded-3xl shadow-2xl overflow-hidden w-full max-w-md">
+        {/* Header bleu avec logo S blanc */}
+        <div className="bg-gradient-to-br from-blue-600 to-blue-700 px-10 pt-16 pb-24 rounded-t-3xl text-center">
+          {/* Logo S blanc dans cercle bleu */}
+          <div className="inline-flex items-center justify-center w-24 h-24 bg-blue-500 rounded-full shadow-2xl mb-8">
+            <span className="text-6xl font-bold text-white">S</span>
           </div>
-
-          {/* Password */}
-          <div>
-            <label className="block text-gray-700 font-medium mb-1">
-              Password
-            </label>
-            <input
-              name="password"
-              type="password"
-              value={form.password}
-              onChange={handleChange}
-              required
-              className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
-              placeholder="Your password"
-            />
-          </div>
-
-          {/* Confirm Password */}
-          <div>
-            <label className="block text-gray-700 font-medium mb-1">
-              Confirm Password
-            </label>
-            <input
-              name="confirmPassword"
-              type="password"
-              value={form.confirmPassword}
-              onChange={handleChange}
-              required
-              className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
-              placeholder="Repeat password"
-            />
-          </div>
-
-          <button
-            type="submit"
-            disabled={loading}
-            className="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-semibold"
-          >
-            {loading ? "Creating account..." : "Register"}
-          </button>
-        </form>
-
-        <p className="text-center text-gray-600 mt-4">
-          Already have an account?{" "}
-          <Link to="/login" className="text-blue-600 font-medium">
-            Sign in
-          </Link>
-        </p>
-
-        {devMode && (
-          <p className="text-center text-green-600 mt-4 font-medium">
-            DEV MODE ACTIVE â€” registration simulated
+          <h1 className="text-4xl font-bold text-white mb-3">Register</h1>
+          <p className="text-blue-100 text-lg">
+            Create your SalesFlow account
           </p>
-        )}
+        </div>
+
+        {/* Formulaire - dÃ©borde sur le header */}
+        <div className="px-10 -mt-12 pb-12">
+          {/* Message d'erreur */}
+          {errorMsg && (
+            <div className="mb-8 p-4 bg-red-50 border border-red-200 rounded-2xl text-red-700 text-center font-medium">
+              {errorMsg}
+            </div>
+          )}
+
+          <form onSubmit={handleSubmit} className="space-y-6">
+            {/* Username */}
+            <div>
+              <input
+                name="username"
+                type="text"
+                value={form.username}
+                onChange={handleChange}
+                placeholder="Username"
+                required
+                className="w-full px-6 py-5 bg-gray-50 border border-gray-300 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-300 focus:border-blue-500 transition text-gray-800 placeholder-gray-500"
+              />
+            </div>
+
+            {/* Phone Number */}
+            <div>
+              <input
+                name="phoneNumber"
+                type="text"
+                value={form.phoneNumber}
+                onChange={handleChange}
+                placeholder="Phone Number"
+                required
+                className="w-full px-6 py-5 bg-gray-50 border border-gray-300 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-300 focus:border-blue-500 transition text-gray-800 placeholder-gray-500"
+              />
+            </div>
+
+            {/* Email */}
+            <div>
+              <input
+                name="email"
+                type="email"
+                value={form.email}
+                onChange={handleChange}
+                placeholder="Email Address"
+                required
+                className="w-full px-6 py-5 bg-gray-50 border border-gray-300 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-300 focus:border-blue-500 transition text-gray-800 placeholder-gray-500"
+              />
+            </div>
+
+            {/* Password */}
+            <div>
+              <input
+                name="password"
+                type="password"
+                value={form.password}
+                onChange={handleChange}
+                placeholder="Password"
+                required
+                className="w-full px-6 py-5 bg-gray-50 border border-gray-300 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-300 focus:border-blue-500 transition text-gray-800 placeholder-gray-500"
+              />
+            </div>
+
+            {/* Confirm Password */}
+            <div>
+              <input
+                name="confirmPassword"
+                type="password"
+                value={form.confirmPassword}
+                onChange={handleChange}
+                placeholder="Confirm Password"
+                required
+                className="w-full px-6 py-5 bg-gray-50 border border-gray-300 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-300 focus:border-blue-500 transition text-gray-800 placeholder-gray-500"
+              />
+            </div>
+
+            {/* Bouton REGISTER */}
+            <button
+              type="submit"
+              disabled={loading}
+              className="w-full py-5 bg-blue-600 hover:bg-blue-700 text-white font-bold text-xl rounded-full shadow-xl transition-all duration-200 disabled:opacity-70"
+            >
+              {loading ? "Creating account..." : "REGISTER"}
+            </button>
+
+            {/* Lien Sign In */}
+            <div className="text-center mt-8">
+              <p className="text-gray-600 text-base">
+                Already have an account?{" "}
+                <Link to="/login" className="text-blue-600 font-bold hover:text-blue-700">
+                  Sign in
+                </Link>
+              </p>
+            </div>
+          </form>
+
+          {/* Dev Mode Indicator */}
+          {devMode && (
+            <div className="mt-10 text-center">
+              <span className="inline-block px-6 py-3 bg-green-100 text-green-800 rounded-full text-sm font-bold">
+                DEV MODE ACTIVE
+              </span>
+            </div>
+          )}
+        </div>
       </div>
     </div>
   );
 };
 
-export default Register;
+export default Register;
\ No newline at end of file
diff --git a/salesflow-frontend/src/pages/Sales.tsx b/salesflow-frontend/src/pages/Sales.tsx
index 58463d6..d9c416c 100644
--- a/salesflow-frontend/src/pages/Sales.tsx
+++ b/salesflow-frontend/src/pages/Sales.tsx
@@ -1,298 +1,495 @@
 // src/pages/Sales.tsx
-
 import { useEffect, useState } from "react";
-import { salesAPI } from "../services/salesAPI";
+import { Plus, Upload, Trash2, Search } from "lucide-react";
+import toast from "react-hot-toast";
+
 import { productAPI } from "../services/productAPI";
+import { salesAPI } from "../services/salesAPI";
 import { importExcelAPI } from "../services/importExcelAPI";
 
-import type { SaleRaw, CreateSaleRequest } from "../types/sales";
 import type { Product } from "../types/product";
-
-// TYPE STRICT POUR LE FORM
-interface CreateSaleItem {
+import type {
+  Sale,
+  SalesHistoryPoint,
+  CreateSaleRequest,
+} from "../types/sales";
+
+// --------------------------------------------------
+// LOCAL FORM TYPE (CREATE SALE ONLY)
+// --------------------------------------------------
+interface SaleItemForm {
   productId: number;
   quantity: number;
 }
 
 export default function Sales() {
-  // SALES DATA
-  const [sales, setSales] = useState<SaleRaw[]>([]);
-  const [recentSales, setRecentSales] = useState<SaleRaw[]>([]);
-  const [loading, setLoading] = useState(true);
-
-  // PRODUCTS FOR DROPDOWN
+  // --------------------------------------------------
+  // STATE
+  // --------------------------------------------------
+  const [sales, setSales] = useState<Sale[]>([]);
+  const [recentSales, setRecentSales] = useState<Sale[]>([]);
   const [products, setProducts] = useState<Product[]>([]);
 
-  // FORM STATE (CREATE SALE)
-  const [items, setItems] = useState<CreateSaleItem[]>([
-    { productId: 0, quantity: 1 },
-  ]);
+  const [selectedSale, setSelectedSale] = useState<Sale | null>(null);
 
+  const [loading, setLoading] = useState(true);
   const [saving, setSaving] = useState(false);
-  const [error, setError] = useState<string | null>(null);
 
-  // IMPORT EXCEL STATE
+  // Create sale form
+  const [items, setItems] = useState<SaleItemForm[]>([
+    { productId: 0, quantity: 1 },
+  ]);
+
+  // Import Excel
   const [importFile, setImportFile] = useState<File | null>(null);
   const [importing, setImporting] = useState(false);
-  const [importMessage, setImportMessage] = useState<string | null>(null);
 
-  // LOAD DATA
+  // Search
+  const [searchTerm, setSearchTerm] = useState("");
+  const [searchMode, setSearchMode] = useState<"sku" | "name">("sku");
+  const [searchResults, setSearchResults] =
+    useState<SalesHistoryPoint[] | null>(null);
+  const [searching, setSearching] = useState(false);
+
+  // --------------------------------------------------
+  // LOAD INITIAL DATA
+  // --------------------------------------------------
   useEffect(() => {
-    loadAll();
+    loadAllData();
   }, []);
 
-  async function loadAll() {
+  const loadAllData = async () => {
     try {
       setLoading(true);
-      setError(null);
 
-      const [salesRes, recentRes, productRes] = await Promise.all([
-        salesAPI.getAllSales(),
+      const [history, recent, productsRes] = await Promise.all([
+        salesAPI.getSalesHistory(),
         salesAPI.getRecentSales(),
         productAPI.getAll(),
       ]);
 
-      setSales(salesRes.data);
-      setRecentSales(recentRes.data);
-      setProducts(productRes.data);
-    } catch (e) {
-      console.error(e);
-      setError("Failed to load sales.");
+      setSales(history);
+      setRecentSales(recent);
+      setProducts(productsRes.data);
+
+      if (recent.length > 0) {
+        setSelectedSale(recent[0]);
+      }
+    } catch {
+      toast.error("Failed to load sales or products.");
     } finally {
       setLoading(false);
     }
-  }
+  };
 
-  // FORM HANDLING -------------------
-  const addItem = () => {
+  // --------------------------------------------------
+  // CREATE SALE
+  // --------------------------------------------------
+  const addItem = () =>
     setItems([...items, { productId: 0, quantity: 1 }]);
-  };
 
-  const removeItem = (index: number) => {
+  const removeItem = (index: number) =>
     setItems(items.filter((_, i) => i !== index));
-  };
 
   const updateItem = (
     index: number,
-    field: keyof CreateSaleItem,
-    value: any
+    field: keyof SaleItemForm,
+    value: number
   ) => {
     const updated = [...items];
-    updated[index] = { ...updated[index], [field]: value };
+    updated[index][field] = value;
     setItems(updated);
   };
 
-  // TOTAL CALCULATION
-  const totalAmount = items.reduce((sum, item) => {
-    const p = products.find((prod) => prod.id === item.productId);
-    return sum + (p ? p.price * item.quantity : 0);
+  const totalPreview = items.reduce((sum, item) => {
+    const product = products.find((p) => p.id === item.productId);
+    return sum + (product ? product.price * item.quantity : 0);
   }, 0);
 
-  // SUBMIT SALE -------------------------
   const submitSale = async () => {
-    setSaving(true);
-    setError(null);
-
-    // VALIDATION
-    for (const i of items) {
-      if (!i.productId || i.productId <= 0) {
-        setError("A product must be selected.");
-        setSaving(false);
-        return;
-      }
-      if (i.quantity <= 0) {
-        setError("Quantity must be > 0.");
-        setSaving(false);
-        return;
-      }
+    const invalid = items.find(
+      (i) => i.productId <= 0 || i.quantity <= 0
+    );
+    if (invalid) {
+      toast.error("Please select valid products and quantities.");
+      return;
     }
 
-    const payload: CreateSaleRequest = {
-      items: items.map((i) => ({
-        productId: i.productId,
-        quantity: i.quantity,
-      })),
-    };
-
+    setSaving(true);
     try {
+      const payload: CreateSaleRequest = {
+        items: items.map((i) => ({
+          productId: i.productId,
+          quantity: i.quantity,
+        })),
+      };
+
       await salesAPI.createSale(payload);
-      await loadAll();
+      toast.success("Sale recorded successfully.");
+
       setItems([{ productId: 0, quantity: 1 }]);
-      alert("Sale recorded!");
-    } catch (e) {
-      console.error(e);
-      setError("Failed to save sale.");
+      await loadAllData();
     } finally {
       setSaving(false);
     }
   };
 
-  // IMPORT EXCEL ------------------------
+  // --------------------------------------------------
+  // IMPORT EXCEL
+  // --------------------------------------------------
   const handleImportExcel = async () => {
-    if (!importFile) {
-      setImportMessage("Please select an Excel file first.");
-      return;
-    }
+    if (!importFile) return;
 
     setImporting(true);
-    setImportMessage(null);
-
     try {
       const res = await importExcelAPI.upload(importFile);
-      setImportMessage(res.message || "Import completed successfully.");
-      // On recharge les ventes aprÃ¨s import
-      await loadAll();
-    } catch (e) {
-      console.error(e);
-      setImportMessage("Excel import failed.");
+      toast.success(res.message || "Import successful.");
+      setImportFile(null);
+      await loadAllData();
     } finally {
       setImporting(false);
     }
   };
 
-  // RENDER UI --------------------------
+  // --------------------------------------------------
+  // SEARCH
+  // --------------------------------------------------
+  const handleSearch = async () => {
+    if (!searchTerm.trim()) {
+      setSearchResults(null);
+      return;
+    }
+
+    setSearching(true);
+    try {
+      const data =
+        searchMode === "sku"
+          ? await salesAPI.getSalesHistoryBySku(searchTerm)
+          : await salesAPI.getSalesHistoryByName(searchTerm);
+
+      setSearchResults(data);
+      toast.success("Search completed");
+    } catch {
+      toast.error("Search failed.");
+    } finally {
+      setSearching(false);
+    }
+  };
+
+  const displayedSales = searchResults
+    ? sales.filter((s) =>
+        s.items.some((it) =>
+          searchMode === "sku"
+            ? it.sku.includes(searchTerm)
+            : it.productName
+                .toLowerCase()
+                .includes(searchTerm.toLowerCase())
+        )
+      )
+    : sales;
+
+  // --------------------------------------------------
+  // RENDER
+  // --------------------------------------------------
   return (
-    <div className="p-6 flex gap-6">
-      {/* LEFT PANEL â€” CREATE SALE + IMPORT EXCEL */}
-      <div className="w-[420px] space-y-6">
-        {/* CREATE SALE CARD */}
-        <div className="bg-white shadow rounded-xl p-5">
-          <h1 className="text-xl font-bold mb-4">Create Sale</h1>
-
-          {error && (
-            <div className="bg-red-100 text-red-700 p-2 rounded mb-3">
-              {error}
-            </div>
-          )}
-
-          {items.map((item, index) => (
-            <div key={index} className="border p-3 rounded mb-4">
-              {/* PRODUCT SELECT */}
-              <label className="text-sm font-medium">Product</label>
-              <select
-                className="border rounded p-2 w-full mb-2"
-                value={item.productId}
-                onChange={(e) =>
-                  updateItem(index, "productId", Number(e.target.value))
-                }
+    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-cyan-50 to-indigo-50 p-6">
+      <div className="max-w-7xl mx-auto flex flex-col lg:flex-row gap-8">
+
+        {/* LEFT PANEL */}
+        <div className="lg:w-96 space-y-6">
+          {/* CREATE SALE */}
+          <div className="bg-white rounded-xl shadow-lg p-6">
+            <h1 className="text-3xl font-bold text-blue-700 mb-6">
+              Create Sale
+            </h1>
+
+            {items.map((item, index) => (
+              <div
+                key={index}
+                className="border rounded-lg p-4 mb-4 bg-blue-50"
               >
-                <option value={0}>Select product...</option>
-                {products.map((p) => (
-                  <option key={p.id} value={p.id}>
-                    {p.name} â€” ${p.price}
-                  </option>
-                ))}
-              </select>
-
-              {/* QUANTITY */}
-              <label className="text-sm font-medium">Quantity</label>
-              <input
-                type="number"
-                className="border rounded p-2 w-full"
-                value={item.quantity}
-                onChange={(e) =>
-                  updateItem(index, "quantity", Number(e.target.value))
-                }
-              />
-
-              {/* REMOVE ITEM */}
-              {index > 0 && (
-                <button
-                  className="mt-2 text-red-600 text-sm"
-                  onClick={() => removeItem(index)}
+                <select
+                  className="w-full mb-3 px-4 py-2 border rounded-lg"
+                  value={item.productId}
+                  onChange={(e) =>
+                    updateItem(
+                      index,
+                      "productId",
+                      Number(e.target.value)
+                    )
+                  }
                 >
-                  Remove
-                </button>
-              )}
+                  <option value={0}>Select product...</option>
+                  {products.map((p) => (
+                    <option key={p.id} value={p.id}>
+                      {p.name} ({p.sku}) â€” ${p.price.toFixed(2)}
+                    </option>
+                  ))}
+                </select>
+
+                <div className="flex gap-3 items-center">
+                  <input
+                    type="number"
+                    min={1}
+                    className="flex-1 px-4 py-2 border rounded-lg"
+                    value={item.quantity}
+                    onChange={(e) =>
+                      updateItem(
+                        index,
+                        "quantity",
+                        Number(e.target.value)
+                      )
+                    }
+                  />
+
+                  {index > 0 && (
+                    <button
+                      onClick={() => removeItem(index)}
+                      className="text-red-600"
+                    >
+                      <Trash2 />
+                    </button>
+                  )}
+                </div>
+              </div>
+            ))}
+
+            <button
+              onClick={addItem}
+              className="w-full border-dashed border-2 py-2 rounded-lg text-blue-600 mb-4"
+            >
+              <Plus className="inline mr-2" />
+              Add Item
+            </button>
+
+            <div className="text-right font-bold mb-4">
+              Total: ${totalPreview.toFixed(2)}
             </div>
-          ))}
 
-          <button className="w-full border py-2 mb-3" onClick={addItem}>
-            + Add Item
-          </button>
-
-          <div className="text-right font-semibold mb-3">
-            Total: ${totalAmount}
+            <button
+              onClick={submitSale}
+              disabled={saving}
+              className="w-full bg-blue-600 text-white py-3 rounded-lg disabled:opacity-50"
+            >
+              {saving ? "Saving..." : "Record Sale"}
+            </button>
           </div>
 
-          <button
-            className="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded"
-            disabled={saving}
-            onClick={submitSale}
-          >
-            {saving ? "Saving..." : "Record Sale"}
-          </button>
+          {/* IMPORT EXCEL */}
+          <div className="bg-white rounded-xl shadow-lg p-6">
+            <h2 className="font-bold mb-3 flex items-center gap-2">
+              <Upload /> Import Excel
+            </h2>
+
+            <input
+              type="file"
+              accept=".xlsx,.xls,.csv"
+              onChange={(e) =>
+                setImportFile(e.target.files?.[0] ?? null)
+              }
+            />
+
+            <button
+              onClick={handleImportExcel}
+              disabled={importing}
+              className="mt-4 w-full bg-emerald-600 text-white py-2 rounded-lg disabled:opacity-50"
+            >
+              {importing ? "Importing..." : "Import"}
+            </button>
+          </div>
         </div>
 
-        {/* IMPORT EXCEL CARD */}
-        <div className="bg-white shadow rounded-xl p-5">
-          <h2 className="text-lg font-semibold mb-3">ðŸ“¥ Import Excel</h2>
-
-          <input
-            type="file"
-            accept=".xlsx,.xls,.csv"
-            onChange={(e) => setImportFile(e.target.files?.[0] ?? null)}
-            className="w-full text-sm"
-          />
-
-          <button
-            onClick={handleImportExcel}
-            disabled={importing}
-            className="mt-3 w-full px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded disabled:opacity-50"
-          >
-            {importing ? "Importingâ€¦" : "Run Import"}
-          </button>
-
-          {importMessage && (
-            <p className="mt-2 text-sm text-gray-700">{importMessage}</p>
-          )}
-        </div>
-      </div>
+        {/* RIGHT PANEL */}
+        <div className="flex-1 space-y-6">
+
+          {/* SALE DETAILS â€” MOVED TO TOP */}
+          <div>
+            <h2 className="text-xl font-bold mb-3">Sale Details</h2>
 
-      {/* RIGHT PANEL â€” SALES LIST */}
-      <div className="flex-1">
-        <h2 className="text-xl font-bold mb-3">All Sales</h2>
-
-        {loading ? (
-          <p>Loading sales...</p>
-        ) : (
-          <div className="bg-white shadow rounded-xl p-4">
-            <table className="w-full text-sm">
-              <thead>
-                <tr className="border-b">
-                  <th className="text-left py-2">Date</th>
-                  <th className="text-left py-2">Total</th>
-                  <th className="text-left py-2">Items</th>
-                </tr>
-              </thead>
-              <tbody>
-                {sales.map((s) => (
-                  <tr key={s.id} className="border-b">
-                    <td className="py-2">
+            {!selectedSale ? (
+              <p className="text-gray-500">
+                Select a sale to view details.
+              </p>
+            ) : (
+              <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
+                <div className="flex justify-between px-6 py-4 bg-blue-50">
+                  <div>
+                    <p className="text-sm text-gray-600">
+                      {new Date(
+                        selectedSale.saleDate
+                      ).toLocaleString()}
+                    </p>
+                    <p className="text-xs text-gray-400">
+                      Sale ID #{selectedSale.id}
+                    </p>
+                  </div>
+                  <div className="text-xl font-bold text-blue-700">
+                    Total: $
+                    {selectedSale.totalAmount.toFixed(2)}
+                  </div>
+                </div>
+
+                <table className="w-full">
+                  <thead className="bg-gray-50">
+                    <tr>
+                      <th className="px-6 py-3 text-left">
+                        Product
+                      </th>
+                      <th className="px-6 py-3 text-left">
+                        SKU
+                      </th>
+                      <th className="px-6 py-3 text-center">
+                        Qty
+                      </th>
+                      <th className="px-6 py-3 text-right">
+                        Unit Price
+                      </th>
+                      <th className="px-6 py-3 text-right">
+                        Subtotal
+                      </th>
+                    </tr>
+                  </thead>
+                  <tbody className="divide-y">
+                    {selectedSale.items.map((item, idx) => (
+                      <tr key={idx}>
+                        <td className="px-6 py-4">
+                          {item.productName}
+                        </td>
+                        <td className="px-6 py-4 text-gray-500">
+                          {item.sku}
+                        </td>
+                        <td className="px-6 py-4 text-center">
+                          {item.quantity}
+                        </td>
+                        <td className="px-6 py-4 text-right">
+                          ${item.unitPrice.toFixed(2)}
+                        </td>
+                        <td className="px-6 py-4 text-right font-semibold text-blue-700">
+                          ${item.subtotal.toFixed(2)}
+                        </td>
+                      </tr>
+                    ))}
+                  </tbody>
+                </table>
+              </div>
+            )}
+          </div>
+
+          {/* SEARCH BAR */}
+          <div className="bg-white p-4 rounded-xl shadow-sm flex gap-3">
+            <select
+              value={searchMode}
+              onChange={(e) =>
+                setSearchMode(e.target.value as "sku" | "name")
+              }
+              className="border rounded-lg px-3"
+            >
+              <option value="sku">SKU</option>
+              <option value="name">Name</option>
+            </select>
+
+            <input
+              value={searchTerm}
+              onChange={(e) => setSearchTerm(e.target.value)}
+              placeholder="Search sales history..."
+              className="flex-1 border rounded-lg px-4"
+            />
+
+            <button
+              onClick={handleSearch}
+              disabled={searching}
+              className="bg-blue-600 text-white px-4 rounded-lg disabled:opacity-50"
+            >
+              {searching ? "Searching..." : <Search />}
+            </button>
+          </div>
+
+          {/* RECENT SALES */}
+          <div>
+            <h2 className="text-xl font-bold mb-3">Recent Sales</h2>
+
+            {loading ? (
+              <p className="text-gray-500">
+                Loading recent sales...
+              </p>
+            ) : (
+              <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
+                {recentSales.map((s) => (
+                  <div
+                    key={s.id}
+                    onClick={() => setSelectedSale(s)}
+                    className={`bg-blue-50 rounded-xl p-4 shadow cursor-pointer
+                      ${
+                        selectedSale?.id === s.id
+                          ? "ring-2 ring-blue-500 bg-blue-100"
+                          : "hover:bg-blue-100"
+                      }`}
+                  >
+                    <p className="font-semibold">
+                      {s.items.length} item(s)
+                    </p>
+                    <p className="text-sm text-gray-600">
                       {new Date(s.saleDate).toLocaleString()}
-                    </td>
-                    <td className="py-2">${s.totalAmount}</td>
-                    <td className="py-2">{s.items.length}</td>
-                  </tr>
+                    </p>
+                    <p className="text-xl font-bold text-blue-700 mt-2">
+                      ${s.totalAmount.toFixed(2)}
+                    </p>
+                  </div>
                 ))}
-              </tbody>
-            </table>
+              </div>
+            )}
           </div>
-        )}
-
-        <h2 className="text-xl font-bold mt-6 mb-3">Recent Sales</h2>
-        <div className="bg-white shadow rounded-xl p-4">
-          {recentSales.map((s) => (
-            <div key={s.id} className="border-b py-2">
-              <p>
-                <strong>{s.items.length}</strong> items â€”{" "}
-                <strong>${s.totalAmount}</strong>
-              </p>
-              <p className="text-xs text-gray-500">
-                {new Date(s.saleDate).toLocaleString()}
+
+          {/* SALES HISTORY */}
+          <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
+            {loading ? (
+              <p className="p-4 text-gray-500">
+                Loading sales history...
               </p>
-            </div>
-          ))}
+            ) : (
+              <table className="w-full">
+                <thead className="bg-gray-50">
+                  <tr>
+                    <th className="px-6 py-3 text-left">
+                      Date
+                    </th>
+                    <th className="px-6 py-3 text-center">
+                      Items
+                    </th>
+                    <th className="px-6 py-3 text-right">
+                      Total
+                    </th>
+                  </tr>
+                </thead>
+                <tbody className="divide-y">
+                  {displayedSales.map((sale) => (
+                    <tr
+                      key={sale.id}
+                      onClick={() => setSelectedSale(sale)}
+                      className={`cursor-pointer hover:bg-gray-50 ${
+                        selectedSale?.id === sale.id
+                          ? "bg-blue-50"
+                          : ""
+                      }`}
+                    >
+                      <td className="px-6 py-4">
+                        {new Date(
+                          sale.saleDate
+                        ).toLocaleString()}
+                      </td>
+                      <td className="px-6 py-4 text-center">
+                        {sale.items.length}
+                      </td>
+                      <td className="px-6 py-4 text-right font-semibold text-blue-700">
+                        ${sale.totalAmount.toFixed(2)}
+                      </td>
+                    </tr>
+                  ))}
+                </tbody>
+              </table>
+            )}
+          </div>
+
         </div>
       </div>
     </div>
diff --git a/salesflow-frontend/src/services/api/javaApi.ts b/salesflow-frontend/src/services/api/javaApi.ts
index 7013046..40e76ae 100644
--- a/salesflow-frontend/src/services/api/javaApi.ts
+++ b/salesflow-frontend/src/services/api/javaApi.ts
@@ -1,7 +1,7 @@
 // src/services/api/javaApi.ts
 import http from "./http";
 
-export const JAVA_API_URL = "http://10.131.175.145:8080/api/v1";
+export const JAVA_API_URL = "http://10.131.221.179:8080/api/v1";
 
 export const javaApi = {
   get: (path: string, config: object = {}) =>
diff --git a/salesflow-frontend/src/services/importExcelAPI.ts b/salesflow-frontend/src/services/importExcelAPI.ts
index dc9591d..469d7d9 100644
--- a/salesflow-frontend/src/services/importExcelAPI.ts
+++ b/salesflow-frontend/src/services/importExcelAPI.ts
@@ -13,7 +13,7 @@ export const importExcelAPI = {
     const formData = new FormData();
     formData.append("file", file);
 
-    const res = await pythonApi.post("/excel/upload", formData, {
+    const res = await pythonApi.post("/excel/import-sales", formData, {
       headers: {
         "Content-Type": "multipart/form-data",
       },
diff --git a/salesflow-frontend/src/services/inventoryAPI.ts b/salesflow-frontend/src/services/inventoryAPI.ts
index 527e6fd..a3df94e 100644
--- a/salesflow-frontend/src/services/inventoryAPI.ts
+++ b/salesflow-frontend/src/services/inventoryAPI.ts
@@ -1,10 +1,41 @@
 // src/services/inventoryAPI.ts
 import { javaApi } from "./api/javaApi";
 
+// Types pour plus de clartÃ©
+interface AddStockPayload {
+  quantity: number;
+  cost?: number;
+}
+
+interface UpdateStockPayload {
+  quantity: number;
+  cost: number;
+}
+
 export const inventoryAPI = {
+  // GET ALL INVENTORY
   getAll: () => javaApi.get("/inventory"),
+
+  // GET BY ID (optionnel, si tu l'ajoutes plus tard)
   getById: (id: number) => javaApi.get(`/inventory/${id}`),
-  create: (data: any) => javaApi.post("/inventory", data),
-  update: (id: number, data: any) => javaApi.put(`/inventory/${id}`, data),
-  delete: (id: number) => javaApi.delete(`/inventory/${id}`),
-};
+
+  // GET BY SKU
+  getBySku: (sku: string) => javaApi.get(`/inventory/by-sku/${sku}`),
+
+  // GET BY NAME
+  getByName: (name: string) => javaApi.get(`/inventory/by-name/${name}`),
+
+  // CREATE / ADD STOCK (POST /inventory)
+  create: (sku:string, data: AddStockPayload) => javaApi.patch(`/inventory/adjust/by-sku/${sku}`, data),
+
+  // UPDATE BY SKU â†’ CHANGÃ‰ EN POST (ton backend ne supporte pas PUT)
+  updateBySku: (sku: string, data: UpdateStockPayload) =>
+    javaApi.patch(`/inventory/adjust/by-sku/${sku}`, data),
+
+  // UPDATE BY NAME â†’ aussi en POST si besoin
+  updateByName: (name: string, data: UpdateStockPayload) =>
+    javaApi.post(`/inventory/by-name/${name}`, data),
+
+  // DELETE BY SKU
+  deleteBySku: (sku: string) => javaApi.delete(`/inventory/by-sku/${sku}`),
+};
\ No newline at end of file
diff --git a/salesflow-frontend/src/services/mlAPI.ts b/salesflow-frontend/src/services/mlAPI.ts
index bcd8c7d..03547d9 100644
--- a/salesflow-frontend/src/services/mlAPI.ts
+++ b/salesflow-frontend/src/services/mlAPI.ts
@@ -8,28 +8,60 @@ import type {
   AnomalyResponse,
 } from "../types/ml";
 
+/**
+ * ML API
+ *
+ * RÃˆGLES (IMPORTANT) :
+ * - Le backend attend un body WRAPPÃ‰ :
+ *   {
+ *     payload: <DTO>,
+ *     required_roles: []
+ *   }
+ * - swagger_auth se base sur cette structure
+ * - Le frontend NE DOIT PAS envoyer le payload brut
+ */
 export const mlAPI = {
-  forecastSales: async (payload: ForecastRequest): Promise<ForecastResult> => {
-    const wrapped = {
+  // --------------------------------------------------
+  // FORECAST (GLOBAL ou PRODUCT)
+  // --------------------------------------------------
+  forecastSales: async (
+    payload: ForecastRequest
+  ): Promise<ForecastResult> => {
+    const wrappedBody = {
       payload,
       required_roles: [],
     };
 
-    console.log("ðŸ“¦ WRAPPED FORECAST PAYLOAD =", wrapped);
+    // Debug volontaire (dev only)
+    console.log("ðŸ“¦ ML FORECAST REQUEST â†’", wrappedBody);
+
+    const { data } = await pythonApi.post(
+      "/ml/forecast",
+      wrappedBody
+    );
 
-    const { data } = await pythonApi.post("/ml/forecast", wrapped);
     return data;
   },
 
-  detectAnomalies: async (payload: AnomalyRequest): Promise<AnomalyResponse> => {
-    const wrapped = {
+  // --------------------------------------------------
+  // ANOMALY DETECTION (GLOBAL ou PRODUCT)
+  // --------------------------------------------------
+  detectAnomalies: async (
+    payload: AnomalyRequest
+  ): Promise<AnomalyResponse> => {
+    const wrappedBody = {
       payload,
       required_roles: [],
     };
 
-    console.log("ðŸ“¦ WRAPPED ANOMALY PAYLOAD =", wrapped);
+    // Debug volontaire (dev only)
+    console.log("ðŸ“¦ ML ANOMALIES REQUEST â†’", wrappedBody);
+
+    const { data } = await pythonApi.post(
+      "/ml/anomalies",
+      wrappedBody
+    );
 
-    const { data } = await pythonApi.post("/ml/anomalies", wrapped);
     return data;
   },
 };
diff --git a/salesflow-frontend/src/services/productAPI.ts b/salesflow-frontend/src/services/productAPI.ts
index 474553e..3e7dd45 100644
--- a/salesflow-frontend/src/services/productAPI.ts
+++ b/salesflow-frontend/src/services/productAPI.ts
@@ -2,10 +2,29 @@
 import { javaApi } from "./api/javaApi";
 
 export const productAPI = {
+  // GET ALL PRODUCTS
   getAll: () => javaApi.get("/products"),
-  getById: (id: number) => javaApi.get(`/products/${id}`),
-  create: (data: any) => javaApi.post("/products", data),
-  update: (id: number, data: any) => javaApi.put(`/products/${id}`, data),
-  delete: (id: number) => javaApi.delete(`/products/${id}`),
+
+  // GET BY ID (principal â€“ ton endpoint prÃ©fÃ©rÃ©)
+  getById: (id: number) => javaApi.get(`/products/by-id/${id}`),
+
+  // GET OPTIONNELS (par SKU ou Name)
+  getBySku: (sku: string) => javaApi.get(`/products/by-sku/${sku}`),
+  getByName: (name: string) => javaApi.get(`/products/by-name/${name}`),
+
+  // GET LOW STOCK
   getLowStock: () => javaApi.get("/products/low-stock"),
-};
+
+  // CREATE
+  create: (data: any) => javaApi.post("/products", data),
+
+  // UPDATE â€“ principal par ID + options par SKU/Name
+  update: (id: number, data: any) => javaApi.put(`/products/by-id/${id}`, data),
+  updateBySku: (sku: string, data: any) => javaApi.put(`/products/by-sku/${sku}`, data),
+  updateByName: (name: string, data: any) => javaApi.put(`/products/by-name/${name}`, data),
+
+  // DELETE â€“ principal par ID + options par SKU/Name
+  delete: (id: number) => javaApi.delete(`/products/by-id/${id}`),
+  deleteBySku: (sku: string) => javaApi.delete(`/products/by-sku/${sku}`),
+  deleteByName: (name: string) => javaApi.delete(`/products/by-name/${name}`),
+};
\ No newline at end of file
diff --git a/salesflow-frontend/src/services/reportsAPI.ts b/salesflow-frontend/src/services/reportsAPI.ts
index dfdb9a7..5f87ac3 100644
--- a/salesflow-frontend/src/services/reportsAPI.ts
+++ b/salesflow-frontend/src/services/reportsAPI.ts
@@ -1,35 +1,28 @@
-// src/services/reportsAPI.ts
-
 import { pythonApi } from "./api/pythonApi";
-import type { ReportRequestPayload } from "../types/reports";
+import type {
+  ReportRequestPayload,
+  ScheduleReportPayload,
+  ReportType,
+  ReportFormat,
+} from "../types/reports";
 
 export const reportsAPI = {
   // -------------------------------------------------------------
-  // GENERATE REPORT â†’ retourne Blob PDF/Excel + filename
+  // GENERATE REPORT (MANUAL) â†’ Blob + filename
   // -------------------------------------------------------------
   generate: async (payload: ReportRequestPayload) => {
-    console.log("ðŸ“¤ Sending REPORT payload =", payload);
-
-    // â­â­ WRAPPER OBLIGATOIRE â­â­
-    const wrapped = {
-      payload,
-      required_roles: [],
-    };
-
     const res = await pythonApi.post(
       "/reports/generate",
-      wrapped,
       {
-        responseType: "arraybuffer", // <-- OBLIGATOIRE pour PDF/Excel
-        headers: {
-          "Content-Type": "application/json",
-        },
+        payload,
+        required_roles: [],
+      },
+      {
+        responseType: "arraybuffer",
+        headers: { "Content-Type": "application/json" },
       }
     );
 
-    // -----------------------------------------------------
-    // Extract filename from Content-Disposition
-    // -----------------------------------------------------
     const disposition = res.headers["content-disposition"];
     const filename =
       disposition?.split("filename=")[1]?.replace(/"/g, "") ??
@@ -43,10 +36,41 @@ export const reportsAPI = {
   },
 
   // -------------------------------------------------------------
-  // STATUS JOB ASYNC (optionnel)
+  // SCHEDULE REPORT (CRON + SAVE TO DISK)
   // -------------------------------------------------------------
-  getStatus: async (jobId: string) => {
-    const res = await pythonApi.get(`/reports/status/${jobId}`);
+  schedule: async (payload: ScheduleReportPayload) => {
+    const res = await pythonApi.post("/reports/schedule", {
+      payload,
+      required_roles: [],
+    });
+
     return res.data;
   },
+
+  // -------------------------------------------------------------
+  // DOWNLOAD LAST SCHEDULED REPORT (FROM DISK)
+  // -------------------------------------------------------------
+  downloadLastScheduled: async (
+    report_type: ReportType,
+    format: ReportFormat
+  ) => {
+    const res = await pythonApi.get(
+      "/reports/scheduled/latest",
+      {
+        params: { report_type, format },
+        responseType: "arraybuffer",
+      }
+    );
+
+    const disposition = res.headers["content-disposition"];
+    const filename =
+      disposition?.split("filename=")[1]?.replace(/"/g, "") ??
+      `scheduled_${report_type}.${format}`;
+
+    return {
+      file: res.data,
+      filename,
+      media_type: res.headers["content-type"],
+    };
+  },
 };
diff --git a/salesflow-frontend/src/services/salesAPI.ts b/salesflow-frontend/src/services/salesAPI.ts
index 55b2be0..621101e 100644
--- a/salesflow-frontend/src/services/salesAPI.ts
+++ b/salesflow-frontend/src/services/salesAPI.ts
@@ -1,29 +1,87 @@
 // src/services/salesAPI.ts
 import { javaApi } from "./api/javaApi";
+import type {
+  Sale,
+  CreateSaleRequest,
+  SalesHistoryPoint,
+} from "../types/sales";
 
 // ------------------------------
 // SALES API WRAPPER
 // ------------------------------
 export const salesAPI = {
-  // GET /sales â†’ all sales
-  getAllSales: () => javaApi.get("/sales"),
+  // ======================================================
+  // BASIC SALES
+  // ======================================================
 
-  // POST /sales â†’ create a single sale
-  createSale: (data: any) => javaApi.post("/sales", data),
+  // GET /api/v1/sales â†’ all sales
+  getAllSales: async () => {
+    const res = await javaApi.get("/sales");
+    return res.data as Sale[];
+  },
 
-  // POST /sales/bulk â†’ import multiple sales
-  createBulkSales: (data: any[]) => javaApi.post("/sales/bulk", data),
+  // POST /api/v1/sales â†’ create a single sale
+  createSale: async (data: CreateSaleRequest) => {
+    const res = await javaApi.post("/sales", data);
+    return res.data;
+  },
 
-  // GET /sales/today
-  getSalesToday: () => javaApi.get("/sales/today"),
+  // POST /api/v1/sales/bulk â†’ import multiple sales
+  createBulkSales: async (data: CreateSaleRequest[]) => {
+    const res = await javaApi.post("/sales/bulk", data);
+    return res.data;
+  },
 
-  // GET /sales/recent
-  getRecentSales: () => javaApi.get("/sales/recent"),
+  // ======================================================
+  // QUICK VIEWS
+  // ======================================================
 
-  // GET /sales/history
-  getSalesHistory: () => javaApi.get("/sales/history"),
+  // GET /api/v1/sales/today
+  getSalesToday: async () => {
+    const res = await javaApi.get("/sales/today");
+    return res.data as Sale[];
+  },
 
-  // GET /sales/history/{productId}
-  getSalesHistoryByProduct: (productId: number) =>
-    javaApi.get(`/sales/history/${productId}`),
+  // GET /api/v1/sales/recent
+  getRecentSales: async () => {
+    const res = await javaApi.get("/sales/recent");
+    return res.data as Sale[];
+  },
+
+  // ======================================================
+  // SALES HISTORY (GLOBAL)
+  // Used for History / Analytics / ML
+  // ======================================================
+
+  // GET /api/v1/sales/history
+  getSalesHistory: async () => {
+    const res = await javaApi.get("/sales/history");
+    return res.data as Sale[];
+  },
+
+  // GET /api/v1/sales/history/{productId}
+  getSalesHistoryByProductId: async (productId: number) => {
+    const res = await javaApi.get(`/sales/history/${productId}`);
+    return res.data as Sale[];
+  },
+
+  // ======================================================
+  // SALES HISTORY â€” SEARCH / FILTER ONLY
+  // ======================================================
+
+  // GET /api/v1/sales/history/by-sku/{sku}
+  getSalesHistoryBySku: async (sku: string) => {
+    const res = await javaApi.get(
+      `/sales/history/by-sku/${encodeURIComponent(sku)}`
+    );
+    return res.data as SalesHistoryPoint[];
+  },
+
+  // GET /api/v1/sales/history/by-name/{name}
+  getSalesHistoryByName: async (name: string) => {
+    const res = await javaApi.get(
+      `/sales/history/by-name/${encodeURIComponent(name)}`
+    );
+    return res.data as SalesHistoryPoint[];
+  },
 };
diff --git a/salesflow-frontend/src/types/analytics.ts b/salesflow-frontend/src/types/analytics.ts
index b920aad..6840f17 100644
--- a/salesflow-frontend/src/types/analytics.ts
+++ b/salesflow-frontend/src/types/analytics.ts
@@ -1,9 +1,15 @@
 // src/types/analytics.ts
 
+// ============================================================
+// SHARED
+// ============================================================
 export type AnalyticsPeriod = "daily" | "weekly" | "monthly" | "quarterly";
 
+// ============================================================
+// SALES ANALYTICS
+// ============================================================
 export interface DailySalesPoint {
-  date: string;
+  date: string;                    // ISO date: "2025-12-13"
   total_revenue: number;
   total_quantity: number;
   total_transactions: number;
@@ -14,7 +20,7 @@ export interface TopProductSales {
   name: string;
   total_quantity: number;
   revenue: number;
-  share_of_revenue: number;
+  share_of_revenue: number;        // %
 }
 
 export interface SalesKPI {
@@ -29,12 +35,21 @@ export interface SalesKPI {
 export interface SalesAnalyticsResponse {
   period: AnalyticsPeriod;
   period_label: string;
-  start_date: string;
-  end_date: string;
+  start_date: string;              // ISO date
+  end_date: string;                // ISO date
   kpis: SalesKPI;
   daily: DailySalesPoint[];
 }
 
+// ============================================================
+// STOCK ANALYTICS
+// ============================================================
+export type ProductStockStatus =
+  | "OK"
+  | "LOW_STOCK"
+  | "OUT_OF_STOCK"
+  | "DEAD_STOCK";
+
 export interface StockKPI {
   total_stock_value: number;
   out_of_stock_count: number;
@@ -42,25 +57,27 @@ export interface StockKPI {
   low_stock_ratio: number;
   urgent_reorder_count: number;
   dead_stock_count: number;
-  rotation_per_year: number;
+  rotation_per_year: number | null;
   avg_coverage_days: number | null;
 }
 
 export interface ProductStockSnapshot {
-  productId: number;
+  product_id: number;
   name: string;
   current_stock: number;
   min_stock: number;
-  status: string;
-  last_sale_date?: string;
-  coverage_days?: number;
+  unit_price: number;
   stock_value: number;
+  status: ProductStockStatus;
+
+  last_sale_date?: string | null;  // ISO date or null
+  coverage_days?: number | null;
 }
 
 export interface StockAnalyticsResponse {
   period: AnalyticsPeriod;
   period_label: string;
-  as_of: string;
+  as_of: string;                   // ISO date
   kpis: StockKPI;
   critical_products: ProductStockSnapshot[];
 }
diff --git a/salesflow-frontend/src/types/inventory.ts b/salesflow-frontend/src/types/inventory.ts
index f199145..ca3a213 100644
--- a/salesflow-frontend/src/types/inventory.ts
+++ b/salesflow-frontend/src/types/inventory.ts
@@ -1,9 +1,13 @@
+// src/types/inventory.ts
 export interface InventoryItem {
-  id?: number;
+  id: number;
+  sku: string;
   name: string;
-  description: string;
+  description?: string | null;
   quantity: number;
   price: number;
   cost: number;
-  category: string;
+  category?: string | null;
+  createdAt: string;  // ISO date string
+  updatedAt: string;  // ISO date string
 }
diff --git a/salesflow-frontend/src/types/ml.ts b/salesflow-frontend/src/types/ml.ts
index c1ce15e..a8a363e 100644
--- a/salesflow-frontend/src/types/ml.ts
+++ b/salesflow-frontend/src/types/ml.ts
@@ -1,55 +1,131 @@
+// src/types/ml.ts
+// ============================================================
+// ML TYPES â€” ALIGNED WITH BACKEND (2025)
+// ============================================================
+
 export type AnalyticsPeriod = "daily" | "weekly" | "monthly";
 
+// ============================================================
+// FORECAST / ANOMALY SCOPE
+// ============================================================
+export type ForecastScope = "GLOBAL" | "PRODUCT";
+
+// ============================================================
+// PRODUCT INFO (UI enrichment)
+// ============================================================
+export interface ProductInfo {
+  id?: number | null;
+  sku?: string | null;
+  name?: string | null;
+  price?: number | null;
+  description?: string | null;
+  imageUrl?: string | null;
+  category?: string | null;
+  // Ajoute d'autres champs si besoin
+}
+
+// ============================================================
+// FORECAST REQUEST
+// ============================================================
 export interface ForecastRequest {
+  scope: ForecastScope;
+
+  /**
+   * En mode PRODUCT : au moins l'un des deux doit Ãªtre fourni
+   */
+  sku?: string | null;
+  name?: string | null;
+
+  /**
+   * Optionnel â€” pour traÃ§abilitÃ© / caching UI
+   */
   product_id?: number | null;
-  history_days: number;
+
   forecast_days: number;
   period: AnalyticsPeriod;
 }
 
+// ============================================================
+// FORECAST SUMMARY
+// ============================================================
 export interface ForecastSummary {
   total: number;
   daily_average: number;
   peak_value: number;
-  peak_day: string | null;
+  peak_day: string;
   trend: "upward" | "downward" | "stable";
-  period_label: string | null;
+  period_label: string;
 }
 
+// ============================================================
+// FORECAST RESULT
+// ============================================================
 export interface ForecastResult {
+  scope: ForecastScope;
   product_id: number | null;
+  product_sku?: string | null;  // conservÃ© si envoyÃ©
+
   dates: string[];
   predictions: number[];
+
   summary: ForecastSummary;
+
+  /**
+   * Enrichissement UI complet (nom, prix, image, etc.)
+   */
+  product?: ProductInfo | null;
 }
 
+// ============================================================
+// ANOMALY REQUEST
+// ============================================================
 export interface AnomalyRequest {
+  scope: ForecastScope;
+
+  sku?: string | null;
+  name?: string | null;
   product_id?: number | null;
-  history_days: number;
+
   period: AnalyticsPeriod;
 }
 
+// ============================================================
+// ANOMALY RESULT
+// ============================================================
 export interface AnomalyResult {
   date: string;
   value: number;
   score: number;
   severity: "high" | "medium";
-  type: "HIGH_SPIKE" | "ZERO_DROP" | "VARIANCE_SHIFT";
+  type: "HIGH_SPIKE" | "DROP";
   explanation: string;
 }
 
+// ============================================================
+// ANOMALY RESPONSE
+// ============================================================
 export interface AnomalyResponse {
+  scope: ForecastScope;
   product_id: number | null;
+  product_sku?: string | null;
+
   period: AnalyticsPeriod;
   count: number;
   anomalies: AnomalyResult[];
+
+  product?: ProductInfo | null;
 }
 
+// ============================================================
+// UI HELPERS
+// ============================================================
 export type TabType = "forecast" | "anomalies";
 
 export interface MLFormState {
-  product_id: string;
-  history_days: number;
+  scope: ForecastScope;
+  searchQuery: string;         // pour l'autocomplete
+  selectedProduct: ProductInfo | null;
+
   forecast_days: number;
   period: AnalyticsPeriod;
-}
+}
\ No newline at end of file
diff --git a/salesflow-frontend/src/types/product.ts b/salesflow-frontend/src/types/product.ts
index 90b7285..42700bb 100644
--- a/salesflow-frontend/src/types/product.ts
+++ b/salesflow-frontend/src/types/product.ts
@@ -1,10 +1,10 @@
+// src/types/product.ts
 export interface Product {
   id: number;
   name: string;
   sku: string;
   price: number;
-  stockQuantity: number;
-  description: string;
-  imageUrl: string;
-  lowStockThreshold: number;
-}
+  description?: string | null;
+  imageUrl?: string | null;
+  category?: string | null;  // â† AJOUTÃ‰
+}
\ No newline at end of file
diff --git a/salesflow-frontend/src/types/reports.ts b/salesflow-frontend/src/types/reports.ts
index 466f4d4..94fbbe5 100644
--- a/salesflow-frontend/src/types/reports.ts
+++ b/salesflow-frontend/src/types/reports.ts
@@ -4,15 +4,21 @@ export type ReportFormat = "pdf" | "excel";
 export type ReportType = "sales" | "stock" | "combined";
 export type ReportPeriod = "daily" | "weekly" | "monthly";
 
+// -------------------------------------------------
+// GENERATE (manuel)
+// -------------------------------------------------
 export interface ReportRequestPayload {
-  format: ReportFormat;
   report_type: ReportType;
+  format: ReportFormat;
   period: ReportPeriod;
 }
 
-export interface ReportResponse {
-  job_id?: string; // selon ton implÃ©mentation Python
-  file?: BlobPart;
-  filename: string;
-  media_type: string;
+// -------------------------------------------------
+// SCHEDULE (cron + disk)
+// -------------------------------------------------
+export interface ScheduleReportPayload {
+  report_type: ReportType;
+  format: ReportFormat;
+  hour: number;
+  minute: number;
 }
diff --git a/salesflow-frontend/src/types/sales.ts b/salesflow-frontend/src/types/sales.ts
index 6ab9ad5..788b5bf 100644
--- a/salesflow-frontend/src/types/sales.ts
+++ b/salesflow-frontend/src/types/sales.ts
@@ -1,44 +1,50 @@
+// =========================================================
+// SALES TYPES â€” EXACT MATCH WITH JAVA DTOs
+// Source of truth: backend Java (SaleResponse / SaleItemResponse)
+// =========================================================
+
+
 // ---------------------------------------------------------
-// 1) RAW MODELS â€” EXACT JAVA DTO (NE PAS MODIFIER)
+// 1) SALE ITEM â€” Java: SaleItemResponse
 // ---------------------------------------------------------
-
-export interface SaleItemRaw {
-  productId: number;
-  quantity: number;
-  price: number; // Java SaleItemDto.price
+export interface SaleItem {
+  productId: number;     // long
+  productName: string;   // String
+  sku: string;           // String
+  quantity: number;      // int
+  unitPrice: number;     // double
+  subtotal: number;      // double (quantity * unitPrice)
 }
 
-export interface SaleRaw {
-  id: number;
-  saleDate: string;      // ISO timestamp
-  totalAmount: number;
-  items: SaleItemRaw[];
+
+// ---------------------------------------------------------
+// 2) SALE â€” Java: SaleResponse / api/v1/sales/history
+// ---------------------------------------------------------
+export interface Sale {
+  id: number;            // long
+  saleDate: string;      // ISO date-time (ex: 2025-12-12T10:03:54.132Z)
+  totalAmount: number;   // double
+  items: SaleItem[];
 }
 
-// Used for creating a new sale from the frontend
+
+// ---------------------------------------------------------
+// 3) CREATE SALE â€” Java: CreateSaleRequest
+// (USED FOR POST /api/v1/sales)
+// ---------------------------------------------------------
 export interface CreateSaleRequest {
   items: {
-    productId: number;
-    quantity: number;
+    productId: number;   // long (required)
+    quantity: number;    // int (min = 1)
   }[];
 }
 
 
-
 // ---------------------------------------------------------
-// 2) ENRICHED MODELS â€” FRONTEND ONLY (APRES JOIN AVEC PRODUCTS)
+// 4) SALES HISTORY â€” Java: SalesHistoryDto
+// (USED FOR /sales/history/by-sku | by-name)
 // ---------------------------------------------------------
-
-export interface SaleItemEnriched extends SaleItemRaw {
-  productName: string;
-  sku: string;
-  unitPrice: number;  // alias de price
-  subtotal: number;   // quantity * price
-}
-
-export interface SaleEnriched {
-  id: number;
-  saleDate: string;
-  totalAmount: number;
-  items: SaleItemEnriched[];
+export interface SalesHistoryPoint {
+  date: string;          // yyyy-MM-dd
+  quantity: number;      // int
 }
diff --git a/salesflow-frontend/vite.config.ts b/salesflow-frontend/vite.config.ts
index dc9c4ca..2f73b7f 100644
--- a/salesflow-frontend/vite.config.ts
+++ b/salesflow-frontend/vite.config.ts
@@ -12,7 +12,7 @@ export default defineConfig({
     proxy: {
       // ðŸ”¥ JAVA BACKEND PROXY
       "/java": {
-        target: "http://10.131.175.145:8080/api/v1",
+        target: "http://10.131.221.179:8080/api/v1",
         changeOrigin: true,
       },
 
-- 
2.51.0.windows.1

